// ==UserScript==
// @name           Govno 3 aka penochka
// @version	 
// @description    Govno. Rewrited.
// @include        http://2-ch.ru/*
// @include        http://*.2-ch.ru/*
// @exclude        */src/*
// ==/UserScript==
hex = [
	'data:text/javascript;base64,LyoKICogalF1ZXJ5IEphdmFTY3JpcHQgTGlicmFyeSB2MS4zLjIKICogaHR0cDovL2pxdWVyeS5jb20vCiAqCiAqIENvcHlyaWdodCAoYykgMjAwOSBKb2huIFJlc2lnCiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBhbmQgR1BMIGxpY2Vuc2VzLgogKiBodHRwOi8vZG9jcy5qcXVlcnkuY29tL0xpY2Vuc2UKICoKICogRGF0ZTogMjAwOS0wMi0xOSAxNzozNDoyMSAtMDUwMCAoVGh1LCAxOSBGZWIgMjAwOSkKICogUmV2aXNpb246IDYyNDYKICovCihmdW5jdGlvbigpe3ZhciBsPXRoaXMsZyx5PWwualF1ZXJ5LHA9bC4kLG89bC5qUXVlcnk9bC4kPWZ1bmN0aW9uKEUsRil7cmV0dXJuIG5ldyBvLmZuLmluaXQoRSxGKX0sRD0vXltePF0qKDwoLnxccykrPilbXj5dKiR8XiMoW1x3LV0rKSQvLGY9L14uW146I1xbXC4sXSokLztvLmZuPW8ucHJvdG90eXBlPXtpbml0OmZ1bmN0aW9uKEUsSCl7RT1FfHxkb2N1bWVudDtpZihFLm5vZGVUeXBlKXt0aGlzWzBdPUU7dGhpcy5sZW5ndGg9MTt0aGlzLmNvbnRleHQ9RTtyZXR1cm4gdGhpc31pZih0eXBlb2YgRT09PSJzdHJpbmciKXt2YXIgRz1ELmV4ZWMoRSk7aWYoRyYmKEdbMV18fCFIKSl7aWYoR1sxXSl7RT1vLmNsZWFuKFtHWzFdXSxIKX1lbHNle3ZhciBJPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKEdbM10pO2lmKEkmJkkuaWQhPUdbM10pe3JldHVybiBvKCkuZmluZChFKX12YXIgRj1vKEl8fFtdKTtGLmNvbnRleHQ9ZG9jdW1lbnQ7Ri5zZWxlY3Rvcj1FO3JldHVybiBGfX1lbHNle3JldHVybiBvKEgpLmZpbmQoRSl9fWVsc2V7aWYoby5pc0Z1bmN0aW9uKEUpKXtyZXR1cm4gbyhkb2N1bWVudCkucmVhZHkoRSl9fWlmKEUuc2VsZWN0b3ImJkUuY29udGV4dCl7dGhpcy5zZWxlY3Rvcj1FLnNlbGVjdG9yO3RoaXMuY29udGV4dD1FLmNvbnRleHR9cmV0dXJuIHRoaXMuc2V0QXJyYXkoby5pc0FycmF5KEUpP0U6by5tYWtlQXJyYXkoRSkpfSxzZWxlY3RvcjoiIixqcXVlcnk6IjEuMy4yIixzaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RofSxnZXQ6ZnVuY3Rpb24oRSl7cmV0dXJuIEU9PT1nP0FycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMpOnRoaXNbRV19LHB1c2hTdGFjazpmdW5jdGlvbihGLEgsRSl7dmFyIEc9byhGKTtHLnByZXZPYmplY3Q9dGhpcztHLmNvbnRleHQ9dGhpcy5jb250ZXh0O2lmKEg9PT0iZmluZCIpe0cuc2VsZWN0b3I9dGhpcy5zZWxlY3RvcisodGhpcy5zZWxlY3Rvcj8iICI6IiIpK0V9ZWxzZXtpZihIKXtHLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3IrIi4iK0grIigiK0UrIikifX1yZXR1cm4gR30sc2V0QXJyYXk6ZnVuY3Rpb24oRSl7dGhpcy5sZW5ndGg9MDtBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0aGlzLEUpO3JldHVybiB0aGlzfSxlYWNoOmZ1bmN0aW9uKEYsRSl7cmV0dXJuIG8uZWFjaCh0aGlzLEYsRSl9LGluZGV4OmZ1bmN0aW9uKEUpe3JldHVybiBvLmluQXJyYXkoRSYmRS5qcXVlcnk/RVswXTpFLHRoaXMpfSxhdHRyOmZ1bmN0aW9uKEYsSCxHKXt2YXIgRT1GO2lmKHR5cGVvZiBGPT09InN0cmluZyIpe2lmKEg9PT1nKXtyZXR1cm4gdGhpc1swXSYmb1tHfHwiYXR0ciJdKHRoaXNbMF0sRil9ZWxzZXtFPXt9O0VbRl09SH19cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihJKXtmb3IoRiBpbiBFKXtvLmF0dHIoRz90aGlzLnN0eWxlOnRoaXMsRixvLnByb3AodGhpcyxFW0ZdLEcsSSxGKSl9fSl9LGNzczpmdW5jdGlvbihFLEYpe2lmKChFPT0id2lkdGgifHxFPT0iaGVpZ2h0IikmJnBhcnNlRmxvYXQoRik8MCl7Rj1nfXJldHVybiB0aGlzLmF0dHIoRSxGLCJjdXJDU1MiKX0sdGV4dDpmdW5jdGlvbihGKXtpZih0eXBlb2YgRiE9PSJvYmplY3QiJiZGIT1udWxsKXtyZXR1cm4gdGhpcy5lbXB0eSgpLmFwcGVuZCgodGhpc1swXSYmdGhpc1swXS5vd25lckRvY3VtZW50fHxkb2N1bWVudCkuY3JlYXRlVGV4dE5vZGUoRikpfXZhciBFPSIiO28uZWFjaChGfHx0aGlzLGZ1bmN0aW9uKCl7by5lYWNoKHRoaXMuY2hpbGROb2RlcyxmdW5jdGlvbigpe2lmKHRoaXMubm9kZVR5cGUhPTgpe0UrPXRoaXMubm9kZVR5cGUhPTE/dGhpcy5ub2RlVmFsdWU6by5mbi50ZXh0KFt0aGlzXSl9fSl9KTtyZXR1cm4gRX0sd3JhcEFsbDpmdW5jdGlvbihFKXtpZih0aGlzWzBdKXt2YXIgRj1vKEUsdGhpc1swXS5vd25lckRvY3VtZW50KS5jbG9uZSgpO2lmKHRoaXNbMF0ucGFyZW50Tm9kZSl7Ri5pbnNlcnRCZWZvcmUodGhpc1swXSl9Ri5tYXAoZnVuY3Rpb24oKXt2YXIgRz10aGlzO3doaWxlKEcuZmlyc3RDaGlsZCl7Rz1HLmZpcnN0Q2hpbGR9cmV0dXJuIEd9KS5hcHBlbmQodGhpcyl9cmV0dXJuIHRoaXN9LHdyYXBJbm5lcjpmdW5jdGlvbihFKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7byh0aGlzKS5jb250ZW50cygpLndyYXBBbGwoRSl9KX0sd3JhcDpmdW5jdGlvbihFKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7byh0aGlzKS53cmFwQWxsKEUpfSl9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyx0cnVlLGZ1bmN0aW9uKEUpe2lmKHRoaXMubm9kZVR5cGU9PTEpe3RoaXMuYXBwZW5kQ2hpbGQoRSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsdHJ1ZSxmdW5jdGlvbihFKXtpZih0aGlzLm5vZGVUeXBlPT0xKXt0aGlzLmluc2VydEJlZm9yZShFLHRoaXMuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmYWxzZSxmdW5jdGlvbihFKXt0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKEUsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZmFsc2UsZnVuY3Rpb24oRSl7dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShFLHRoaXMubmV4dFNpYmxpbmcpfSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fG8oW10pfSxwdXNoOltdLnB1c2gsc29ydDpbXS5zb3J0LHNwbGljZTpbXS5zcGxpY2UsZmluZDpmdW5jdGlvbihFKXtpZih0aGlzLmxlbmd0aD09PTEpe3ZhciBGPXRoaXMucHVzaFN0YWNrKFtdLCJmaW5kIixFKTtGLmxlbmd0aD0wO28uZmluZChFLHRoaXNbMF0sRik7cmV0dXJuIEZ9ZWxzZXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soby51bmlxdWUoby5tYXAodGhpcyxmdW5jdGlvbihHKXtyZXR1cm4gby5maW5kKEUsRyl9KSksImZpbmQiLEUpfX0sY2xvbmU6ZnVuY3Rpb24oRyl7dmFyIEU9dGhpcy5tYXAoZnVuY3Rpb24oKXtpZighby5zdXBwb3J0Lm5vQ2xvbmVFdmVudCYmIW8uaXNYTUxEb2ModGhpcykpe3ZhciBJPXRoaXMub3V0ZXJIVE1MO2lmKCFJKXt2YXIgSj10aGlzLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Si5hcHBlbmRDaGlsZCh0aGlzLmNsb25lTm9kZSh0cnVlKSk7ST1KLmlubmVySFRNTH1yZXR1cm4gby5jbGVhbihbSS5yZXBsYWNlKC8galF1ZXJ5XGQrPSIoPzpcZCt8bnVsbCkiL2csIiIpLnJlcGxhY2UoL15ccyovLCIiKV0pWzBdfWVsc2V7cmV0dXJuIHRoaXMuY2xvbmVOb2RlKHRydWUpfX0pO2lmKEc9PT10cnVlKXt2YXIgSD10aGlzLmZpbmQoIioiKS5hbmRTZWxmKCksRj0wO0UuZmluZCgiKiIpLmFuZFNlbGYoKS5lYWNoKGZ1bmN0aW9uKCl7aWYodGhpcy5ub2RlTmFtZSE9PUhbRl0ubm9kZU5hbWUpe3JldHVybn12YXIgST1vLmRhdGEoSFtGXSwiZXZlbnRzIik7Zm9yKHZhciBLIGluIEkpe2Zvcih2YXIgSiBpbiBJW0tdKXtvLmV2ZW50LmFkZCh0aGlzLEssSVtLXVtKXSxJW0tdW0pdLmRhdGEpfX1GKyt9KX1yZXR1cm4gRX0sZmlsdGVyOmZ1bmN0aW9uKEUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhvLmlzRnVuY3Rpb24oRSkmJm8uZ3JlcCh0aGlzLGZ1bmN0aW9uKEcsRil7cmV0dXJuIEUuY2FsbChHLEYpfSl8fG8ubXVsdGlGaWx0ZXIoRSxvLmdyZXAodGhpcyxmdW5jdGlvbihGKXtyZXR1cm4gRi5ub2RlVHlwZT09PTF9KSksImZpbHRlciIsRSl9LGNsb3Nlc3Q6ZnVuY3Rpb24oRSl7dmFyIEc9by5leHByLm1hdGNoLlBPUy50ZXN0KEUpP28oRSk6bnVsbCxGPTA7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIEg9dGhpczt3aGlsZShIJiZILm93bmVyRG9jdW1lbnQpe2lmKEc/Ry5pbmRleChIKT4tMTpvKEgpLmlzKEUpKXtvLmRhdGEoSCwiY2xvc2VzdCIsRik7cmV0dXJuIEh9SD1ILnBhcmVudE5vZGU7RisrfX0pfSxub3Q6ZnVuY3Rpb24oRSl7aWYodHlwZW9mIEU9PT0ic3RyaW5nIil7aWYoZi50ZXN0KEUpKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soby5tdWx0aUZpbHRlcihFLHRoaXMsdHJ1ZSksIm5vdCIsRSl9ZWxzZXtFPW8ubXVsdGlGaWx0ZXIoRSx0aGlzKX19dmFyIEY9RS5sZW5ndGgmJkVbRS5sZW5ndGgtMV0hPT1nJiYhRS5ub2RlVHlwZTtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gRj9vLmluQXJyYXkodGhpcyxFKTwwOnRoaXMhPUV9KX0sYWRkOmZ1bmN0aW9uKEUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhvLnVuaXF1ZShvLm1lcmdlKHRoaXMuZ2V0KCksdHlwZW9mIEU9PT0ic3RyaW5nIj9vKEUpOm8ubWFrZUFycmF5KEUpKSkpfSxpczpmdW5jdGlvbihFKXtyZXR1cm4gISFFJiZvLm11bHRpRmlsdGVyKEUsdGhpcykubGVuZ3RoPjB9LGhhc0NsYXNzOmZ1bmN0aW9uKEUpe3JldHVybiAhIUUmJnRoaXMuaXMoIi4iK0UpfSx2YWw6ZnVuY3Rpb24oSyl7aWYoSz09PWcpe3ZhciBFPXRoaXNbMF07aWYoRSl7aWYoby5ub2RlTmFtZShFLCJvcHRpb24iKSl7cmV0dXJuKEUuYXR0cmlidXRlcy52YWx1ZXx8e30pLnNwZWNpZmllZD9FLnZhbHVlOkUudGV4dH1pZihvLm5vZGVOYW1lKEUsInNlbGVjdCIpKXt2YXIgST1FLnNlbGVjdGVkSW5kZXgsTD1bXSxNPUUub3B0aW9ucyxIPUUudHlwZT09InNlbGVjdC1vbmUiO2lmKEk8MCl7cmV0dXJuIG51bGx9Zm9yKHZhciBGPUg/STowLEo9SD9JKzE6TS5sZW5ndGg7RjxKO0YrKyl7dmFyIEc9TVtGXTtpZihHLnNlbGVjdGVkKXtLPW8oRykudmFsKCk7aWYoSCl7cmV0dXJuIEt9TC5wdXNoKEspfX1yZXR1cm4gTH1yZXR1cm4oRS52YWx1ZXx8IiIpLnJlcGxhY2UoL1xyL2csIiIpfXJldHVybiBnfWlmKHR5cGVvZiBLPT09Im51bWJlciIpe0srPSIifXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtpZih0aGlzLm5vZGVUeXBlIT0xKXtyZXR1cm59aWYoby5pc0FycmF5KEspJiYvcmFkaW98Y2hlY2tib3gvLnRlc3QodGhpcy50eXBlKSl7dGhpcy5jaGVja2VkPShvLmluQXJyYXkodGhpcy52YWx1ZSxLKT49MHx8by5pbkFycmF5KHRoaXMubmFtZSxLKT49MCl9ZWxzZXtpZihvLm5vZGVOYW1lKHRoaXMsInNlbGVjdCIpKXt2YXIgTj1vLm1ha2VBcnJheShLKTtvKCJvcHRpb24iLHRoaXMpLmVhY2goZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGVkPShvLmluQXJyYXkodGhpcy52YWx1ZSxOKT49MHx8by5pbkFycmF5KHRoaXMudGV4dCxOKT49MCl9KTtpZighTi5sZW5ndGgpe3RoaXMuc2VsZWN0ZWRJbmRleD0tMX19ZWxzZXt0aGlzLnZhbHVlPUt9fX0pfSxodG1sOmZ1bmN0aW9uKEUpe3JldHVybiBFPT09Zz8odGhpc1swXT90aGlzWzBdLmlubmVySFRNTC5yZXBsYWNlKC8galF1ZXJ5XGQrPSIoPzpcZCt8bnVsbCkiL2csIiIpOm51bGwpOnRoaXMuZW1wdHkoKS5hcHBlbmQoRSl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKEUpe3JldHVybiB0aGlzLmFmdGVyKEUpLnJlbW92ZSgpfSxlcTpmdW5jdGlvbihFKXtyZXR1cm4gdGhpcy5zbGljZShFLCtFKzEpfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkodGhpcyxhcmd1bWVudHMpLCJzbGljZSIsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKS5qb2luKCIsIikpfSxtYXA6ZnVuY3Rpb24oRSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG8ubWFwKHRoaXMsZnVuY3Rpb24oRyxGKXtyZXR1cm4gRS5jYWxsKEcsRixHKX0pKX0sYW5kU2VsZjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFkZCh0aGlzLnByZXZPYmplY3QpfSxkb21NYW5pcDpmdW5jdGlvbihKLE0sTCl7aWYodGhpc1swXSl7dmFyIEk9KHRoaXNbMF0ub3duZXJEb2N1bWVudHx8dGhpc1swXSkuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLEY9by5jbGVhbihKLCh0aGlzWzBdLm93bmVyRG9jdW1lbnR8fHRoaXNbMF0pLEkpLEg9SS5maXJzdENoaWxkO2lmKEgpe2Zvcih2YXIgRz0wLEU9dGhpcy5sZW5ndGg7RzxFO0crKyl7TC5jYWxsKEsodGhpc1tHXSxIKSx0aGlzLmxlbmd0aD4xfHxHPjA/SS5jbG9uZU5vZGUodHJ1ZSk6SSl9fWlmKEYpe28uZWFjaChGLHopfX1yZXR1cm4gdGhpcztmdW5jdGlvbiBLKE4sTyl7cmV0dXJuIE0mJm8ubm9kZU5hbWUoTiwidGFibGUiKSYmby5ub2RlTmFtZShPLCJ0ciIpPyhOLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0Ym9keSIpWzBdfHxOLmFwcGVuZENoaWxkKE4ub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0Ym9keSIpKSk6Tn19fTtvLmZuLmluaXQucHJvdG90eXBlPW8uZm47ZnVuY3Rpb24geihFLEYpe2lmKEYuc3JjKXtvLmFqYXgoe3VybDpGLnNyYyxhc3luYzpmYWxzZSxkYXRhVHlwZToic2NyaXB0In0pfWVsc2V7by5nbG9iYWxFdmFsKEYudGV4dHx8Ri50ZXh0Q29udGVudHx8Ri5pbm5lckhUTUx8fCIiKX1pZihGLnBhcmVudE5vZGUpe0YucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChGKX19ZnVuY3Rpb24gZSgpe3JldHVybiArbmV3IERhdGV9by5leHRlbmQ9by5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgSj1hcmd1bWVudHNbMF18fHt9LEg9MSxJPWFyZ3VtZW50cy5sZW5ndGgsRT1mYWxzZSxHO2lmKHR5cGVvZiBKPT09ImJvb2xlYW4iKXtFPUo7Sj1hcmd1bWVudHNbMV18fHt9O0g9Mn1pZih0eXBlb2YgSiE9PSJvYmplY3QiJiYhby5pc0Z1bmN0aW9uKEopKXtKPXt9fWlmKEk9PUgpe0o9dGhpczstLUh9Zm9yKDtIPEk7SCsrKXtpZigoRz1hcmd1bWVudHNbSF0pIT1udWxsKXtmb3IodmFyIEYgaW4gRyl7dmFyIEs9SltGXSxMPUdbRl07aWYoSj09PUwpe2NvbnRpbnVlfWlmKEUmJkwmJnR5cGVvZiBMPT09Im9iamVjdCImJiFMLm5vZGVUeXBlKXtKW0ZdPW8uZXh0ZW5kKEUsS3x8KEwubGVuZ3RoIT1udWxsP1tdOnt9KSxMKX1lbHNle2lmKEwhPT1nKXtKW0ZdPUx9fX19fXJldHVybiBKfTt2YXIgYj0vei0/aW5kZXh8Zm9udC0/d2VpZ2h0fG9wYWNpdHl8em9vbXxsaW5lLT9oZWlnaHQvaSxxPWRvY3VtZW50LmRlZmF1bHRWaWV3fHx7fSxzPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7by5leHRlbmQoe25vQ29uZmxpY3Q6ZnVuY3Rpb24oRSl7bC4kPXA7aWYoRSl7bC5qUXVlcnk9eX1yZXR1cm4gb30saXNGdW5jdGlvbjpmdW5jdGlvbihFKXtyZXR1cm4gcy5jYWxsKEUpPT09IltvYmplY3QgRnVuY3Rpb25dIn0saXNBcnJheTpmdW5jdGlvbihFKXtyZXR1cm4gcy5jYWxsKEUpPT09IltvYmplY3QgQXJyYXldIn0saXNYTUxEb2M6ZnVuY3Rpb24oRSl7cmV0dXJuIEUubm9kZVR5cGU9PT05JiZFLmRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSE9PSJIVE1MInx8ISFFLm93bmVyRG9jdW1lbnQmJm8uaXNYTUxEb2MoRS5vd25lckRvY3VtZW50KX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihHKXtpZihHJiYvXFMvLnRlc3QoRykpe3ZhciBGPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF18fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxFPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO0UudHlwZT0idGV4dC9qYXZhc2NyaXB0IjtpZihvLnN1cHBvcnQuc2NyaXB0RXZhbCl7RS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShHKSl9ZWxzZXtFLnRleHQ9R31GLmluc2VydEJlZm9yZShFLEYuZmlyc3RDaGlsZCk7Ri5yZW1vdmVDaGlsZChFKX19LG5vZGVOYW1lOmZ1bmN0aW9uKEYsRSl7cmV0dXJuIEYubm9kZU5hbWUmJkYubm9kZU5hbWUudG9VcHBlckNhc2UoKT09RS50b1VwcGVyQ2FzZSgpfSxlYWNoOmZ1bmN0aW9uKEcsSyxGKXt2YXIgRSxIPTAsST1HLmxlbmd0aDtpZihGKXtpZihJPT09Zyl7Zm9yKEUgaW4gRyl7aWYoSy5hcHBseShHW0VdLEYpPT09ZmFsc2Upe2JyZWFrfX19ZWxzZXtmb3IoO0g8STspe2lmKEsuYXBwbHkoR1tIKytdLEYpPT09ZmFsc2Upe2JyZWFrfX19fWVsc2V7aWYoST09PWcpe2ZvcihFIGluIEcpe2lmKEsuY2FsbChHW0VdLEUsR1tFXSk9PT1mYWxzZSl7YnJlYWt9fX1lbHNle2Zvcih2YXIgSj1HWzBdO0g8SSYmSy5jYWxsKEosSCxKKSE9PWZhbHNlO0o9R1srK0hdKXt9fX1yZXR1cm4gR30scHJvcDpmdW5jdGlvbihILEksRyxGLEUpe2lmKG8uaXNGdW5jdGlvbihJKSl7ST1JLmNhbGwoSCxGKX1yZXR1cm4gdHlwZW9mIEk9PT0ibnVtYmVyIiYmRz09ImN1ckNTUyImJiFiLnRlc3QoRSk/SSsicHgiOkl9LGNsYXNzTmFtZTp7YWRkOmZ1bmN0aW9uKEUsRil7by5lYWNoKChGfHwiIikuc3BsaXQoL1xzKy8pLGZ1bmN0aW9uKEcsSCl7aWYoRS5ub2RlVHlwZT09MSYmIW8uY2xhc3NOYW1lLmhhcyhFLmNsYXNzTmFtZSxIKSl7RS5jbGFzc05hbWUrPShFLmNsYXNzTmFtZT8iICI6IiIpK0h9fSl9LHJlbW92ZTpmdW5jdGlvbihFLEYpe2lmKEUubm9kZVR5cGU9PTEpe0UuY2xhc3NOYW1lPUYhPT1nP28uZ3JlcChFLmNsYXNzTmFtZS5zcGxpdCgvXHMrLyksZnVuY3Rpb24oRyl7cmV0dXJuICFvLmNsYXNzTmFtZS5oYXMoRixHKX0pLmpvaW4oIiAiKToiIn19LGhhczpmdW5jdGlvbihGLEUpe3JldHVybiBGJiZvLmluQXJyYXkoRSwoRi5jbGFzc05hbWV8fEYpLnRvU3RyaW5nKCkuc3BsaXQoL1xzKy8pKT4tMX19LHN3YXA6ZnVuY3Rpb24oSCxHLEkpe3ZhciBFPXt9O2Zvcih2YXIgRiBpbiBHKXtFW0ZdPUguc3R5bGVbRl07SC5zdHlsZVtGXT1HW0ZdfUkuY2FsbChIKTtmb3IodmFyIEYgaW4gRyl7SC5zdHlsZVtGXT1FW0ZdfX0sY3NzOmZ1bmN0aW9uKEgsRixKLEUpe2lmKEY9PSJ3aWR0aCJ8fEY9PSJoZWlnaHQiKXt2YXIgTCxHPXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxLPUY9PSJ3aWR0aCI/WyJMZWZ0IiwiUmlnaHQiXTpbIlRvcCIsIkJvdHRvbSJdO2Z1bmN0aW9uIEkoKXtMPUY9PSJ3aWR0aCI/SC5vZmZzZXRXaWR0aDpILm9mZnNldEhlaWdodDtpZihFPT09ImJvcmRlciIpe3JldHVybn1vLmVhY2goSyxmdW5jdGlvbigpe2lmKCFFKXtMLT1wYXJzZUZsb2F0KG8uY3VyQ1NTKEgsInBhZGRpbmciK3RoaXMsdHJ1ZSkpfHwwfWlmKEU9PT0ibWFyZ2luIil7TCs9cGFyc2VGbG9hdChvLmN1ckNTUyhILCJtYXJnaW4iK3RoaXMsdHJ1ZSkpfHwwfWVsc2V7TC09cGFyc2VGbG9hdChvLmN1ckNTUyhILCJib3JkZXIiK3RoaXMrIldpZHRoIix0cnVlKSl8fDB9fSl9aWYoSC5vZmZzZXRXaWR0aCE9PTApe0koKX1lbHNle28uc3dhcChILEcsSSl9cmV0dXJuIE1hdGgubWF4KDAsTWF0aC5yb3VuZChMKSl9cmV0dXJuIG8uY3VyQ1NTKEgsRixKKX0sY3VyQ1NTOmZ1bmN0aW9uKEksRixHKXt2YXIgTCxFPUkuc3R5bGU7aWYoRj09Im9wYWNpdHkiJiYhby5zdXBwb3J0Lm9wYWNpdHkpe0w9by5hdHRyKEUsIm9wYWNpdHkiKTtyZXR1cm4gTD09IiI/IjEiOkx9aWYoRi5tYXRjaCgvZmxvYXQvaSkpe0Y9d31pZighRyYmRSYmRVtGXSl7TD1FW0ZdfWVsc2V7aWYocS5nZXRDb21wdXRlZFN0eWxlKXtpZihGLm1hdGNoKC9mbG9hdC9pKSl7Rj0iZmxvYXQifUY9Ri5yZXBsYWNlKC8oW0EtWl0pL2csIi0kMSIpLnRvTG93ZXJDYXNlKCk7dmFyIE09cS5nZXRDb21wdXRlZFN0eWxlKEksbnVsbCk7aWYoTSl7TD1NLmdldFByb3BlcnR5VmFsdWUoRil9aWYoRj09Im9wYWNpdHkiJiZMPT0iIil7TD0iMSJ9fWVsc2V7aWYoSS5jdXJyZW50U3R5bGUpe3ZhciBKPUYucmVwbGFjZSgvXC0oXHcpL2csZnVuY3Rpb24oTixPKXtyZXR1cm4gTy50b1VwcGVyQ2FzZSgpfSk7TD1JLmN1cnJlbnRTdHlsZVtGXXx8SS5jdXJyZW50U3R5bGVbSl07aWYoIS9eXGQrKHB4KT8kL2kudGVzdChMKSYmL15cZC8udGVzdChMKSl7dmFyIEg9RS5sZWZ0LEs9SS5ydW50aW1lU3R5bGUubGVmdDtJLnJ1bnRpbWVTdHlsZS5sZWZ0PUkuY3VycmVudFN0eWxlLmxlZnQ7RS5sZWZ0PUx8fDA7TD1FLnBpeGVsTGVmdCsicHgiO0UubGVmdD1IO0kucnVudGltZVN0eWxlLmxlZnQ9S319fX1yZXR1cm4gTH0sY2xlYW46ZnVuY3Rpb24oRixLLEkpe0s9S3x8ZG9jdW1lbnQ7aWYodHlwZW9mIEsuY3JlYXRlRWxlbWVudD09PSJ1bmRlZmluZWQiKXtLPUsub3duZXJEb2N1bWVudHx8S1swXSYmS1swXS5vd25lckRvY3VtZW50fHxkb2N1bWVudH1pZighSSYmRi5sZW5ndGg9PT0xJiZ0eXBlb2YgRlswXT09PSJzdHJpbmciKXt2YXIgSD0vXjwoXHcrKVxzKlwvPz4kLy5leGVjKEZbMF0pO2lmKEgpe3JldHVybltLLmNyZWF0ZUVsZW1lbnQoSFsxXSldfX12YXIgRz1bXSxFPVtdLEw9Sy5jcmVhdGVFbGVtZW50KCJkaXYiKTtvLmVhY2goRixmdW5jdGlvbihQLFMpe2lmKHR5cGVvZiBTPT09Im51bWJlciIpe1MrPSIifWlmKCFTKXtyZXR1cm59aWYodHlwZW9mIFM9PT0ic3RyaW5nIil7Uz1TLnJlcGxhY2UoLyg8KFx3KylbXj5dKj8pXC8+L2csZnVuY3Rpb24oVSxWLFQpe3JldHVybiBULm1hdGNoKC9eKGFiYnJ8YnJ8Y29sfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW18aHJ8YXJlYXxlbWJlZCkkL2kpP1U6VisiPjwvIitUKyI+In0pO3ZhciBPPVMucmVwbGFjZSgvXlxzKy8sIiIpLnN1YnN0cmluZygwLDEwKS50b0xvd2VyQ2FzZSgpO3ZhciBRPSFPLmluZGV4T2YoIjxvcHQiKSYmWzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXXx8IU8uaW5kZXhPZigiPGxlZyIpJiZbMSwiPGZpZWxkc2V0PiIsIjwvZmllbGRzZXQ+Il18fE8ubWF0Y2goL148KHRoZWFkfHRib2R5fHRmb290fGNvbGd8Y2FwKS8pJiZbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il18fCFPLmluZGV4T2YoIjx0ciIpJiZbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il18fCghTy5pbmRleE9mKCI8dGQiKXx8IU8uaW5kZXhPZigiPHRoIikpJiZbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il18fCFPLmluZGV4T2YoIjxjb2wiKSYmWzIsIjx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3RhYmxlPiJdfHwhby5zdXBwb3J0Lmh0bWxTZXJpYWxpemUmJlsxLCJkaXY8ZGl2PiIsIjwvZGl2PiJdfHxbMCwiIiwiIl07TC5pbm5lckhUTUw9UVsxXStTK1FbMl07d2hpbGUoUVswXS0tKXtMPUwubGFzdENoaWxkfWlmKCFvLnN1cHBvcnQudGJvZHkpe3ZhciBSPS88dGJvZHkvaS50ZXN0KFMpLE49IU8uaW5kZXhPZigiPHRhYmxlIikmJiFSP0wuZmlyc3RDaGlsZCYmTC5maXJzdENoaWxkLmNoaWxkTm9kZXM6UVsxXT09Ijx0YWJsZT4iJiYhUj9MLmNoaWxkTm9kZXM6W107Zm9yKHZhciBNPU4ubGVuZ3RoLTE7TT49MDstLU0pe2lmKG8ubm9kZU5hbWUoTltNXSwidGJvZHkiKSYmIU5bTV0uY2hpbGROb2Rlcy5sZW5ndGgpe05bTV0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChOW01dKX19fWlmKCFvLnN1cHBvcnQubGVhZGluZ1doaXRlc3BhY2UmJi9eXHMvLnRlc3QoUykpe0wuaW5zZXJ0QmVmb3JlKEsuY3JlYXRlVGV4dE5vZGUoUy5tYXRjaCgvXlxzKi8pWzBdKSxMLmZpcnN0Q2hpbGQpfVM9by5tYWtlQXJyYXkoTC5jaGlsZE5vZGVzKX1pZihTLm5vZGVUeXBlKXtHLnB1c2goUyl9ZWxzZXtHPW8ubWVyZ2UoRyxTKX19KTtpZihJKXtmb3IodmFyIEo9MDtHW0pdO0orKyl7aWYoby5ub2RlTmFtZShHW0pdLCJzY3JpcHQiKSYmKCFHW0pdLnR5cGV8fEdbSl0udHlwZS50b0xvd2VyQ2FzZSgpPT09InRleHQvamF2YXNjcmlwdCIpKXtFLnB1c2goR1tKXS5wYXJlbnROb2RlP0dbSl0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChHW0pdKTpHW0pdKX1lbHNle2lmKEdbSl0ubm9kZVR5cGU9PT0xKXtHLnNwbGljZS5hcHBseShHLFtKKzEsMF0uY29uY2F0KG8ubWFrZUFycmF5KEdbSl0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoInNjcmlwdCIpKSkpfUkuYXBwZW5kQ2hpbGQoR1tKXSl9fXJldHVybiBFfXJldHVybiBHfSxhdHRyOmZ1bmN0aW9uKEosRyxLKXtpZighSnx8Si5ub2RlVHlwZT09M3x8Si5ub2RlVHlwZT09OCl7cmV0dXJuIGd9dmFyIEg9IW8uaXNYTUxEb2MoSiksTD1LIT09ZztHPUgmJm8ucHJvcHNbR118fEc7aWYoSi50YWdOYW1lKXt2YXIgRj0vaHJlZnxzcmN8c3R5bGUvLnRlc3QoRyk7aWYoRz09InNlbGVjdGVkIiYmSi5wYXJlbnROb2RlKXtKLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleH1pZihHIGluIEomJkgmJiFGKXtpZihMKXtpZihHPT0idHlwZSImJm8ubm9kZU5hbWUoSiwiaW5wdXQiKSYmSi5wYXJlbnROb2RlKXt0aHJvdyJ0eXBlIHByb3BlcnR5IGNhbid0IGJlIGNoYW5nZWQifUpbR109S31pZihvLm5vZGVOYW1lKEosImZvcm0iKSYmSi5nZXRBdHRyaWJ1dGVOb2RlKEcpKXtyZXR1cm4gSi5nZXRBdHRyaWJ1dGVOb2RlKEcpLm5vZGVWYWx1ZX1pZihHPT0idGFiSW5kZXgiKXt2YXIgST1KLmdldEF0dHJpYnV0ZU5vZGUoInRhYkluZGV4Iik7cmV0dXJuIEkmJkkuc3BlY2lmaWVkP0kudmFsdWU6Si5ub2RlTmFtZS5tYXRjaCgvKGJ1dHRvbnxpbnB1dHxvYmplY3R8c2VsZWN0fHRleHRhcmVhKS9pKT8wOkoubm9kZU5hbWUubWF0Y2goL14oYXxhcmVhKSQvaSkmJkouaHJlZj8wOmd9cmV0dXJuIEpbR119aWYoIW8uc3VwcG9ydC5zdHlsZSYmSCYmRz09InN0eWxlIil7cmV0dXJuIG8uYXR0cihKLnN0eWxlLCJjc3NUZXh0IixLKX1pZihMKXtKLnNldEF0dHJpYnV0ZShHLCIiK0spfXZhciBFPSFvLnN1cHBvcnQuaHJlZk5vcm1hbGl6ZWQmJkgmJkY/Si5nZXRBdHRyaWJ1dGUoRywyKTpKLmdldEF0dHJpYnV0ZShHKTtyZXR1cm4gRT09PW51bGw/ZzpFfWlmKCFvLnN1cHBvcnQub3BhY2l0eSYmRz09Im9wYWNpdHkiKXtpZihMKXtKLnpvb209MTtKLmZpbHRlcj0oSi5maWx0ZXJ8fCIiKS5yZXBsYWNlKC9hbHBoYVwoW14pXSpcKS8sIiIpKyhwYXJzZUludChLKSsiIj09Ik5hTiI/IiI6ImFscGhhKG9wYWNpdHk9IitLKjEwMCsiKSIpfXJldHVybiBKLmZpbHRlciYmSi5maWx0ZXIuaW5kZXhPZigib3BhY2l0eT0iKT49MD8ocGFyc2VGbG9hdChKLmZpbHRlci5tYXRjaCgvb3BhY2l0eT0oW14pXSopLylbMV0pLzEwMCkrIiI6IiJ9Rz1HLnJlcGxhY2UoLy0oW2Etel0pL2lnLGZ1bmN0aW9uKE0sTil7cmV0dXJuIE4udG9VcHBlckNhc2UoKX0pO2lmKEwpe0pbR109S31yZXR1cm4gSltHXX0sdHJpbTpmdW5jdGlvbihFKXtyZXR1cm4oRXx8IiIpLnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKEcpe3ZhciBFPVtdO2lmKEchPW51bGwpe3ZhciBGPUcubGVuZ3RoO2lmKEY9PW51bGx8fHR5cGVvZiBHPT09InN0cmluZyJ8fG8uaXNGdW5jdGlvbihHKXx8Ry5zZXRJbnRlcnZhbCl7RVswXT1HfWVsc2V7d2hpbGUoRil7RVstLUZdPUdbRl19fX1yZXR1cm4gRX0saW5BcnJheTpmdW5jdGlvbihHLEgpe2Zvcih2YXIgRT0wLEY9SC5sZW5ndGg7RTxGO0UrKyl7aWYoSFtFXT09PUcpe3JldHVybiBFfX1yZXR1cm4gLTF9LG1lcmdlOmZ1bmN0aW9uKEgsRSl7dmFyIEY9MCxHLEk9SC5sZW5ndGg7aWYoIW8uc3VwcG9ydC5nZXRBbGwpe3doaWxlKChHPUVbRisrXSkhPW51bGwpe2lmKEcubm9kZVR5cGUhPTgpe0hbSSsrXT1HfX19ZWxzZXt3aGlsZSgoRz1FW0YrK10pIT1udWxsKXtIW0krK109R319cmV0dXJuIEh9LHVuaXF1ZTpmdW5jdGlvbihLKXt2YXIgRj1bXSxFPXt9O3RyeXtmb3IodmFyIEc9MCxIPUsubGVuZ3RoO0c8SDtHKyspe3ZhciBKPW8uZGF0YShLW0ddKTtpZighRVtKXSl7RVtKXT10cnVlO0YucHVzaChLW0ddKX19fWNhdGNoKEkpe0Y9S31yZXR1cm4gRn0sZ3JlcDpmdW5jdGlvbihGLEosRSl7dmFyIEc9W107Zm9yKHZhciBIPTAsST1GLmxlbmd0aDtIPEk7SCsrKXtpZighRSE9IUooRltIXSxIKSl7Ry5wdXNoKEZbSF0pfX1yZXR1cm4gR30sbWFwOmZ1bmN0aW9uKEUsSil7dmFyIEY9W107Zm9yKHZhciBHPTAsSD1FLmxlbmd0aDtHPEg7RysrKXt2YXIgST1KKEVbR10sRyk7aWYoSSE9bnVsbCl7RltGLmxlbmd0aF09SX19cmV0dXJuIEYuY29uY2F0LmFwcGx5KFtdLEYpfX0pO3ZhciBDPW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtvLmJyb3dzZXI9e3ZlcnNpb246KEMubWF0Y2goLy4rKD86cnZ8aXR8cmF8aWUpW1wvOiBdKFtcZC5dKykvKXx8WzAsIjAiXSlbMV0sc2FmYXJpOi93ZWJraXQvLnRlc3QoQyksb3BlcmE6L29wZXJhLy50ZXN0KEMpLG1zaWU6L21zaWUvLnRlc3QoQykmJiEvb3BlcmEvLnRlc3QoQyksbW96aWxsYTovbW96aWxsYS8udGVzdChDKSYmIS8oY29tcGF0aWJsZXx3ZWJraXQpLy50ZXN0KEMpfTtvLmVhY2goe3BhcmVudDpmdW5jdGlvbihFKXtyZXR1cm4gRS5wYXJlbnROb2RlfSxwYXJlbnRzOmZ1bmN0aW9uKEUpe3JldHVybiBvLmRpcihFLCJwYXJlbnROb2RlIil9LG5leHQ6ZnVuY3Rpb24oRSl7cmV0dXJuIG8ubnRoKEUsMiwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihFKXtyZXR1cm4gby5udGgoRSwyLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihFKXtyZXR1cm4gby5kaXIoRSwibmV4dFNpYmxpbmciKX0scHJldkFsbDpmdW5jdGlvbihFKXtyZXR1cm4gby5kaXIoRSwicHJldmlvdXNTaWJsaW5nIil9LHNpYmxpbmdzOmZ1bmN0aW9uKEUpe3JldHVybiBvLnNpYmxpbmcoRS5wYXJlbnROb2RlLmZpcnN0Q2hpbGQsRSl9LGNoaWxkcmVuOmZ1bmN0aW9uKEUpe3JldHVybiBvLnNpYmxpbmcoRS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oRSl7cmV0dXJuIG8ubm9kZU5hbWUoRSwiaWZyYW1lIik/RS5jb250ZW50RG9jdW1lbnR8fEUuY29udGVudFdpbmRvdy5kb2N1bWVudDpvLm1ha2VBcnJheShFLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24oRSxGKXtvLmZuW0VdPWZ1bmN0aW9uKEcpe3ZhciBIPW8ubWFwKHRoaXMsRik7aWYoRyYmdHlwZW9mIEc9PSJzdHJpbmciKXtIPW8ubXVsdGlGaWx0ZXIoRyxIKX1yZXR1cm4gdGhpcy5wdXNoU3RhY2soby51bmlxdWUoSCksRSxHKX19KTtvLmVhY2goe2FwcGVuZFRvOiJhcHBlbmQiLHByZXBlbmRUbzoicHJlcGVuZCIsaW5zZXJ0QmVmb3JlOiJiZWZvcmUiLGluc2VydEFmdGVyOiJhZnRlciIscmVwbGFjZUFsbDoicmVwbGFjZVdpdGgifSxmdW5jdGlvbihFLEYpe28uZm5bRV09ZnVuY3Rpb24oRyl7dmFyIEo9W10sTD1vKEcpO2Zvcih2YXIgSz0wLEg9TC5sZW5ndGg7SzxIO0srKyl7dmFyIEk9KEs+MD90aGlzLmNsb25lKHRydWUpOnRoaXMpLmdldCgpO28uZm5bRl0uYXBwbHkobyhMW0tdKSxJKTtKPUouY29uY2F0KEkpfXJldHVybiB0aGlzLnB1c2hTdGFjayhKLEUsRyl9fSk7by5lYWNoKHtyZW1vdmVBdHRyOmZ1bmN0aW9uKEUpe28uYXR0cih0aGlzLEUsIiIpO2lmKHRoaXMubm9kZVR5cGU9PTEpe3RoaXMucmVtb3ZlQXR0cmlidXRlKEUpfX0sYWRkQ2xhc3M6ZnVuY3Rpb24oRSl7by5jbGFzc05hbWUuYWRkKHRoaXMsRSl9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKEUpe28uY2xhc3NOYW1lLnJlbW92ZSh0aGlzLEUpfSx0b2dnbGVDbGFzczpmdW5jdGlvbihGLEUpe2lmKHR5cGVvZiBFIT09ImJvb2xlYW4iKXtFPSFvLmNsYXNzTmFtZS5oYXModGhpcyxGKX1vLmNsYXNzTmFtZVtFPyJhZGQiOiJyZW1vdmUiXSh0aGlzLEYpfSxyZW1vdmU6ZnVuY3Rpb24oRSl7aWYoIUV8fG8uZmlsdGVyKEUsW3RoaXNdKS5sZW5ndGgpe28oIioiLHRoaXMpLmFkZChbdGhpc10pLmVhY2goZnVuY3Rpb24oKXtvLmV2ZW50LnJlbW92ZSh0aGlzKTtvLnJlbW92ZURhdGEodGhpcyl9KTtpZih0aGlzLnBhcmVudE5vZGUpe3RoaXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzKX19fSxlbXB0eTpmdW5jdGlvbigpe28odGhpcykuY2hpbGRyZW4oKS5yZW1vdmUoKTt3aGlsZSh0aGlzLmZpcnN0Q2hpbGQpe3RoaXMucmVtb3ZlQ2hpbGQodGhpcy5maXJzdENoaWxkKX19fSxmdW5jdGlvbihFLEYpe28uZm5bRV09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lYWNoKEYsYXJndW1lbnRzKX19KTtmdW5jdGlvbiBqKEUsRil7cmV0dXJuIEVbMF0mJnBhcnNlSW50KG8uY3VyQ1NTKEVbMF0sRix0cnVlKSwxMCl8fDB9dmFyIGg9ImpRdWVyeSIrZSgpLHY9MCxBPXt9O28uZXh0ZW5kKHtjYWNoZTp7fSxkYXRhOmZ1bmN0aW9uKEYsRSxHKXtGPUY9PWw/QTpGO3ZhciBIPUZbaF07aWYoIUgpe0g9RltoXT0rK3Z9aWYoRSYmIW8uY2FjaGVbSF0pe28uY2FjaGVbSF09e319aWYoRyE9PWcpe28uY2FjaGVbSF1bRV09R31yZXR1cm4gRT9vLmNhY2hlW0hdW0VdOkh9LHJlbW92ZURhdGE6ZnVuY3Rpb24oRixFKXtGPUY9PWw/QTpGO3ZhciBIPUZbaF07aWYoRSl7aWYoby5jYWNoZVtIXSl7ZGVsZXRlIG8uY2FjaGVbSF1bRV07RT0iIjtmb3IoRSBpbiBvLmNhY2hlW0hdKXticmVha31pZighRSl7by5yZW1vdmVEYXRhKEYpfX19ZWxzZXt0cnl7ZGVsZXRlIEZbaF19Y2F0Y2goRyl7aWYoRi5yZW1vdmVBdHRyaWJ1dGUpe0YucmVtb3ZlQXR0cmlidXRlKGgpfX1kZWxldGUgby5jYWNoZVtIXX19LHF1ZXVlOmZ1bmN0aW9uKEYsRSxIKXtpZihGKXtFPShFfHwiZngiKSsicXVldWUiO3ZhciBHPW8uZGF0YShGLEUpO2lmKCFHfHxvLmlzQXJyYXkoSCkpe0c9by5kYXRhKEYsRSxvLm1ha2VBcnJheShIKSl9ZWxzZXtpZihIKXtHLnB1c2goSCl9fX1yZXR1cm4gR30sZGVxdWV1ZTpmdW5jdGlvbihILEcpe3ZhciBFPW8ucXVldWUoSCxHKSxGPUUuc2hpZnQoKTtpZighR3x8Rz09PSJmeCIpe0Y9RVswXX1pZihGIT09Zyl7Ri5jYWxsKEgpfX19KTtvLmZuLmV4dGVuZCh7ZGF0YTpmdW5jdGlvbihFLEcpe3ZhciBIPUUuc3BsaXQoIi4iKTtIWzFdPUhbMV0/Ii4iK0hbMV06IiI7aWYoRz09PWcpe3ZhciBGPXRoaXMudHJpZ2dlckhhbmRsZXIoImdldERhdGEiK0hbMV0rIiEiLFtIWzBdXSk7aWYoRj09PWcmJnRoaXMubGVuZ3RoKXtGPW8uZGF0YSh0aGlzWzBdLEUpfXJldHVybiBGPT09ZyYmSFsxXT90aGlzLmRhdGEoSFswXSk6Rn1lbHNle3JldHVybiB0aGlzLnRyaWdnZXIoInNldERhdGEiK0hbMV0rIiEiLFtIWzBdLEddKS5lYWNoKGZ1bmN0aW9uKCl7by5kYXRhKHRoaXMsRSxHKX0pfX0scmVtb3ZlRGF0YTpmdW5jdGlvbihFKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7by5yZW1vdmVEYXRhKHRoaXMsRSl9KX0scXVldWU6ZnVuY3Rpb24oRSxGKXtpZih0eXBlb2YgRSE9PSJzdHJpbmciKXtGPUU7RT0iZngifWlmKEY9PT1nKXtyZXR1cm4gby5xdWV1ZSh0aGlzWzBdLEUpfXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgRz1vLnF1ZXVlKHRoaXMsRSxGKTtpZihFPT0iZngiJiZHLmxlbmd0aD09MSl7R1swXS5jYWxsKHRoaXMpfX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKEUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtvLmRlcXVldWUodGhpcyxFKX0pfX0pOyhmdW5jdGlvbigpe3ZhciBSPS8oKD86XCgoPzpcKFteKCldK1wpfFteKCldKykrXCl8XFsoPzpcW1teW1xdXSpcXXxbJyJdW14nIl0qWyciXXxbXltcXSciXSspK1xdfFxcLnxbXiA+K34sKFxbXFxdKykrfFs+K35dKShccyosXHMqKT8vZyxMPTAsSD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO3ZhciBGPWZ1bmN0aW9uKFksVSxhYixhYyl7YWI9YWJ8fFtdO1U9VXx8ZG9jdW1lbnQ7aWYoVS5ub2RlVHlwZSE9PTEmJlUubm9kZVR5cGUhPT05KXtyZXR1cm5bXX1pZighWXx8dHlwZW9mIFkhPT0ic3RyaW5nIil7cmV0dXJuIGFifXZhciBaPVtdLFcsYWYsYWksVCxhZCxWLFg9dHJ1ZTtSLmxhc3RJbmRleD0wO3doaWxlKChXPVIuZXhlYyhZKSkhPT1udWxsKXtaLnB1c2goV1sxXSk7aWYoV1syXSl7Vj1SZWdFeHAucmlnaHRDb250ZXh0O2JyZWFrfX1pZihaLmxlbmd0aD4xJiZNLmV4ZWMoWSkpe2lmKFoubGVuZ3RoPT09MiYmSS5yZWxhdGl2ZVtaWzBdXSl7YWY9SihaWzBdK1pbMV0sVSl9ZWxzZXthZj1JLnJlbGF0aXZlW1pbMF1dP1tVXTpGKFouc2hpZnQoKSxVKTt3aGlsZShaLmxlbmd0aCl7WT1aLnNoaWZ0KCk7aWYoSS5yZWxhdGl2ZVtZXSl7WSs9Wi5zaGlmdCgpfWFmPUooWSxhZil9fX1lbHNle3ZhciBhZT1hYz97ZXhwcjpaLnBvcCgpLHNldDpFKGFjKX06Ri5maW5kKFoucG9wKCksWi5sZW5ndGg9PT0xJiZVLnBhcmVudE5vZGU/VS5wYXJlbnROb2RlOlUsUShVKSk7YWY9Ri5maWx0ZXIoYWUuZXhwcixhZS5zZXQpO2lmKFoubGVuZ3RoPjApe2FpPUUoYWYpfWVsc2V7WD1mYWxzZX13aGlsZShaLmxlbmd0aCl7dmFyIGFoPVoucG9wKCksYWc9YWg7aWYoIUkucmVsYXRpdmVbYWhdKXthaD0iIn1lbHNle2FnPVoucG9wKCl9aWYoYWc9PW51bGwpe2FnPVV9SS5yZWxhdGl2ZVthaF0oYWksYWcsUShVKSl9fWlmKCFhaSl7YWk9YWZ9aWYoIWFpKXt0aHJvdyJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiAiKyhhaHx8WSl9aWYoSC5jYWxsKGFpKT09PSJbb2JqZWN0IEFycmF5XSIpe2lmKCFYKXthYi5wdXNoLmFwcGx5KGFiLGFpKX1lbHNle2lmKFUubm9kZVR5cGU9PT0xKXtmb3IodmFyIGFhPTA7YWlbYWFdIT1udWxsO2FhKyspe2lmKGFpW2FhXSYmKGFpW2FhXT09PXRydWV8fGFpW2FhXS5ub2RlVHlwZT09PTEmJksoVSxhaVthYV0pKSl7YWIucHVzaChhZlthYV0pfX19ZWxzZXtmb3IodmFyIGFhPTA7YWlbYWFdIT1udWxsO2FhKyspe2lmKGFpW2FhXSYmYWlbYWFdLm5vZGVUeXBlPT09MSl7YWIucHVzaChhZlthYV0pfX19fX1lbHNle0UoYWksYWIpfWlmKFYpe0YoVixVLGFiLGFjKTtpZihHKXtoYXNEdXBsaWNhdGU9ZmFsc2U7YWIuc29ydChHKTtpZihoYXNEdXBsaWNhdGUpe2Zvcih2YXIgYWE9MTthYTxhYi5sZW5ndGg7YWErKyl7aWYoYWJbYWFdPT09YWJbYWEtMV0pe2FiLnNwbGljZShhYS0tLDEpfX19fX1yZXR1cm4gYWJ9O0YubWF0Y2hlcz1mdW5jdGlvbihULFUpe3JldHVybiBGKFQsbnVsbCxudWxsLFUpfTtGLmZpbmQ9ZnVuY3Rpb24oYWEsVCxhYil7dmFyIFosWDtpZighYWEpe3JldHVybltdfWZvcih2YXIgVz0wLFY9SS5vcmRlci5sZW5ndGg7VzxWO1crKyl7dmFyIFk9SS5vcmRlcltXXSxYO2lmKChYPUkubWF0Y2hbWV0uZXhlYyhhYSkpKXt2YXIgVT1SZWdFeHAubGVmdENvbnRleHQ7aWYoVS5zdWJzdHIoVS5sZW5ndGgtMSkhPT0iXFwiKXtYWzFdPShYWzFdfHwiIikucmVwbGFjZSgvXFwvZywiIik7Wj1JLmZpbmRbWV0oWCxULGFiKTtpZihaIT1udWxsKXthYT1hYS5yZXBsYWNlKEkubWF0Y2hbWV0sIiIpO2JyZWFrfX19fWlmKCFaKXtaPVQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKX1yZXR1cm57c2V0OlosZXhwcjphYX19O0YuZmlsdGVyPWZ1bmN0aW9uKGFkLGFjLGFnLFcpe3ZhciBWPWFkLGFpPVtdLGFhPWFjLFksVCxaPWFjJiZhY1swXSYmUShhY1swXSk7d2hpbGUoYWQmJmFjLmxlbmd0aCl7Zm9yKHZhciBhYiBpbiBJLmZpbHRlcil7aWYoKFk9SS5tYXRjaFthYl0uZXhlYyhhZCkpIT1udWxsKXt2YXIgVT1JLmZpbHRlclthYl0sYWgsYWY7VD1mYWxzZTtpZihhYT09YWkpe2FpPVtdfWlmKEkucHJlRmlsdGVyW2FiXSl7WT1JLnByZUZpbHRlclthYl0oWSxhYSxhZyxhaSxXLFopO2lmKCFZKXtUPWFoPXRydWV9ZWxzZXtpZihZPT09dHJ1ZSl7Y29udGludWV9fX1pZihZKXtmb3IodmFyIFg9MDsoYWY9YWFbWF0pIT1udWxsO1grKyl7aWYoYWYpe2FoPVUoYWYsWSxYLGFhKTt2YXIgYWU9V14hIWFoO2lmKGFnJiZhaCE9bnVsbCl7aWYoYWUpe1Q9dHJ1ZX1lbHNle2FhW1hdPWZhbHNlfX1lbHNle2lmKGFlKXthaS5wdXNoKGFmKTtUPXRydWV9fX19fWlmKGFoIT09Zyl7aWYoIWFnKXthYT1haX1hZD1hZC5yZXBsYWNlKEkubWF0Y2hbYWJdLCIiKTtpZighVCl7cmV0dXJuW119YnJlYWt9fX1pZihhZD09Vil7aWYoVD09bnVsbCl7dGhyb3ciU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogIithZH1lbHNle2JyZWFrfX1WPWFkfXJldHVybiBhYX07dmFyIEk9Ri5zZWxlY3RvcnM9e29yZGVyOlsiSUQiLCJOQU1FIiwiVEFHIl0sbWF0Y2g6e0lEOi8jKCg/Oltcd1x1MDBjMC1cdUZGRkZfLV18XFwuKSspLyxDTEFTUzovXC4oKD86W1x3XHUwMGMwLVx1RkZGRl8tXXxcXC4pKykvLE5BTUU6L1xbbmFtZT1bJyJdKigoPzpbXHdcdTAwYzAtXHVGRkZGXy1dfFxcLikrKVsnIl0qXF0vLEFUVFI6L1xbXHMqKCg/Oltcd1x1MDBjMC1cdUZGRkZfLV18XFwuKSspXHMqKD86KFxTPz0pXHMqKFsnIl0qKSguKj8pXDN8KVxzKlxdLyxUQUc6L14oKD86W1x3XHUwMGMwLVx1RkZGRlwqXy1dfFxcLikrKS8sQ0hJTEQ6Lzoob25seXxudGh8bGFzdHxmaXJzdCktY2hpbGQoPzpcKChldmVufG9kZHxbXGRuKy1dKilcKSk/LyxQT1M6LzoobnRofGVxfGd0fGx0fGZpcnN0fGxhc3R8ZXZlbnxvZGQpKD86XCgoXGQqKVwpKT8oPz1bXi1dfCQpLyxQU0VVRE86LzooKD86W1x3XHUwMGMwLVx1RkZGRl8tXXxcXC4pKykoPzpcKChbJyJdKikoKD86XChbXlwpXStcKXxbXlwyXChcKV0qKSspXDJcKSk/L30sYXR0ck1hcDp7ImNsYXNzIjoiY2xhc3NOYW1lIiwiZm9yIjoiaHRtbEZvciJ9LGF0dHJIYW5kbGU6e2hyZWY6ZnVuY3Rpb24oVCl7cmV0dXJuIFQuZ2V0QXR0cmlidXRlKCJocmVmIil9fSxyZWxhdGl2ZTp7IisiOmZ1bmN0aW9uKGFhLFQsWil7dmFyIFg9dHlwZW9mIFQ9PT0ic3RyaW5nIixhYj1YJiYhL1xXLy50ZXN0KFQpLFk9WCYmIWFiO2lmKGFiJiYhWil7VD1ULnRvVXBwZXJDYXNlKCl9Zm9yKHZhciBXPTAsVj1hYS5sZW5ndGgsVTtXPFY7VysrKXtpZigoVT1hYVtXXSkpe3doaWxlKChVPVUucHJldmlvdXNTaWJsaW5nKSYmVS5ub2RlVHlwZSE9PTEpe31hYVtXXT1ZfHxVJiZVLm5vZGVOYW1lPT09VD9VfHxmYWxzZTpVPT09VH19aWYoWSl7Ri5maWx0ZXIoVCxhYSx0cnVlKX19LCI+IjpmdW5jdGlvbihaLFUsYWEpe3ZhciBYPXR5cGVvZiBVPT09InN0cmluZyI7aWYoWCYmIS9cVy8udGVzdChVKSl7VT1hYT9VOlUudG9VcHBlckNhc2UoKTtmb3IodmFyIFY9MCxUPVoubGVuZ3RoO1Y8VDtWKyspe3ZhciBZPVpbVl07aWYoWSl7dmFyIFc9WS5wYXJlbnROb2RlO1pbVl09Vy5ub2RlTmFtZT09PVU/VzpmYWxzZX19fWVsc2V7Zm9yKHZhciBWPTAsVD1aLmxlbmd0aDtWPFQ7VisrKXt2YXIgWT1aW1ZdO2lmKFkpe1pbVl09WD9ZLnBhcmVudE5vZGU6WS5wYXJlbnROb2RlPT09VX19aWYoWCl7Ri5maWx0ZXIoVSxaLHRydWUpfX19LCIiOmZ1bmN0aW9uKFcsVSxZKXt2YXIgVj1MKyssVD1TO2lmKCFVLm1hdGNoKC9cVy8pKXt2YXIgWD1VPVk/VTpVLnRvVXBwZXJDYXNlKCk7VD1QfVQoInBhcmVudE5vZGUiLFUsVixXLFgsWSl9LCJ+IjpmdW5jdGlvbihXLFUsWSl7dmFyIFY9TCsrLFQ9UztpZih0eXBlb2YgVT09PSJzdHJpbmciJiYhVS5tYXRjaCgvXFcvKSl7dmFyIFg9VT1ZP1U6VS50b1VwcGVyQ2FzZSgpO1Q9UH1UKCJwcmV2aW91c1NpYmxpbmciLFUsVixXLFgsWSl9fSxmaW5kOntJRDpmdW5jdGlvbihVLFYsVyl7aWYodHlwZW9mIFYuZ2V0RWxlbWVudEJ5SWQhPT0idW5kZWZpbmVkIiYmIVcpe3ZhciBUPVYuZ2V0RWxlbWVudEJ5SWQoVVsxXSk7cmV0dXJuIFQ/W1RdOltdfX0sTkFNRTpmdW5jdGlvbihWLFksWil7aWYodHlwZW9mIFkuZ2V0RWxlbWVudHNCeU5hbWUhPT0idW5kZWZpbmVkIil7dmFyIFU9W10sWD1ZLmdldEVsZW1lbnRzQnlOYW1lKFZbMV0pO2Zvcih2YXIgVz0wLFQ9WC5sZW5ndGg7VzxUO1crKyl7aWYoWFtXXS5nZXRBdHRyaWJ1dGUoIm5hbWUiKT09PVZbMV0pe1UucHVzaChYW1ddKX19cmV0dXJuIFUubGVuZ3RoPT09MD9udWxsOlV9fSxUQUc6ZnVuY3Rpb24oVCxVKXtyZXR1cm4gVS5nZXRFbGVtZW50c0J5VGFnTmFtZShUWzFdKX19LHByZUZpbHRlcjp7Q0xBU1M6ZnVuY3Rpb24oVyxVLFYsVCxaLGFhKXtXPSIgIitXWzFdLnJlcGxhY2UoL1xcL2csIiIpKyIgIjtpZihhYSl7cmV0dXJuIFd9Zm9yKHZhciBYPTAsWTsoWT1VW1hdKSE9bnVsbDtYKyspe2lmKFkpe2lmKFpeKFkuY2xhc3NOYW1lJiYoIiAiK1kuY2xhc3NOYW1lKyIgIikuaW5kZXhPZihXKT49MCkpe2lmKCFWKXtULnB1c2goWSl9fWVsc2V7aWYoVil7VVtYXT1mYWxzZX19fX1yZXR1cm4gZmFsc2V9LElEOmZ1bmN0aW9uKFQpe3JldHVybiBUWzFdLnJlcGxhY2UoL1xcL2csIiIpfSxUQUc6ZnVuY3Rpb24oVSxUKXtmb3IodmFyIFY9MDtUW1ZdPT09ZmFsc2U7VisrKXt9cmV0dXJuIFRbVl0mJlEoVFtWXSk/VVsxXTpVWzFdLnRvVXBwZXJDYXNlKCl9LENISUxEOmZ1bmN0aW9uKFQpe2lmKFRbMV09PSJudGgiKXt2YXIgVT0vKC0/KShcZCopbigoPzpcK3wtKT9cZCopLy5leGVjKFRbMl09PSJldmVuIiYmIjJuInx8VFsyXT09Im9kZCImJiIybisxInx8IS9cRC8udGVzdChUWzJdKSYmIjBuKyIrVFsyXXx8VFsyXSk7VFsyXT0oVVsxXSsoVVsyXXx8MSkpLTA7VFszXT1VWzNdLTB9VFswXT1MKys7cmV0dXJuIFR9LEFUVFI6ZnVuY3Rpb24oWCxVLFYsVCxZLFope3ZhciBXPVhbMV0ucmVwbGFjZSgvXFwvZywiIik7aWYoIVomJkkuYXR0ck1hcFtXXSl7WFsxXT1JLmF0dHJNYXBbV119aWYoWFsyXT09PSJ+PSIpe1hbNF09IiAiK1hbNF0rIiAifXJldHVybiBYfSxQU0VVRE86ZnVuY3Rpb24oWCxVLFYsVCxZKXtpZihYWzFdPT09Im5vdCIpe2lmKFhbM10ubWF0Y2goUikubGVuZ3RoPjF8fC9eXHcvLnRlc3QoWFszXSkpe1hbM109RihYWzNdLG51bGwsbnVsbCxVKX1lbHNle3ZhciBXPUYuZmlsdGVyKFhbM10sVSxWLHRydWVeWSk7aWYoIVYpe1QucHVzaC5hcHBseShULFcpfXJldHVybiBmYWxzZX19ZWxzZXtpZihJLm1hdGNoLlBPUy50ZXN0KFhbMF0pfHxJLm1hdGNoLkNISUxELnRlc3QoWFswXSkpe3JldHVybiB0cnVlfX1yZXR1cm4gWH0sUE9TOmZ1bmN0aW9uKFQpe1QudW5zaGlmdCh0cnVlKTtyZXR1cm4gVH19LGZpbHRlcnM6e2VuYWJsZWQ6ZnVuY3Rpb24oVCl7cmV0dXJuIFQuZGlzYWJsZWQ9PT1mYWxzZSYmVC50eXBlIT09ImhpZGRlbiJ9LGRpc2FibGVkOmZ1bmN0aW9uKFQpe3JldHVybiBULmRpc2FibGVkPT09dHJ1ZX0sY2hlY2tlZDpmdW5jdGlvbihUKXtyZXR1cm4gVC5jaGVja2VkPT09dHJ1ZX0sc2VsZWN0ZWQ6ZnVuY3Rpb24oVCl7VC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7cmV0dXJuIFQuc2VsZWN0ZWQ9PT10cnVlfSxwYXJlbnQ6ZnVuY3Rpb24oVCl7cmV0dXJuICEhVC5maXJzdENoaWxkfSxlbXB0eTpmdW5jdGlvbihUKXtyZXR1cm4gIVQuZmlyc3RDaGlsZH0saGFzOmZ1bmN0aW9uKFYsVSxUKXtyZXR1cm4gISFGKFRbM10sVikubGVuZ3RofSxoZWFkZXI6ZnVuY3Rpb24oVCl7cmV0dXJuL2hcZC9pLnRlc3QoVC5ub2RlTmFtZSl9LHRleHQ6ZnVuY3Rpb24oVCl7cmV0dXJuInRleHQiPT09VC50eXBlfSxyYWRpbzpmdW5jdGlvbihUKXtyZXR1cm4icmFkaW8iPT09VC50eXBlfSxjaGVja2JveDpmdW5jdGlvbihUKXtyZXR1cm4iY2hlY2tib3giPT09VC50eXBlfSxmaWxlOmZ1bmN0aW9uKFQpe3JldHVybiJmaWxlIj09PVQudHlwZX0scGFzc3dvcmQ6ZnVuY3Rpb24oVCl7cmV0dXJuInBhc3N3b3JkIj09PVQudHlwZX0sc3VibWl0OmZ1bmN0aW9uKFQpe3JldHVybiJzdWJtaXQiPT09VC50eXBlfSxpbWFnZTpmdW5jdGlvbihUKXtyZXR1cm4iaW1hZ2UiPT09VC50eXBlfSxyZXNldDpmdW5jdGlvbihUKXtyZXR1cm4icmVzZXQiPT09VC50eXBlfSxidXR0b246ZnVuY3Rpb24oVCl7cmV0dXJuImJ1dHRvbiI9PT1ULnR5cGV8fFQubm9kZU5hbWUudG9VcHBlckNhc2UoKT09PSJCVVRUT04ifSxpbnB1dDpmdW5jdGlvbihUKXtyZXR1cm4vaW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbi9pLnRlc3QoVC5ub2RlTmFtZSl9fSxzZXRGaWx0ZXJzOntmaXJzdDpmdW5jdGlvbihVLFQpe3JldHVybiBUPT09MH0sbGFzdDpmdW5jdGlvbihWLFUsVCxXKXtyZXR1cm4gVT09PVcubGVuZ3RoLTF9LGV2ZW46ZnVuY3Rpb24oVSxUKXtyZXR1cm4gVCUyPT09MH0sb2RkOmZ1bmN0aW9uKFUsVCl7cmV0dXJuIFQlMj09PTF9LGx0OmZ1bmN0aW9uKFYsVSxUKXtyZXR1cm4gVTxUWzNdLTB9LGd0OmZ1bmN0aW9uKFYsVSxUKXtyZXR1cm4gVT5UWzNdLTB9LG50aDpmdW5jdGlvbihWLFUsVCl7cmV0dXJuIFRbM10tMD09VX0sZXE6ZnVuY3Rpb24oVixVLFQpe3JldHVybiBUWzNdLTA9PVV9fSxmaWx0ZXI6e1BTRVVETzpmdW5jdGlvbihaLFYsVyxhYSl7dmFyIFU9VlsxXSxYPUkuZmlsdGVyc1tVXTtpZihYKXtyZXR1cm4gWChaLFcsVixhYSl9ZWxzZXtpZihVPT09ImNvbnRhaW5zIil7cmV0dXJuKFoudGV4dENvbnRlbnR8fFouaW5uZXJUZXh0fHwiIikuaW5kZXhPZihWWzNdKT49MH1lbHNle2lmKFU9PT0ibm90Iil7dmFyIFk9VlszXTtmb3IodmFyIFc9MCxUPVkubGVuZ3RoO1c8VDtXKyspe2lmKFlbV109PT1aKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfX19fSxDSElMRDpmdW5jdGlvbihULFcpe3ZhciBaPVdbMV0sVT1UO3N3aXRjaChaKXtjYXNlIm9ubHkiOmNhc2UiZmlyc3QiOndoaWxlKFU9VS5wcmV2aW91c1NpYmxpbmcpe2lmKFUubm9kZVR5cGU9PT0xKXtyZXR1cm4gZmFsc2V9fWlmKFo9PSJmaXJzdCIpe3JldHVybiB0cnVlfVU9VDtjYXNlImxhc3QiOndoaWxlKFU9VS5uZXh0U2libGluZyl7aWYoVS5ub2RlVHlwZT09PTEpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWU7Y2FzZSJudGgiOnZhciBWPVdbMl0sYWM9V1szXTtpZihWPT0xJiZhYz09MCl7cmV0dXJuIHRydWV9dmFyIFk9V1swXSxhYj1ULnBhcmVudE5vZGU7aWYoYWImJihhYi5zaXpjYWNoZSE9PVl8fCFULm5vZGVJbmRleCkpe3ZhciBYPTA7Zm9yKFU9YWIuZmlyc3RDaGlsZDtVO1U9VS5uZXh0U2libGluZyl7aWYoVS5ub2RlVHlwZT09PTEpe1Uubm9kZUluZGV4PSsrWH19YWIuc2l6Y2FjaGU9WX12YXIgYWE9VC5ub2RlSW5kZXgtYWM7aWYoVj09MCl7cmV0dXJuIGFhPT0wfWVsc2V7cmV0dXJuKGFhJVY9PTAmJmFhL1Y+PTApfX19LElEOmZ1bmN0aW9uKFUsVCl7cmV0dXJuIFUubm9kZVR5cGU9PT0xJiZVLmdldEF0dHJpYnV0ZSgiaWQiKT09PVR9LFRBRzpmdW5jdGlvbihVLFQpe3JldHVybihUPT09IioiJiZVLm5vZGVUeXBlPT09MSl8fFUubm9kZU5hbWU9PT1UfSxDTEFTUzpmdW5jdGlvbihVLFQpe3JldHVybigiICIrKFUuY2xhc3NOYW1lfHxVLmdldEF0dHJpYnV0ZSgiY2xhc3MiKSkrIiAiKS5pbmRleE9mKFQpPi0xfSxBVFRSOmZ1bmN0aW9uKFksVyl7dmFyIFY9V1sxXSxUPUkuYXR0ckhhbmRsZVtWXT9JLmF0dHJIYW5kbGVbVl0oWSk6WVtWXSE9bnVsbD9ZW1ZdOlkuZ2V0QXR0cmlidXRlKFYpLFo9VCsiIixYPVdbMl0sVT1XWzRdO3JldHVybiBUPT1udWxsP1g9PT0iIT0iOlg9PT0iPSI/Wj09PVU6WD09PSIqPSI/Wi5pbmRleE9mKFUpPj0wOlg9PT0ifj0iPygiICIrWisiICIpLmluZGV4T2YoVSk+PTA6IVU/WiYmVCE9PWZhbHNlOlg9PT0iIT0iP1ohPVU6WD09PSJePSI/Wi5pbmRleE9mKFUpPT09MDpYPT09IiQ9Ij9aLnN1YnN0cihaLmxlbmd0aC1VLmxlbmd0aCk9PT1VOlg9PT0ifD0iP1o9PT1VfHxaLnN1YnN0cigwLFUubGVuZ3RoKzEpPT09VSsiLSI6ZmFsc2V9LFBPUzpmdW5jdGlvbihYLFUsVixZKXt2YXIgVD1VWzJdLFc9SS5zZXRGaWx0ZXJzW1RdO2lmKFcpe3JldHVybiBXKFgsVixVLFkpfX19fTt2YXIgTT1JLm1hdGNoLlBPUztmb3IodmFyIE8gaW4gSS5tYXRjaCl7SS5tYXRjaFtPXT1SZWdFeHAoSS5tYXRjaFtPXS5zb3VyY2UrLyg/IVteXFtdKlxdKSg/IVteXChdKlwpKS8uc291cmNlKX12YXIgRT1mdW5jdGlvbihVLFQpe1U9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoVSk7aWYoVCl7VC5wdXNoLmFwcGx5KFQsVSk7cmV0dXJuIFR9cmV0dXJuIFV9O3RyeXtBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2hpbGROb2Rlcyl9Y2F0Y2goTil7RT1mdW5jdGlvbihYLFcpe3ZhciBVPVd8fFtdO2lmKEguY2FsbChYKT09PSJbb2JqZWN0IEFycmF5XSIpe0FycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KFUsWCl9ZWxzZXtpZih0eXBlb2YgWC5sZW5ndGg9PT0ibnVtYmVyIil7Zm9yKHZhciBWPTAsVD1YLmxlbmd0aDtWPFQ7VisrKXtVLnB1c2goWFtWXSl9fWVsc2V7Zm9yKHZhciBWPTA7WFtWXTtWKyspe1UucHVzaChYW1ZdKX19fXJldHVybiBVfX12YXIgRztpZihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29tcGFyZURvY3VtZW50UG9zaXRpb24pe0c9ZnVuY3Rpb24oVSxUKXt2YXIgVj1VLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKFQpJjQ/LTE6VT09PVQ/MDoxO2lmKFY9PT0wKXtoYXNEdXBsaWNhdGU9dHJ1ZX1yZXR1cm4gVn19ZWxzZXtpZigic291cmNlSW5kZXgiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCl7Rz1mdW5jdGlvbihVLFQpe3ZhciBWPVUuc291cmNlSW5kZXgtVC5zb3VyY2VJbmRleDtpZihWPT09MCl7aGFzRHVwbGljYXRlPXRydWV9cmV0dXJuIFZ9fWVsc2V7aWYoZG9jdW1lbnQuY3JlYXRlUmFuZ2Upe0c9ZnVuY3Rpb24oVyxVKXt2YXIgVj1XLm93bmVyRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSxUPVUub3duZXJEb2N1bWVudC5jcmVhdGVSYW5nZSgpO1Yuc2VsZWN0Tm9kZShXKTtWLmNvbGxhcHNlKHRydWUpO1Quc2VsZWN0Tm9kZShVKTtULmNvbGxhcHNlKHRydWUpO3ZhciBYPVYuY29tcGFyZUJvdW5kYXJ5UG9pbnRzKFJhbmdlLlNUQVJUX1RPX0VORCxUKTtpZihYPT09MCl7aGFzRHVwbGljYXRlPXRydWV9cmV0dXJuIFh9fX19KGZ1bmN0aW9uKCl7dmFyIFU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZm9ybSIpLFY9InNjcmlwdCIrKG5ldyBEYXRlKS5nZXRUaW1lKCk7VS5pbm5lckhUTUw9IjxpbnB1dCBuYW1lPSciK1YrIicvPiI7dmFyIFQ9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1QuaW5zZXJ0QmVmb3JlKFUsVC5maXJzdENoaWxkKTtpZighIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFYpKXtJLmZpbmQuSUQ9ZnVuY3Rpb24oWCxZLFope2lmKHR5cGVvZiBZLmdldEVsZW1lbnRCeUlkIT09InVuZGVmaW5lZCImJiFaKXt2YXIgVz1ZLmdldEVsZW1lbnRCeUlkKFhbMV0pO3JldHVybiBXP1cuaWQ9PT1YWzFdfHx0eXBlb2YgVy5nZXRBdHRyaWJ1dGVOb2RlIT09InVuZGVmaW5lZCImJlcuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKS5ub2RlVmFsdWU9PT1YWzFdP1tXXTpnOltdfX07SS5maWx0ZXIuSUQ9ZnVuY3Rpb24oWSxXKXt2YXIgWD10eXBlb2YgWS5nZXRBdHRyaWJ1dGVOb2RlIT09InVuZGVmaW5lZCImJlkuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gWS5ub2RlVHlwZT09PTEmJlgmJlgubm9kZVZhbHVlPT09V319VC5yZW1vdmVDaGlsZChVKX0pKCk7KGZ1bmN0aW9uKCl7dmFyIFQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7VC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVDb21tZW50KCIiKSk7aWYoVC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aD4wKXtJLmZpbmQuVEFHPWZ1bmN0aW9uKFUsWSl7dmFyIFg9WS5nZXRFbGVtZW50c0J5VGFnTmFtZShVWzFdKTtpZihVWzFdPT09IioiKXt2YXIgVz1bXTtmb3IodmFyIFY9MDtYW1ZdO1YrKyl7aWYoWFtWXS5ub2RlVHlwZT09PTEpe1cucHVzaChYW1ZdKX19WD1XfXJldHVybiBYfX1ULmlubmVySFRNTD0iPGEgaHJlZj0nIyc+PC9hPiI7aWYoVC5maXJzdENoaWxkJiZ0eXBlb2YgVC5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSE9PSJ1bmRlZmluZWQiJiZULmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIikhPT0iIyIpe0kuYXR0ckhhbmRsZS5ocmVmPWZ1bmN0aW9uKFUpe3JldHVybiBVLmdldEF0dHJpYnV0ZSgiaHJlZiIsMil9fX0pKCk7aWYoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCl7KGZ1bmN0aW9uKCl7dmFyIFQ9RixVPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO1UuaW5uZXJIVE1MPSI8cCBjbGFzcz0nVEVTVCc+PC9wPiI7aWYoVS5xdWVyeVNlbGVjdG9yQWxsJiZVLnF1ZXJ5U2VsZWN0b3JBbGwoIi5URVNUIikubGVuZ3RoPT09MCl7cmV0dXJufUY9ZnVuY3Rpb24oWSxYLFYsVyl7WD1YfHxkb2N1bWVudDtpZighVyYmWC5ub2RlVHlwZT09PTkmJiFRKFgpKXt0cnl7cmV0dXJuIEUoWC5xdWVyeVNlbGVjdG9yQWxsKFkpLFYpfWNhdGNoKFope319cmV0dXJuIFQoWSxYLFYsVyl9O0YuZmluZD1ULmZpbmQ7Ri5maWx0ZXI9VC5maWx0ZXI7Ri5zZWxlY3RvcnM9VC5zZWxlY3RvcnM7Ri5tYXRjaGVzPVQubWF0Y2hlc30pKCl9aWYoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUpeyhmdW5jdGlvbigpe3ZhciBUPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO1QuaW5uZXJIVE1MPSI8ZGl2IGNsYXNzPSd0ZXN0IGUnPjwvZGl2PjxkaXYgY2xhc3M9J3Rlc3QnPjwvZGl2PiI7aWYoVC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJlIikubGVuZ3RoPT09MCl7cmV0dXJufVQubGFzdENoaWxkLmNsYXNzTmFtZT0iZSI7aWYoVC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJlIikubGVuZ3RoPT09MSl7cmV0dXJufUkub3JkZXIuc3BsaWNlKDEsMCwiQ0xBU1MiKTtJLmZpbmQuQ0xBU1M9ZnVuY3Rpb24oVSxWLFcpe2lmKHR5cGVvZiBWLmdldEVsZW1lbnRzQnlDbGFzc05hbWUhPT0idW5kZWZpbmVkIiYmIVcpe3JldHVybiBWLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoVVsxXSl9fX0pKCl9ZnVuY3Rpb24gUChVLFosWSxhZCxhYSxhYyl7dmFyIGFiPVU9PSJwcmV2aW91c1NpYmxpbmciJiYhYWM7Zm9yKHZhciBXPTAsVj1hZC5sZW5ndGg7VzxWO1crKyl7dmFyIFQ9YWRbV107aWYoVCl7aWYoYWImJlQubm9kZVR5cGU9PT0xKXtULnNpemNhY2hlPVk7VC5zaXpzZXQ9V31UPVRbVV07dmFyIFg9ZmFsc2U7d2hpbGUoVCl7aWYoVC5zaXpjYWNoZT09PVkpe1g9YWRbVC5zaXpzZXRdO2JyZWFrfWlmKFQubm9kZVR5cGU9PT0xJiYhYWMpe1Quc2l6Y2FjaGU9WTtULnNpenNldD1XfWlmKFQubm9kZU5hbWU9PT1aKXtYPVQ7YnJlYWt9VD1UW1VdfWFkW1ddPVh9fX1mdW5jdGlvbiBTKFUsWixZLGFkLGFhLGFjKXt2YXIgYWI9VT09InByZXZpb3VzU2libGluZyImJiFhYztmb3IodmFyIFc9MCxWPWFkLmxlbmd0aDtXPFY7VysrKXt2YXIgVD1hZFtXXTtpZihUKXtpZihhYiYmVC5ub2RlVHlwZT09PTEpe1Quc2l6Y2FjaGU9WTtULnNpenNldD1XfVQ9VFtVXTt2YXIgWD1mYWxzZTt3aGlsZShUKXtpZihULnNpemNhY2hlPT09WSl7WD1hZFtULnNpenNldF07YnJlYWt9aWYoVC5ub2RlVHlwZT09PTEpe2lmKCFhYyl7VC5zaXpjYWNoZT1ZO1Quc2l6c2V0PVd9aWYodHlwZW9mIFohPT0ic3RyaW5nIil7aWYoVD09PVope1g9dHJ1ZTticmVha319ZWxzZXtpZihGLmZpbHRlcihaLFtUXSkubGVuZ3RoPjApe1g9VDticmVha319fVQ9VFtVXX1hZFtXXT1YfX19dmFyIEs9ZG9jdW1lbnQuY29tcGFyZURvY3VtZW50UG9zaXRpb24/ZnVuY3Rpb24oVSxUKXtyZXR1cm4gVS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihUKSYxNn06ZnVuY3Rpb24oVSxUKXtyZXR1cm4gVSE9PVQmJihVLmNvbnRhaW5zP1UuY29udGFpbnMoVCk6dHJ1ZSl9O3ZhciBRPWZ1bmN0aW9uKFQpe3JldHVybiBULm5vZGVUeXBlPT09OSYmVC5kb2N1bWVudEVsZW1lbnQubm9kZU5hbWUhPT0iSFRNTCJ8fCEhVC5vd25lckRvY3VtZW50JiZRKFQub3duZXJEb2N1bWVudCl9O3ZhciBKPWZ1bmN0aW9uKFQsYWEpe3ZhciBXPVtdLFg9IiIsWSxWPWFhLm5vZGVUeXBlP1thYV06YWE7d2hpbGUoKFk9SS5tYXRjaC5QU0VVRE8uZXhlYyhUKSkpe1grPVlbMF07VD1ULnJlcGxhY2UoSS5tYXRjaC5QU0VVRE8sIiIpfVQ9SS5yZWxhdGl2ZVtUXT9UKyIqIjpUO2Zvcih2YXIgWj0wLFU9Vi5sZW5ndGg7WjxVO1orKyl7RihULFZbWl0sVyl9cmV0dXJuIEYuZmlsdGVyKFgsVyl9O28uZmluZD1GO28uZmlsdGVyPUYuZmlsdGVyO28uZXhwcj1GLnNlbGVjdG9ycztvLmV4cHJbIjoiXT1vLmV4cHIuZmlsdGVycztGLnNlbGVjdG9ycy5maWx0ZXJzLmhpZGRlbj1mdW5jdGlvbihUKXtyZXR1cm4gVC5vZmZzZXRXaWR0aD09PTB8fFQub2Zmc2V0SGVpZ2h0PT09MH07Ri5zZWxlY3RvcnMuZmlsdGVycy52aXNpYmxlPWZ1bmN0aW9uKFQpe3JldHVybiBULm9mZnNldFdpZHRoPjB8fFQub2Zmc2V0SGVpZ2h0PjB9O0Yuc2VsZWN0b3JzLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oVCl7cmV0dXJuIG8uZ3JlcChvLnRpbWVycyxmdW5jdGlvbihVKXtyZXR1cm4gVD09PVUuZWxlbX0pLmxlbmd0aH07by5tdWx0aUZpbHRlcj1mdW5jdGlvbihWLFQsVSl7aWYoVSl7Vj0iOm5vdCgiK1YrIikifXJldHVybiBGLm1hdGNoZXMoVixUKX07by5kaXI9ZnVuY3Rpb24oVixVKXt2YXIgVD1bXSxXPVZbVV07d2hpbGUoVyYmVyE9ZG9jdW1lbnQpe2lmKFcubm9kZVR5cGU9PTEpe1QucHVzaChXKX1XPVdbVV19cmV0dXJuIFR9O28ubnRoPWZ1bmN0aW9uKFgsVCxWLFcpe1Q9VHx8MTt2YXIgVT0wO2Zvcig7WDtYPVhbVl0pe2lmKFgubm9kZVR5cGU9PTEmJisrVT09VCl7YnJlYWt9fXJldHVybiBYfTtvLnNpYmxpbmc9ZnVuY3Rpb24oVixVKXt2YXIgVD1bXTtmb3IoO1Y7Vj1WLm5leHRTaWJsaW5nKXtpZihWLm5vZGVUeXBlPT0xJiZWIT1VKXtULnB1c2goVil9fXJldHVybiBUfTtsLlNpenpsZT1GfSkoKTtvLmV2ZW50PXthZGQ6ZnVuY3Rpb24oSSxGLEgsSyl7aWYoSS5ub2RlVHlwZT09M3x8SS5ub2RlVHlwZT09OCl7cmV0dXJufWlmKEkuc2V0SW50ZXJ2YWwmJkkhPWwpe0k9bH1pZighSC5ndWlkKXtILmd1aWQ9dGhpcy5ndWlkKyt9aWYoSyE9PWcpe3ZhciBHPUg7SD10aGlzLnByb3h5KEcpO0guZGF0YT1LfXZhciBFPW8uZGF0YShJLCJldmVudHMiKXx8by5kYXRhKEksImV2ZW50cyIse30pLEo9by5kYXRhKEksImhhbmRsZSIpfHxvLmRhdGEoSSwiaGFuZGxlIixmdW5jdGlvbigpe3JldHVybiB0eXBlb2YgbyE9PSJ1bmRlZmluZWQiJiYhby5ldmVudC50cmlnZ2VyZWQ/by5ldmVudC5oYW5kbGUuYXBwbHkoYXJndW1lbnRzLmNhbGxlZS5lbGVtLGFyZ3VtZW50cyk6Z30pO0ouZWxlbT1JO28uZWFjaChGLnNwbGl0KC9ccysvKSxmdW5jdGlvbihNLE4pe3ZhciBPPU4uc3BsaXQoIi4iKTtOPU8uc2hpZnQoKTtILnR5cGU9Ty5zbGljZSgpLnNvcnQoKS5qb2luKCIuIik7dmFyIEw9RVtOXTtpZihvLmV2ZW50LnNwZWNpYWxBbGxbTl0pe28uZXZlbnQuc3BlY2lhbEFsbFtOXS5zZXR1cC5jYWxsKEksSyxPKX1pZighTCl7TD1FW05dPXt9O2lmKCFvLmV2ZW50LnNwZWNpYWxbTl18fG8uZXZlbnQuc3BlY2lhbFtOXS5zZXR1cC5jYWxsKEksSyxPKT09PWZhbHNlKXtpZihJLmFkZEV2ZW50TGlzdGVuZXIpe0kuYWRkRXZlbnRMaXN0ZW5lcihOLEosZmFsc2UpfWVsc2V7aWYoSS5hdHRhY2hFdmVudCl7SS5hdHRhY2hFdmVudCgib24iK04sSil9fX19TFtILmd1aWRdPUg7by5ldmVudC5nbG9iYWxbTl09dHJ1ZX0pO0k9bnVsbH0sZ3VpZDoxLGdsb2JhbDp7fSxyZW1vdmU6ZnVuY3Rpb24oSyxILEope2lmKEsubm9kZVR5cGU9PTN8fEsubm9kZVR5cGU9PTgpe3JldHVybn12YXIgRz1vLmRhdGEoSywiZXZlbnRzIiksRixFO2lmKEcpe2lmKEg9PT1nfHwodHlwZW9mIEg9PT0ic3RyaW5nIiYmSC5jaGFyQXQoMCk9PSIuIikpe2Zvcih2YXIgSSBpbiBHKXt0aGlzLnJlbW92ZShLLEkrKEh8fCIiKSl9fWVsc2V7aWYoSC50eXBlKXtKPUguaGFuZGxlcjtIPUgudHlwZX1vLmVhY2goSC5zcGxpdCgvXHMrLyksZnVuY3Rpb24oTSxPKXt2YXIgUT1PLnNwbGl0KCIuIik7Tz1RLnNoaWZ0KCk7dmFyIE49UmVnRXhwKCIoXnxcXC4pIitRLnNsaWNlKCkuc29ydCgpLmpvaW4oIi4qXFwuIikrIihcXC58JCkiKTtpZihHW09dKXtpZihKKXtkZWxldGUgR1tPXVtKLmd1aWRdfWVsc2V7Zm9yKHZhciBQIGluIEdbT10pe2lmKE4udGVzdChHW09dW1BdLnR5cGUpKXtkZWxldGUgR1tPXVtQXX19fWlmKG8uZXZlbnQuc3BlY2lhbEFsbFtPXSl7by5ldmVudC5zcGVjaWFsQWxsW09dLnRlYXJkb3duLmNhbGwoSyxRKX1mb3IoRiBpbiBHW09dKXticmVha31pZighRil7aWYoIW8uZXZlbnQuc3BlY2lhbFtPXXx8by5ldmVudC5zcGVjaWFsW09dLnRlYXJkb3duLmNhbGwoSyxRKT09PWZhbHNlKXtpZihLLnJlbW92ZUV2ZW50TGlzdGVuZXIpe0sucmVtb3ZlRXZlbnRMaXN0ZW5lcihPLG8uZGF0YShLLCJoYW5kbGUiKSxmYWxzZSl9ZWxzZXtpZihLLmRldGFjaEV2ZW50KXtLLmRldGFjaEV2ZW50KCJvbiIrTyxvLmRhdGEoSywiaGFuZGxlIikpfX19Rj1udWxsO2RlbGV0ZSBHW09dfX19KX1mb3IoRiBpbiBHKXticmVha31pZighRil7dmFyIEw9by5kYXRhKEssImhhbmRsZSIpO2lmKEwpe0wuZWxlbT1udWxsfW8ucmVtb3ZlRGF0YShLLCJldmVudHMiKTtvLnJlbW92ZURhdGEoSywiaGFuZGxlIil9fX0sdHJpZ2dlcjpmdW5jdGlvbihJLEssSCxFKXt2YXIgRz1JLnR5cGV8fEk7aWYoIUUpe0k9dHlwZW9mIEk9PT0ib2JqZWN0Ij9JW2hdP0k6by5leHRlbmQoby5FdmVudChHKSxJKTpvLkV2ZW50KEcpO2lmKEcuaW5kZXhPZigiISIpPj0wKXtJLnR5cGU9Rz1HLnNsaWNlKDAsLTEpO0kuZXhjbHVzaXZlPXRydWV9aWYoIUgpe0kuc3RvcFByb3BhZ2F0aW9uKCk7aWYodGhpcy5nbG9iYWxbR10pe28uZWFjaChvLmNhY2hlLGZ1bmN0aW9uKCl7aWYodGhpcy5ldmVudHMmJnRoaXMuZXZlbnRzW0ddKXtvLmV2ZW50LnRyaWdnZXIoSSxLLHRoaXMuaGFuZGxlLmVsZW0pfX0pfX1pZighSHx8SC5ub2RlVHlwZT09M3x8SC5ub2RlVHlwZT09OCl7cmV0dXJuIGd9SS5yZXN1bHQ9ZztJLnRhcmdldD1IO0s9by5tYWtlQXJyYXkoSyk7Sy51bnNoaWZ0KEkpfUkuY3VycmVudFRhcmdldD1IO3ZhciBKPW8uZGF0YShILCJoYW5kbGUiKTtpZihKKXtKLmFwcGx5KEgsSyl9aWYoKCFIW0ddfHwoby5ub2RlTmFtZShILCJhIikmJkc9PSJjbGljayIpKSYmSFsib24iK0ddJiZIWyJvbiIrR10uYXBwbHkoSCxLKT09PWZhbHNlKXtJLnJlc3VsdD1mYWxzZX1pZighRSYmSFtHXSYmIUkuaXNEZWZhdWx0UHJldmVudGVkKCkmJiEoby5ub2RlTmFtZShILCJhIikmJkc9PSJjbGljayIpKXt0aGlzLnRyaWdnZXJlZD10cnVlO3RyeXtIW0ddKCl9Y2F0Y2goTCl7fX10aGlzLnRyaWdnZXJlZD1mYWxzZTtpZighSS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXt2YXIgRj1ILnBhcmVudE5vZGV8fEgub3duZXJEb2N1bWVudDtpZihGKXtvLmV2ZW50LnRyaWdnZXIoSSxLLEYsdHJ1ZSl9fX0saGFuZGxlOmZ1bmN0aW9uKEspe3ZhciBKLEU7Sz1hcmd1bWVudHNbMF09by5ldmVudC5maXgoS3x8bC5ldmVudCk7Sy5jdXJyZW50VGFyZ2V0PXRoaXM7dmFyIEw9Sy50eXBlLnNwbGl0KCIuIik7Sy50eXBlPUwuc2hpZnQoKTtKPSFMLmxlbmd0aCYmIUsuZXhjbHVzaXZlO3ZhciBJPVJlZ0V4cCgiKF58XFwuKSIrTC5zbGljZSgpLnNvcnQoKS5qb2luKCIuKlxcLiIpKyIoXFwufCQpIik7RT0oby5kYXRhKHRoaXMsImV2ZW50cyIpfHx7fSlbSy50eXBlXTtmb3IodmFyIEcgaW4gRSl7dmFyIEg9RVtHXTtpZihKfHxJLnRlc3QoSC50eXBlKSl7Sy5oYW5kbGVyPUg7Sy5kYXRhPUguZGF0YTt2YXIgRj1ILmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihGIT09Zyl7Sy5yZXN1bHQ9RjtpZihGPT09ZmFsc2Upe0sucHJldmVudERlZmF1bHQoKTtLLnN0b3BQcm9wYWdhdGlvbigpfX1pZihLLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpe2JyZWFrfX19fSxwcm9wczoiYWx0S2V5IGF0dHJDaGFuZ2UgYXR0ck5hbWUgYnViYmxlcyBidXR0b24gY2FuY2VsYWJsZSBjaGFyQ29kZSBjbGllbnRYIGNsaWVudFkgY3RybEtleSBjdXJyZW50VGFyZ2V0IGRhdGEgZGV0YWlsIGV2ZW50UGhhc2UgZnJvbUVsZW1lbnQgaGFuZGxlciBrZXlDb2RlIG1ldGFLZXkgbmV3VmFsdWUgb3JpZ2luYWxUYXJnZXQgcGFnZVggcGFnZVkgcHJldlZhbHVlIHJlbGF0ZWROb2RlIHJlbGF0ZWRUYXJnZXQgc2NyZWVuWCBzY3JlZW5ZIHNoaWZ0S2V5IHNyY0VsZW1lbnQgdGFyZ2V0IHRvRWxlbWVudCB2aWV3IHdoZWVsRGVsdGEgd2hpY2giLnNwbGl0KCIgIiksZml4OmZ1bmN0aW9uKEgpe2lmKEhbaF0pe3JldHVybiBIfXZhciBGPUg7SD1vLkV2ZW50KEYpO2Zvcih2YXIgRz10aGlzLnByb3BzLmxlbmd0aCxKO0c7KXtKPXRoaXMucHJvcHNbLS1HXTtIW0pdPUZbSl19aWYoIUgudGFyZ2V0KXtILnRhcmdldD1ILnNyY0VsZW1lbnR8fGRvY3VtZW50fWlmKEgudGFyZ2V0Lm5vZGVUeXBlPT0zKXtILnRhcmdldD1ILnRhcmdldC5wYXJlbnROb2RlfWlmKCFILnJlbGF0ZWRUYXJnZXQmJkguZnJvbUVsZW1lbnQpe0gucmVsYXRlZFRhcmdldD1ILmZyb21FbGVtZW50PT1ILnRhcmdldD9ILnRvRWxlbWVudDpILmZyb21FbGVtZW50fWlmKEgucGFnZVg9PW51bGwmJkguY2xpZW50WCE9bnVsbCl7dmFyIEk9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LEU9ZG9jdW1lbnQuYm9keTtILnBhZ2VYPUguY2xpZW50WCsoSSYmSS5zY3JvbGxMZWZ0fHxFJiZFLnNjcm9sbExlZnR8fDApLShJLmNsaWVudExlZnR8fDApO0gucGFnZVk9SC5jbGllbnRZKyhJJiZJLnNjcm9sbFRvcHx8RSYmRS5zY3JvbGxUb3B8fDApLShJLmNsaWVudFRvcHx8MCl9aWYoIUgud2hpY2gmJigoSC5jaGFyQ29kZXx8SC5jaGFyQ29kZT09PTApP0guY2hhckNvZGU6SC5rZXlDb2RlKSl7SC53aGljaD1ILmNoYXJDb2RlfHxILmtleUNvZGV9aWYoIUgubWV0YUtleSYmSC5jdHJsS2V5KXtILm1ldGFLZXk9SC5jdHJsS2V5fWlmKCFILndoaWNoJiZILmJ1dHRvbil7SC53aGljaD0oSC5idXR0b24mMT8xOihILmJ1dHRvbiYyPzM6KEguYnV0dG9uJjQ/MjowKSkpfXJldHVybiBIfSxwcm94eTpmdW5jdGlvbihGLEUpe0U9RXx8ZnVuY3Rpb24oKXtyZXR1cm4gRi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O0UuZ3VpZD1GLmd1aWQ9Ri5ndWlkfHxFLmd1aWR8fHRoaXMuZ3VpZCsrO3JldHVybiBFfSxzcGVjaWFsOntyZWFkeTp7c2V0dXA6Qix0ZWFyZG93bjpmdW5jdGlvbigpe319fSxzcGVjaWFsQWxsOntsaXZlOntzZXR1cDpmdW5jdGlvbihFLEYpe28uZXZlbnQuYWRkKHRoaXMsRlswXSxjKX0sdGVhcmRvd246ZnVuY3Rpb24oRyl7aWYoRy5sZW5ndGgpe3ZhciBFPTAsRj1SZWdFeHAoIihefFxcLikiK0dbMF0rIihcXC58JCkiKTtvLmVhY2goKG8uZGF0YSh0aGlzLCJldmVudHMiKS5saXZlfHx7fSksZnVuY3Rpb24oKXtpZihGLnRlc3QodGhpcy50eXBlKSl7RSsrfX0pO2lmKEU8MSl7by5ldmVudC5yZW1vdmUodGhpcyxHWzBdLGMpfX19fX19O28uRXZlbnQ9ZnVuY3Rpb24oRSl7aWYoIXRoaXMucHJldmVudERlZmF1bHQpe3JldHVybiBuZXcgby5FdmVudChFKX1pZihFJiZFLnR5cGUpe3RoaXMub3JpZ2luYWxFdmVudD1FO3RoaXMudHlwZT1FLnR5cGV9ZWxzZXt0aGlzLnR5cGU9RX10aGlzLnRpbWVTdGFtcD1lKCk7dGhpc1toXT10cnVlfTtmdW5jdGlvbiBrKCl7cmV0dXJuIGZhbHNlfWZ1bmN0aW9uIHUoKXtyZXR1cm4gdHJ1ZX1vLkV2ZW50LnByb3RvdHlwZT17cHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD11O3ZhciBFPXRoaXMub3JpZ2luYWxFdmVudDtpZighRSl7cmV0dXJufWlmKEUucHJldmVudERlZmF1bHQpe0UucHJldmVudERlZmF1bHQoKX1FLnJldHVyblZhbHVlPWZhbHNlfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPXU7dmFyIEU9dGhpcy5vcmlnaW5hbEV2ZW50O2lmKCFFKXtyZXR1cm59aWYoRS5zdG9wUHJvcGFnYXRpb24pe0Uuc3RvcFByb3BhZ2F0aW9uKCl9RS5jYW5jZWxCdWJibGU9dHJ1ZX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD11O3RoaXMuc3RvcFByb3BhZ2F0aW9uKCl9LGlzRGVmYXVsdFByZXZlbnRlZDprLGlzUHJvcGFnYXRpb25TdG9wcGVkOmssaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6a307dmFyIGE9ZnVuY3Rpb24oRil7dmFyIEU9Ri5yZWxhdGVkVGFyZ2V0O3doaWxlKEUmJkUhPXRoaXMpe3RyeXtFPUUucGFyZW50Tm9kZX1jYXRjaChHKXtFPXRoaXN9fWlmKEUhPXRoaXMpe0YudHlwZT1GLmRhdGE7by5ldmVudC5oYW5kbGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfX07by5lYWNoKHttb3VzZW92ZXI6Im1vdXNlZW50ZXIiLG1vdXNlb3V0OiJtb3VzZWxlYXZlIn0sZnVuY3Rpb24oRixFKXtvLmV2ZW50LnNwZWNpYWxbRV09e3NldHVwOmZ1bmN0aW9uKCl7by5ldmVudC5hZGQodGhpcyxGLGEsRSl9LHRlYXJkb3duOmZ1bmN0aW9uKCl7by5ldmVudC5yZW1vdmUodGhpcyxGLGEpfX19KTtvLmZuLmV4dGVuZCh7YmluZDpmdW5jdGlvbihGLEcsRSl7cmV0dXJuIEY9PSJ1bmxvYWQiP3RoaXMub25lKEYsRyxFKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtvLmV2ZW50LmFkZCh0aGlzLEYsRXx8RyxFJiZHKX0pfSxvbmU6ZnVuY3Rpb24oRyxILEYpe3ZhciBFPW8uZXZlbnQucHJveHkoRnx8SCxmdW5jdGlvbihJKXtvKHRoaXMpLnVuYmluZChJLEUpO3JldHVybihGfHxIKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7by5ldmVudC5hZGQodGhpcyxHLEUsRiYmSCl9KX0sdW5iaW5kOmZ1bmN0aW9uKEYsRSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe28uZXZlbnQucmVtb3ZlKHRoaXMsRixFKX0pfSx0cmlnZ2VyOmZ1bmN0aW9uKEUsRil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe28uZXZlbnQudHJpZ2dlcihFLEYsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oRSxHKXtpZih0aGlzWzBdKXt2YXIgRj1vLkV2ZW50KEUpO0YucHJldmVudERlZmF1bHQoKTtGLnN0b3BQcm9wYWdhdGlvbigpO28uZXZlbnQudHJpZ2dlcihGLEcsdGhpc1swXSk7cmV0dXJuIEYucmVzdWx0fX0sdG9nZ2xlOmZ1bmN0aW9uKEcpe3ZhciBFPWFyZ3VtZW50cyxGPTE7d2hpbGUoRjxFLmxlbmd0aCl7by5ldmVudC5wcm94eShHLEVbRisrXSl9cmV0dXJuIHRoaXMuY2xpY2soby5ldmVudC5wcm94eShHLGZ1bmN0aW9uKEgpe3RoaXMubGFzdFRvZ2dsZT0odGhpcy5sYXN0VG9nZ2xlfHwwKSVGO0gucHJldmVudERlZmF1bHQoKTtyZXR1cm4gRVt0aGlzLmxhc3RUb2dnbGUrK10uYXBwbHkodGhpcyxhcmd1bWVudHMpfHxmYWxzZX0pKX0saG92ZXI6ZnVuY3Rpb24oRSxGKXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKEUpLm1vdXNlbGVhdmUoRil9LHJlYWR5OmZ1bmN0aW9uKEUpe0IoKTtpZihvLmlzUmVhZHkpe0UuY2FsbChkb2N1bWVudCxvKX1lbHNle28ucmVhZHlMaXN0LnB1c2goRSl9cmV0dXJuIHRoaXN9LGxpdmU6ZnVuY3Rpb24oRyxGKXt2YXIgRT1vLmV2ZW50LnByb3h5KEYpO0UuZ3VpZCs9dGhpcy5zZWxlY3RvcitHO28oZG9jdW1lbnQpLmJpbmQoaShHLHRoaXMuc2VsZWN0b3IpLHRoaXMuc2VsZWN0b3IsRSk7cmV0dXJuIHRoaXN9LGRpZTpmdW5jdGlvbihGLEUpe28oZG9jdW1lbnQpLnVuYmluZChpKEYsdGhpcy5zZWxlY3RvciksRT97Z3VpZDpFLmd1aWQrdGhpcy5zZWxlY3RvcitGfTpudWxsKTtyZXR1cm4gdGhpc319KTtmdW5jdGlvbiBjKEgpe3ZhciBFPVJlZ0V4cCgiKF58XFwuKSIrSC50eXBlKyIoXFwufCQpIiksRz10cnVlLEY9W107by5lYWNoKG8uZGF0YSh0aGlzLCJldmVudHMiKS5saXZlfHxbXSxmdW5jdGlvbihJLEope2lmKEUudGVzdChKLnR5cGUpKXt2YXIgSz1vKEgudGFyZ2V0KS5jbG9zZXN0KEouZGF0YSlbMF07aWYoSyl7Ri5wdXNoKHtlbGVtOkssZm46Sn0pfX19KTtGLnNvcnQoZnVuY3Rpb24oSixJKXtyZXR1cm4gby5kYXRhKEouZWxlbSwiY2xvc2VzdCIpLW8uZGF0YShJLmVsZW0sImNsb3Nlc3QiKX0pO28uZWFjaChGLGZ1bmN0aW9uKCl7aWYodGhpcy5mbi5jYWxsKHRoaXMuZWxlbSxILHRoaXMuZm4uZGF0YSk9PT1mYWxzZSl7cmV0dXJuKEc9ZmFsc2UpfX0pO3JldHVybiBHfWZ1bmN0aW9uIGkoRixFKXtyZXR1cm5bImxpdmUiLEYsRS5yZXBsYWNlKC9cLi9nLCJgIikucmVwbGFjZSgvIC9nLCJ8IildLmpvaW4oIi4iKX1vLmV4dGVuZCh7aXNSZWFkeTpmYWxzZSxyZWFkeUxpc3Q6W10scmVhZHk6ZnVuY3Rpb24oKXtpZighby5pc1JlYWR5KXtvLmlzUmVhZHk9dHJ1ZTtpZihvLnJlYWR5TGlzdCl7by5lYWNoKG8ucmVhZHlMaXN0LGZ1bmN0aW9uKCl7dGhpcy5jYWxsKGRvY3VtZW50LG8pfSk7by5yZWFkeUxpc3Q9bnVsbH1vKGRvY3VtZW50KS50cmlnZ2VySGFuZGxlcigicmVhZHkiKX19fSk7dmFyIHg9ZmFsc2U7ZnVuY3Rpb24gQigpe2lmKHgpe3JldHVybn14PXRydWU7aWYoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcil7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsZnVuY3Rpb24oKXtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixhcmd1bWVudHMuY2FsbGVlLGZhbHNlKTtvLnJlYWR5KCl9LGZhbHNlKX1lbHNle2lmKGRvY3VtZW50LmF0dGFjaEV2ZW50KXtkb2N1bWVudC5hdHRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIixmdW5jdGlvbigpe2lmKGRvY3VtZW50LnJlYWR5U3RhdGU9PT0iY29tcGxldGUiKXtkb2N1bWVudC5kZXRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIixhcmd1bWVudHMuY2FsbGVlKTtvLnJlYWR5KCl9fSk7aWYoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsJiZsPT1sLnRvcCl7KGZ1bmN0aW9uKCl7aWYoby5pc1JlYWR5KXtyZXR1cm59dHJ5e2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCgibGVmdCIpfWNhdGNoKEUpe3NldFRpbWVvdXQoYXJndW1lbnRzLmNhbGxlZSwwKTtyZXR1cm59by5yZWFkeSgpfSkoKX19fW8uZXZlbnQuYWRkKGwsImxvYWQiLG8ucmVhZHkpfW8uZWFjaCgoImJsdXIsZm9jdXMsbG9hZCxyZXNpemUsc2Nyb2xsLHVubG9hZCxjbGljayxkYmxjbGljayxtb3VzZWRvd24sbW91c2V1cCxtb3VzZW1vdmUsbW91c2VvdmVyLG1vdXNlb3V0LG1vdXNlZW50ZXIsbW91c2VsZWF2ZSxjaGFuZ2Usc2VsZWN0LHN1Ym1pdCxrZXlkb3duLGtleXByZXNzLGtleXVwLGVycm9yIikuc3BsaXQoIiwiKSxmdW5jdGlvbihGLEUpe28uZm5bRV09ZnVuY3Rpb24oRyl7cmV0dXJuIEc/dGhpcy5iaW5kKEUsRyk6dGhpcy50cmlnZ2VyKEUpfX0pO28obCkuYmluZCgidW5sb2FkIixmdW5jdGlvbigpe2Zvcih2YXIgRSBpbiBvLmNhY2hlKXtpZihFIT0xJiZvLmNhY2hlW0VdLmhhbmRsZSl7by5ldmVudC5yZW1vdmUoby5jYWNoZVtFXS5oYW5kbGUuZWxlbSl9fX0pOyhmdW5jdGlvbigpe28uc3VwcG9ydD17fTt2YXIgRj1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsRz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKSxLPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLEo9InNjcmlwdCIrKG5ldyBEYXRlKS5nZXRUaW1lKCk7Sy5zdHlsZS5kaXNwbGF5PSJub25lIjtLLmlubmVySFRNTD0nICAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9Ii9hIiBzdHlsZT0iY29sb3I6cmVkO2Zsb2F0OmxlZnQ7b3BhY2l0eTouNTsiPmE8L2E+PHNlbGVjdD48b3B0aW9uPnRleHQ8L29wdGlvbj48L3NlbGVjdD48b2JqZWN0PjxwYXJhbS8+PC9vYmplY3Q+Jzt2YXIgSD1LLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIiksRT1LLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJhIilbMF07aWYoIUh8fCFILmxlbmd0aHx8IUUpe3JldHVybn1vLnN1cHBvcnQ9e2xlYWRpbmdXaGl0ZXNwYWNlOksuZmlyc3RDaGlsZC5ub2RlVHlwZT09Myx0Ym9keTohSy5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGJvZHkiKS5sZW5ndGgsb2JqZWN0QWxsOiEhSy5nZXRFbGVtZW50c0J5VGFnTmFtZSgib2JqZWN0IilbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoIioiKS5sZW5ndGgsaHRtbFNlcmlhbGl6ZTohIUsuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImxpbmsiKS5sZW5ndGgsc3R5bGU6L3JlZC8udGVzdChFLmdldEF0dHJpYnV0ZSgic3R5bGUiKSksaHJlZk5vcm1hbGl6ZWQ6RS5nZXRBdHRyaWJ1dGUoImhyZWYiKT09PSIvYSIsb3BhY2l0eTpFLnN0eWxlLm9wYWNpdHk9PT0iMC41Iixjc3NGbG9hdDohIUUuc3R5bGUuY3NzRmxvYXQsc2NyaXB0RXZhbDpmYWxzZSxub0Nsb25lRXZlbnQ6dHJ1ZSxib3hNb2RlbDpudWxsfTtHLnR5cGU9InRleHQvamF2YXNjcmlwdCI7dHJ5e0cuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIndpbmRvdy4iK0orIj0xOyIpKX1jYXRjaChJKXt9cmV0dXJuO28uc3VwcG9ydC5zY3JpcHRFdmFsPWZhbHNlO2lmKEsuYXR0YWNoRXZlbnQmJksuZmlyZUV2ZW50KXtLLmF0dGFjaEV2ZW50KCJvbmNsaWNrIixmdW5jdGlvbigpe28uc3VwcG9ydC5ub0Nsb25lRXZlbnQ9ZmFsc2U7Sy5kZXRhY2hFdmVudCgib25jbGljayIsYXJndW1lbnRzLmNhbGxlZSl9KTtLLmNsb25lTm9kZSh0cnVlKS5maXJlRXZlbnQoIm9uY2xpY2siKX1vKGZ1bmN0aW9uKCl7dmFyIEw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7TC5zdHlsZS53aWR0aD1MLnN0eWxlLnBhZGRpbmdMZWZ0PSIxcHgiO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoTCk7by5ib3hNb2RlbD1vLnN1cHBvcnQuYm94TW9kZWw9TC5vZmZzZXRXaWR0aD09PTI7ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChMKS5zdHlsZS5kaXNwbGF5PSJub25lIn0pfSkoKTt2YXIgdz1vLnN1cHBvcnQuY3NzRmxvYXQ/ImNzc0Zsb2F0Ijoic3R5bGVGbG9hdCI7by5wcm9wcz17ImZvciI6Imh0bWxGb3IiLCJjbGFzcyI6ImNsYXNzTmFtZSIsImZsb2F0Ijp3LGNzc0Zsb2F0Oncsc3R5bGVGbG9hdDp3LHJlYWRvbmx5OiJyZWFkT25seSIsbWF4bGVuZ3RoOiJtYXhMZW5ndGgiLGNlbGxzcGFjaW5nOiJjZWxsU3BhY2luZyIscm93c3Bhbjoicm93U3BhbiIsdGFiaW5kZXg6InRhYkluZGV4In07by5mbi5leHRlbmQoe19sb2FkOm8uZm4ubG9hZCxsb2FkOmZ1bmN0aW9uKEcsSixLKXtpZih0eXBlb2YgRyE9PSJzdHJpbmciKXtyZXR1cm4gdGhpcy5fbG9hZChHKX12YXIgST1HLmluZGV4T2YoIiAiKTtpZihJPj0wKXt2YXIgRT1HLnNsaWNlKEksRy5sZW5ndGgpO0c9Ry5zbGljZSgwLEkpfXZhciBIPSJHRVQiO2lmKEope2lmKG8uaXNGdW5jdGlvbihKKSl7Sz1KO0o9bnVsbH1lbHNle2lmKHR5cGVvZiBKPT09Im9iamVjdCIpe0o9by5wYXJhbShKKTtIPSJQT1NUIn19fXZhciBGPXRoaXM7by5hamF4KHt1cmw6Ryx0eXBlOkgsZGF0YVR5cGU6Imh0bWwiLGRhdGE6Sixjb21wbGV0ZTpmdW5jdGlvbihNLEwpe2lmKEw9PSJzdWNjZXNzInx8TD09Im5vdG1vZGlmaWVkIil7Ri5odG1sKEU/bygiPGRpdi8+IikuYXBwZW5kKE0ucmVzcG9uc2VUZXh0LnJlcGxhY2UoLzxzY3JpcHQoLnxccykqP1wvc2NyaXB0Pi9nLCIiKSkuZmluZChFKTpNLnJlc3BvbnNlVGV4dCl9aWYoSyl7Ri5lYWNoKEssW00ucmVzcG9uc2VUZXh0LEwsTV0pfX19KTtyZXR1cm4gdGhpc30sc2VyaWFsaXplOmZ1bmN0aW9uKCl7cmV0dXJuIG8ucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKX0sc2VyaWFsaXplQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50cz9vLm1ha2VBcnJheSh0aGlzLmVsZW1lbnRzKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZSYmIXRoaXMuZGlzYWJsZWQmJih0aGlzLmNoZWNrZWR8fC9zZWxlY3R8dGV4dGFyZWEvaS50ZXN0KHRoaXMubm9kZU5hbWUpfHwvdGV4dHxoaWRkZW58cGFzc3dvcmR8c2VhcmNoL2kudGVzdCh0aGlzLnR5cGUpKX0pLm1hcChmdW5jdGlvbihFLEYpe3ZhciBHPW8odGhpcykudmFsKCk7cmV0dXJuIEc9PW51bGw/bnVsbDpvLmlzQXJyYXkoRyk/by5tYXAoRyxmdW5jdGlvbihJLEgpe3JldHVybntuYW1lOkYubmFtZSx2YWx1ZTpJfX0pOntuYW1lOkYubmFtZSx2YWx1ZTpHfX0pLmdldCgpfX0pO28uZWFjaCgiYWpheFN0YXJ0LGFqYXhTdG9wLGFqYXhDb21wbGV0ZSxhamF4RXJyb3IsYWpheFN1Y2Nlc3MsYWpheFNlbmQiLnNwbGl0KCIsIiksZnVuY3Rpb24oRSxGKXtvLmZuW0ZdPWZ1bmN0aW9uKEcpe3JldHVybiB0aGlzLmJpbmQoRixHKX19KTt2YXIgcj1lKCk7by5leHRlbmQoe2dldDpmdW5jdGlvbihFLEcsSCxGKXtpZihvLmlzRnVuY3Rpb24oRykpe0g9RztHPW51bGx9cmV0dXJuIG8uYWpheCh7dHlwZToiR0VUIix1cmw6RSxkYXRhOkcsc3VjY2VzczpILGRhdGFUeXBlOkZ9KX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKEUsRil7cmV0dXJuIG8uZ2V0KEUsbnVsbCxGLCJzY3JpcHQiKX0sZ2V0SlNPTjpmdW5jdGlvbihFLEYsRyl7cmV0dXJuIG8uZ2V0KEUsRixHLCJqc29uIil9LHBvc3Q6ZnVuY3Rpb24oRSxHLEgsRil7aWYoby5pc0Z1bmN0aW9uKEcpKXtIPUc7Rz17fX1yZXR1cm4gby5hamF4KHt0eXBlOiJQT1NUIix1cmw6RSxkYXRhOkcsc3VjY2VzczpILGRhdGFUeXBlOkZ9KX0sYWpheFNldHVwOmZ1bmN0aW9uKEUpe28uZXh0ZW5kKG8uYWpheFNldHRpbmdzLEUpfSxhamF4U2V0dGluZ3M6e3VybDpsb2NhdGlvbi5ocmVmLGdsb2JhbDp0cnVlLHR5cGU6IkdFVCIsY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIscHJvY2Vzc0RhdGE6dHJ1ZSxhc3luYzp0cnVlLHhocjpmdW5jdGlvbigpe3JldHVybiBsLkFjdGl2ZVhPYmplY3Q/bmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIik6bmV3IFhNTEh0dHBSZXF1ZXN0KCl9LGFjY2VwdHM6e3htbDoiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbCIsaHRtbDoidGV4dC9odG1sIixzY3JpcHQ6InRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCIsanNvbjoiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0Iix0ZXh0OiJ0ZXh0L3BsYWluIixfZGVmYXVsdDoiKi8qIn19LGxhc3RNb2RpZmllZDp7fSxhamF4OmZ1bmN0aW9uKE0pe009by5leHRlbmQodHJ1ZSxNLG8uZXh0ZW5kKHRydWUse30sby5hamF4U2V0dGluZ3MsTSkpO3ZhciBXLEY9Lz1cPygmfCQpL2csUixWLEc9TS50eXBlLnRvVXBwZXJDYXNlKCk7aWYoTS5kYXRhJiZNLnByb2Nlc3NEYXRhJiZ0eXBlb2YgTS5kYXRhIT09InN0cmluZyIpe00uZGF0YT1vLnBhcmFtKE0uZGF0YSl9aWYoTS5kYXRhVHlwZT09Impzb25wIil7aWYoRz09IkdFVCIpe2lmKCFNLnVybC5tYXRjaChGKSl7TS51cmwrPShNLnVybC5tYXRjaCgvXD8vKT8iJiI6Ij8iKSsoTS5qc29ucHx8ImNhbGxiYWNrIikrIj0/In19ZWxzZXtpZighTS5kYXRhfHwhTS5kYXRhLm1hdGNoKEYpKXtNLmRhdGE9KE0uZGF0YT9NLmRhdGErIiYiOiIiKSsoTS5qc29ucHx8ImNhbGxiYWNrIikrIj0/In19TS5kYXRhVHlwZT0ianNvbiJ9aWYoTS5kYXRhVHlwZT09Impzb24iJiYoTS5kYXRhJiZNLmRhdGEubWF0Y2goRil8fE0udXJsLm1hdGNoKEYpKSl7Vz0ianNvbnAiK3IrKztpZihNLmRhdGEpe00uZGF0YT0oTS5kYXRhKyIiKS5yZXBsYWNlKEYsIj0iK1crIiQxIil9TS51cmw9TS51cmwucmVwbGFjZShGLCI9IitXKyIkMSIpO00uZGF0YVR5cGU9InNjcmlwdCI7bFtXXT1mdW5jdGlvbihYKXtWPVg7SSgpO0woKTtsW1ddPWc7dHJ5e2RlbGV0ZSBsW1ddfWNhdGNoKFkpe31pZihIKXtILnJlbW92ZUNoaWxkKFQpfX19aWYoTS5kYXRhVHlwZT09InNjcmlwdCImJk0uY2FjaGU9PW51bGwpe00uY2FjaGU9ZmFsc2V9aWYoTS5jYWNoZT09PWZhbHNlJiZHPT0iR0VUIil7dmFyIEU9ZSgpO3ZhciBVPU0udXJsLnJlcGxhY2UoLyhcP3wmKV89Lio/KCZ8JCkvLCIkMV89IitFKyIkMiIpO00udXJsPVUrKChVPT1NLnVybCk/KE0udXJsLm1hdGNoKC9cPy8pPyImIjoiPyIpKyJfPSIrRToiIil9aWYoTS5kYXRhJiZHPT0iR0VUIil7TS51cmwrPShNLnVybC5tYXRjaCgvXD8vKT8iJiI6Ij8iKStNLmRhdGE7TS5kYXRhPW51bGx9aWYoTS5nbG9iYWwmJiFvLmFjdGl2ZSsrKXtvLmV2ZW50LnRyaWdnZXIoImFqYXhTdGFydCIpfXZhciBRPS9eKFx3KzopP1wvXC8oW15cLz8jXSspLy5leGVjKE0udXJsKTtpZihNLmRhdGFUeXBlPT0ic2NyaXB0IiYmRz09IkdFVCImJlEmJihRWzFdJiZRWzFdIT1sb2NhdGlvbi5wcm90b2NvbHx8UVsyXSE9bG9jYXRpb24uaG9zdCkpe3ZhciBIPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF07dmFyIFQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7VC5zcmM9TS51cmw7aWYoTS5zY3JpcHRDaGFyc2V0KXtULmNoYXJzZXQ9TS5zY3JpcHRDaGFyc2V0fWlmKCFXKXt2YXIgTz1mYWxzZTtULm9ubG9hZD1ULm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKCFPJiYoIXRoaXMucmVhZHlTdGF0ZXx8dGhpcy5yZWFkeVN0YXRlPT0ibG9hZGVkInx8dGhpcy5yZWFkeVN0YXRlPT0iY29tcGxldGUiKSl7Tz10cnVlO0koKTtMKCk7VC5vbmxvYWQ9VC5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDtILnJlbW92ZUNoaWxkKFQpfX19SC5hcHBlbmRDaGlsZChUKTtyZXR1cm4gZ312YXIgSz1mYWxzZTt2YXIgSj1NLnhocigpO2lmKE0udXNlcm5hbWUpe0oub3BlbihHLE0udXJsLE0uYXN5bmMsTS51c2VybmFtZSxNLnBhc3N3b3JkKX1lbHNle0oub3BlbihHLE0udXJsLE0uYXN5bmMpfXRyeXtpZihNLmRhdGEpe0ouc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIixNLmNvbnRlbnRUeXBlKX1pZihNLmlmTW9kaWZpZWQpe0ouc2V0UmVxdWVzdEhlYWRlcigiSWYtTW9kaWZpZWQtU2luY2UiLG8ubGFzdE1vZGlmaWVkW00udXJsXXx8IlRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UIil9Si5zZXRSZXF1ZXN0SGVhZGVyKCJYLVJlcXVlc3RlZC1XaXRoIiwiWE1MSHR0cFJlcXVlc3QiKTtKLnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIsTS5kYXRhVHlwZSYmTS5hY2NlcHRzW00uZGF0YVR5cGVdP00uYWNjZXB0c1tNLmRhdGFUeXBlXSsiLCAqLyoiOk0uYWNjZXB0cy5fZGVmYXVsdCl9Y2F0Y2goUyl7fWlmKE0uYmVmb3JlU2VuZCYmTS5iZWZvcmVTZW5kKEosTSk9PT1mYWxzZSl7aWYoTS5nbG9iYWwmJiEtLW8uYWN0aXZlKXtvLmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIil9Si5hYm9ydCgpO3JldHVybiBmYWxzZX1pZihNLmdsb2JhbCl7by5ldmVudC50cmlnZ2VyKCJhamF4U2VuZCIsW0osTV0pfXZhciBOPWZ1bmN0aW9uKFgpe2lmKEoucmVhZHlTdGF0ZT09MCl7aWYoUCl7Y2xlYXJJbnRlcnZhbChQKTtQPW51bGw7aWYoTS5nbG9iYWwmJiEtLW8uYWN0aXZlKXtvLmV2ZW50LnRyaWdnZXIoImFqYXhTdG9wIil9fX1lbHNle2lmKCFLJiZKJiYoSi5yZWFkeVN0YXRlPT00fHxYPT0idGltZW91dCIpKXtLPXRydWU7aWYoUCl7Y2xlYXJJbnRlcnZhbChQKTtQPW51bGx9Uj1YPT0idGltZW91dCI/InRpbWVvdXQiOiFvLmh0dHBTdWNjZXNzKEopPyJlcnJvciI6TS5pZk1vZGlmaWVkJiZvLmh0dHBOb3RNb2RpZmllZChKLE0udXJsKT8ibm90bW9kaWZpZWQiOiJzdWNjZXNzIjtpZihSPT0ic3VjY2VzcyIpe3RyeXtWPW8uaHR0cERhdGEoSixNLmRhdGFUeXBlLE0pfWNhdGNoKFope1I9InBhcnNlcmVycm9yIn19aWYoUj09InN1Y2Nlc3MiKXt2YXIgWTt0cnl7WT1KLmdldFJlc3BvbnNlSGVhZGVyKCJMYXN0LU1vZGlmaWVkIil9Y2F0Y2goWil7fWlmKE0uaWZNb2RpZmllZCYmWSl7by5sYXN0TW9kaWZpZWRbTS51cmxdPVl9aWYoIVcpe0koKX19ZWxzZXtvLmhhbmRsZUVycm9yKE0sSixSKX1MKCk7aWYoWCl7Si5hYm9ydCgpfWlmKE0uYXN5bmMpe0o9bnVsbH19fX07aWYoTS5hc3luYyl7dmFyIFA9c2V0SW50ZXJ2YWwoTiwxMyk7aWYoTS50aW1lb3V0PjApe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihKJiYhSyl7TigidGltZW91dCIpfX0sTS50aW1lb3V0KX19dHJ5e0ouc2VuZChNLmRhdGEpfWNhdGNoKFMpe28uaGFuZGxlRXJyb3IoTSxKLG51bGwsUyl9aWYoIU0uYXN5bmMpe04oKX1mdW5jdGlvbiBJKCl7aWYoTS5zdWNjZXNzKXtNLnN1Y2Nlc3MoVixSKX1pZihNLmdsb2JhbCl7by5ldmVudC50cmlnZ2VyKCJhamF4U3VjY2VzcyIsW0osTV0pfX1mdW5jdGlvbiBMKCl7aWYoTS5jb21wbGV0ZSl7TS5jb21wbGV0ZShKLFIpfWlmKE0uZ2xvYmFsKXtvLmV2ZW50LnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW0osTV0pfWlmKE0uZ2xvYmFsJiYhLS1vLmFjdGl2ZSl7by5ldmVudC50cmlnZ2VyKCJhamF4U3RvcCIpfX1yZXR1cm4gSn0saGFuZGxlRXJyb3I6ZnVuY3Rpb24oRixILEUsRyl7aWYoRi5lcnJvcil7Ri5lcnJvcihILEUsRyl9aWYoRi5nbG9iYWwpe28uZXZlbnQudHJpZ2dlcigiYWpheEVycm9yIixbSCxGLEddKX19LGFjdGl2ZTowLGh0dHBTdWNjZXNzOmZ1bmN0aW9uKEYpe3RyeXtyZXR1cm4gIUYuc3RhdHVzJiZsb2NhdGlvbi5wcm90b2NvbD09ImZpbGU6Inx8KEYuc3RhdHVzPj0yMDAmJkYuc3RhdHVzPDMwMCl8fEYuc3RhdHVzPT0zMDR8fEYuc3RhdHVzPT0xMjIzfWNhdGNoKEUpe31yZXR1cm4gZmFsc2V9LGh0dHBOb3RNb2RpZmllZDpmdW5jdGlvbihHLEUpe3RyeXt2YXIgSD1HLmdldFJlc3BvbnNlSGVhZGVyKCJMYXN0LU1vZGlmaWVkIik7cmV0dXJuIEcuc3RhdHVzPT0zMDR8fEg9PW8ubGFzdE1vZGlmaWVkW0VdfWNhdGNoKEYpe31yZXR1cm4gZmFsc2V9LGh0dHBEYXRhOmZ1bmN0aW9uKEosSCxHKXt2YXIgRj1KLmdldFJlc3BvbnNlSGVhZGVyKCJjb250ZW50LXR5cGUiKSxFPUg9PSJ4bWwifHwhSCYmRiYmRi5pbmRleE9mKCJ4bWwiKT49MCxJPUU/Si5yZXNwb25zZVhNTDpKLnJlc3BvbnNlVGV4dDtpZihFJiZJLmRvY3VtZW50RWxlbWVudC50YWdOYW1lPT0icGFyc2VyZXJyb3IiKXt0aHJvdyJwYXJzZXJlcnJvciJ9aWYoRyYmRy5kYXRhRmlsdGVyKXtJPUcuZGF0YUZpbHRlcihJLEgpfWlmKHR5cGVvZiBJPT09InN0cmluZyIpe2lmKEg9PSJzY3JpcHQiKXtvLmdsb2JhbEV2YWwoSSl9aWYoSD09Impzb24iKXtJPWxbImV2YWwiXSgiKCIrSSsiKSIpfX1yZXR1cm4gSX0scGFyYW06ZnVuY3Rpb24oRSl7dmFyIEc9W107ZnVuY3Rpb24gSChJLEope0dbRy5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChJKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KEopfWlmKG8uaXNBcnJheShFKXx8RS5qcXVlcnkpe28uZWFjaChFLGZ1bmN0aW9uKCl7SCh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KX1lbHNle2Zvcih2YXIgRiBpbiBFKXtpZihvLmlzQXJyYXkoRVtGXSkpe28uZWFjaChFW0ZdLGZ1bmN0aW9uKCl7SChGLHRoaXMpfSl9ZWxzZXtIKEYsby5pc0Z1bmN0aW9uKEVbRl0pP0VbRl0oKTpFW0ZdKX19fXJldHVybiBHLmpvaW4oIiYiKS5yZXBsYWNlKC8lMjAvZywiKyIpfX0pO3ZhciBtPXt9LG4sZD1bWyJoZWlnaHQiLCJtYXJnaW5Ub3AiLCJtYXJnaW5Cb3R0b20iLCJwYWRkaW5nVG9wIiwicGFkZGluZ0JvdHRvbSJdLFsid2lkdGgiLCJtYXJnaW5MZWZ0IiwibWFyZ2luUmlnaHQiLCJwYWRkaW5nTGVmdCIsInBhZGRpbmdSaWdodCJdLFsib3BhY2l0eSJdXTtmdW5jdGlvbiB0KEYsRSl7dmFyIEc9e307by5lYWNoKGQuY29uY2F0LmFwcGx5KFtdLGQuc2xpY2UoMCxFKSksZnVuY3Rpb24oKXtHW3RoaXNdPUZ9KTtyZXR1cm4gR31vLmZuLmV4dGVuZCh7c2hvdzpmdW5jdGlvbihKLEwpe2lmKEope3JldHVybiB0aGlzLmFuaW1hdGUodCgic2hvdyIsMyksSixMKX1lbHNle2Zvcih2YXIgSD0wLEY9dGhpcy5sZW5ndGg7SDxGO0grKyl7dmFyIEU9by5kYXRhKHRoaXNbSF0sIm9sZGRpc3BsYXkiKTt0aGlzW0hdLnN0eWxlLmRpc3BsYXk9RXx8IiI7aWYoby5jc3ModGhpc1tIXSwiZGlzcGxheSIpPT09Im5vbmUiKXt2YXIgRz10aGlzW0hdLnRhZ05hbWUsSztpZihtW0ddKXtLPW1bR119ZWxzZXt2YXIgST1vKCI8IitHKyIgLz4iKS5hcHBlbmRUbygiYm9keSIpO0s9SS5jc3MoImRpc3BsYXkiKTtpZihLPT09Im5vbmUiKXtLPSJibG9jayJ9SS5yZW1vdmUoKTttW0ddPUt9by5kYXRhKHRoaXNbSF0sIm9sZGRpc3BsYXkiLEspfX1mb3IodmFyIEg9MCxGPXRoaXMubGVuZ3RoO0g8RjtIKyspe3RoaXNbSF0uc3R5bGUuZGlzcGxheT1vLmRhdGEodGhpc1tIXSwib2xkZGlzcGxheSIpfHwiIn1yZXR1cm4gdGhpc319LGhpZGU6ZnVuY3Rpb24oSCxJKXtpZihIKXtyZXR1cm4gdGhpcy5hbmltYXRlKHQoImhpZGUiLDMpLEgsSSl9ZWxzZXtmb3IodmFyIEc9MCxGPXRoaXMubGVuZ3RoO0c8RjtHKyspe3ZhciBFPW8uZGF0YSh0aGlzW0ddLCJvbGRkaXNwbGF5Iik7aWYoIUUmJkUhPT0ibm9uZSIpe28uZGF0YSh0aGlzW0ddLCJvbGRkaXNwbGF5IixvLmNzcyh0aGlzW0ddLCJkaXNwbGF5IikpfX1mb3IodmFyIEc9MCxGPXRoaXMubGVuZ3RoO0c8RjtHKyspe3RoaXNbR10uc3R5bGUuZGlzcGxheT0ibm9uZSJ9cmV0dXJuIHRoaXN9fSxfdG9nZ2xlOm8uZm4udG9nZ2xlLHRvZ2dsZTpmdW5jdGlvbihHLEYpe3ZhciBFPXR5cGVvZiBHPT09ImJvb2xlYW4iO3JldHVybiBvLmlzRnVuY3Rpb24oRykmJm8uaXNGdW5jdGlvbihGKT90aGlzLl90b2dnbGUuYXBwbHkodGhpcyxhcmd1bWVudHMpOkc9PW51bGx8fEU/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIEg9RT9HOm8odGhpcykuaXMoIjpoaWRkZW4iKTtvKHRoaXMpW0g/InNob3ciOiJoaWRlIl0oKX0pOnRoaXMuYW5pbWF0ZSh0KCJ0b2dnbGUiLDMpLEcsRil9LGZhZGVUbzpmdW5jdGlvbihFLEcsRil7cmV0dXJuIHRoaXMuYW5pbWF0ZSh7b3BhY2l0eTpHfSxFLEYpfSxhbmltYXRlOmZ1bmN0aW9uKEksRixILEcpe3ZhciBFPW8uc3BlZWQoRixILEcpO3JldHVybiB0aGlzW0UucXVldWU9PT1mYWxzZT8iZWFjaCI6InF1ZXVlIl0oZnVuY3Rpb24oKXt2YXIgSz1vLmV4dGVuZCh7fSxFKSxNLEw9dGhpcy5ub2RlVHlwZT09MSYmbyh0aGlzKS5pcygiOmhpZGRlbiIpLEo9dGhpcztmb3IoTSBpbiBJKXtpZihJW01dPT0iaGlkZSImJkx8fElbTV09PSJzaG93IiYmIUwpe3JldHVybiBLLmNvbXBsZXRlLmNhbGwodGhpcyl9aWYoKE09PSJoZWlnaHQifHxNPT0id2lkdGgiKSYmdGhpcy5zdHlsZSl7Sy5kaXNwbGF5PW8uY3NzKHRoaXMsImRpc3BsYXkiKTtLLm92ZXJmbG93PXRoaXMuc3R5bGUub3ZlcmZsb3d9fWlmKEsub3ZlcmZsb3chPW51bGwpe3RoaXMuc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiJ9Sy5jdXJBbmltPW8uZXh0ZW5kKHt9LEkpO28uZWFjaChJLGZ1bmN0aW9uKE8sUyl7dmFyIFI9bmV3IG8uZngoSixLLE8pO2lmKC90b2dnbGV8c2hvd3xoaWRlLy50ZXN0KFMpKXtSW1M9PSJ0b2dnbGUiP0w/InNob3ciOiJoaWRlIjpTXShJKX1lbHNle3ZhciBRPVMudG9TdHJpbmcoKS5tYXRjaCgvXihbKy1dPSk/KFtcZCstLl0rKSguKikkLyksVD1SLmN1cih0cnVlKXx8MDtpZihRKXt2YXIgTj1wYXJzZUZsb2F0KFFbMl0pLFA9UVszXXx8InB4IjtpZihQIT0icHgiKXtKLnN0eWxlW09dPShOfHwxKStQO1Q9KChOfHwxKS9SLmN1cih0cnVlKSkqVDtKLnN0eWxlW09dPVQrUH1pZihRWzFdKXtOPSgoUVsxXT09Ii09Ij8tMToxKSpOKStUfVIuY3VzdG9tKFQsTixQKX1lbHNle1IuY3VzdG9tKFQsUywiIil9fX0pO3JldHVybiB0cnVlfSl9LHN0b3A6ZnVuY3Rpb24oRixFKXt2YXIgRz1vLnRpbWVycztpZihGKXt0aGlzLnF1ZXVlKFtdKX10aGlzLmVhY2goZnVuY3Rpb24oKXtmb3IodmFyIEg9Ry5sZW5ndGgtMTtIPj0wO0gtLSl7aWYoR1tIXS5lbGVtPT10aGlzKXtpZihFKXtHW0hdKHRydWUpfUcuc3BsaWNlKEgsMSl9fX0pO2lmKCFFKXt0aGlzLmRlcXVldWUoKX1yZXR1cm4gdGhpc319KTtvLmVhY2goe3NsaWRlRG93bjp0KCJzaG93IiwxKSxzbGlkZVVwOnQoImhpZGUiLDEpLHNsaWRlVG9nZ2xlOnQoInRvZ2dsZSIsMSksZmFkZUluOntvcGFjaXR5OiJzaG93In0sZmFkZU91dDp7b3BhY2l0eToiaGlkZSJ9fSxmdW5jdGlvbihFLEYpe28uZm5bRV09ZnVuY3Rpb24oRyxIKXtyZXR1cm4gdGhpcy5hbmltYXRlKEYsRyxIKX19KTtvLmV4dGVuZCh7c3BlZWQ6ZnVuY3Rpb24oRyxILEYpe3ZhciBFPXR5cGVvZiBHPT09Im9iamVjdCI/Rzp7Y29tcGxldGU6Rnx8IUYmJkh8fG8uaXNGdW5jdGlvbihHKSYmRyxkdXJhdGlvbjpHLGVhc2luZzpGJiZIfHxIJiYhby5pc0Z1bmN0aW9uKEgpJiZIfTtFLmR1cmF0aW9uPW8uZngub2ZmPzA6dHlwZW9mIEUuZHVyYXRpb249PT0ibnVtYmVyIj9FLmR1cmF0aW9uOm8uZnguc3BlZWRzW0UuZHVyYXRpb25dfHxvLmZ4LnNwZWVkcy5fZGVmYXVsdDtFLm9sZD1FLmNvbXBsZXRlO0UuY29tcGxldGU9ZnVuY3Rpb24oKXtpZihFLnF1ZXVlIT09ZmFsc2Upe28odGhpcykuZGVxdWV1ZSgpfWlmKG8uaXNGdW5jdGlvbihFLm9sZCkpe0Uub2xkLmNhbGwodGhpcyl9fTtyZXR1cm4gRX0sZWFzaW5nOntsaW5lYXI6ZnVuY3Rpb24oRyxILEUsRil7cmV0dXJuIEUrRipHfSxzd2luZzpmdW5jdGlvbihHLEgsRSxGKXtyZXR1cm4oKC1NYXRoLmNvcyhHKk1hdGguUEkpLzIpKzAuNSkqRitFfX0sdGltZXJzOltdLGZ4OmZ1bmN0aW9uKEYsRSxHKXt0aGlzLm9wdGlvbnM9RTt0aGlzLmVsZW09Rjt0aGlzLnByb3A9RztpZighRS5vcmlnKXtFLm9yaWc9e319fX0pO28uZngucHJvdG90eXBlPXt1cGRhdGU6ZnVuY3Rpb24oKXtpZih0aGlzLm9wdGlvbnMuc3RlcCl7dGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyl9KG8uZnguc3RlcFt0aGlzLnByb3BdfHxvLmZ4LnN0ZXAuX2RlZmF1bHQpKHRoaXMpO2lmKCh0aGlzLnByb3A9PSJoZWlnaHQifHx0aGlzLnByb3A9PSJ3aWR0aCIpJiZ0aGlzLmVsZW0uc3R5bGUpe3RoaXMuZWxlbS5zdHlsZS5kaXNwbGF5PSJibG9jayJ9fSxjdXI6ZnVuY3Rpb24oRil7aWYodGhpcy5lbGVtW3RoaXMucHJvcF0hPW51bGwmJighdGhpcy5lbGVtLnN0eWxlfHx0aGlzLmVsZW0uc3R5bGVbdGhpcy5wcm9wXT09bnVsbCkpe3JldHVybiB0aGlzLmVsZW1bdGhpcy5wcm9wXX12YXIgRT1wYXJzZUZsb2F0KG8uY3NzKHRoaXMuZWxlbSx0aGlzLnByb3AsRikpO3JldHVybiBFJiZFPi0xMDAwMD9FOnBhcnNlRmxvYXQoby5jdXJDU1ModGhpcy5lbGVtLHRoaXMucHJvcCkpfHwwfSxjdXN0b206ZnVuY3Rpb24oSSxILEcpe3RoaXMuc3RhcnRUaW1lPWUoKTt0aGlzLnN0YXJ0PUk7dGhpcy5lbmQ9SDt0aGlzLnVuaXQ9R3x8dGhpcy51bml0fHwicHgiO3RoaXMubm93PXRoaXMuc3RhcnQ7dGhpcy5wb3M9dGhpcy5zdGF0ZT0wO3ZhciBFPXRoaXM7ZnVuY3Rpb24gRihKKXtyZXR1cm4gRS5zdGVwKEopfUYuZWxlbT10aGlzLmVsZW07aWYoRigpJiZvLnRpbWVycy5wdXNoKEYpJiYhbil7bj1zZXRJbnRlcnZhbChmdW5jdGlvbigpe3ZhciBLPW8udGltZXJzO2Zvcih2YXIgSj0wO0o8Sy5sZW5ndGg7SisrKXtpZighS1tKXSgpKXtLLnNwbGljZShKLS0sMSl9fWlmKCFLLmxlbmd0aCl7Y2xlYXJJbnRlcnZhbChuKTtuPWd9fSwxMyl9fSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLm9yaWdbdGhpcy5wcm9wXT1vLmF0dHIodGhpcy5lbGVtLnN0eWxlLHRoaXMucHJvcCk7dGhpcy5vcHRpb25zLnNob3c9dHJ1ZTt0aGlzLmN1c3RvbSh0aGlzLnByb3A9PSJ3aWR0aCJ8fHRoaXMucHJvcD09ImhlaWdodCI/MTowLHRoaXMuY3VyKCkpO28odGhpcy5lbGVtKS5zaG93KCl9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMub3JpZ1t0aGlzLnByb3BdPW8uYXR0cih0aGlzLmVsZW0uc3R5bGUsdGhpcy5wcm9wKTt0aGlzLm9wdGlvbnMuaGlkZT10cnVlO3RoaXMuY3VzdG9tKHRoaXMuY3VyKCksMCl9LHN0ZXA6ZnVuY3Rpb24oSCl7dmFyIEc9ZSgpO2lmKEh8fEc+PXRoaXMub3B0aW9ucy5kdXJhdGlvbit0aGlzLnN0YXJ0VGltZSl7dGhpcy5ub3c9dGhpcy5lbmQ7dGhpcy5wb3M9dGhpcy5zdGF0ZT0xO3RoaXMudXBkYXRlKCk7dGhpcy5vcHRpb25zLmN1ckFuaW1bdGhpcy5wcm9wXT10cnVlO3ZhciBFPXRydWU7Zm9yKHZhciBGIGluIHRoaXMub3B0aW9ucy5jdXJBbmltKXtpZih0aGlzLm9wdGlvbnMuY3VyQW5pbVtGXSE9PXRydWUpe0U9ZmFsc2V9fWlmKEUpe2lmKHRoaXMub3B0aW9ucy5kaXNwbGF5IT1udWxsKXt0aGlzLmVsZW0uc3R5bGUub3ZlcmZsb3c9dGhpcy5vcHRpb25zLm92ZXJmbG93O3RoaXMuZWxlbS5zdHlsZS5kaXNwbGF5PXRoaXMub3B0aW9ucy5kaXNwbGF5O2lmKG8uY3NzKHRoaXMuZWxlbSwiZGlzcGxheSIpPT0ibm9uZSIpe3RoaXMuZWxlbS5zdHlsZS5kaXNwbGF5PSJibG9jayJ9fWlmKHRoaXMub3B0aW9ucy5oaWRlKXtvKHRoaXMuZWxlbSkuaGlkZSgpfWlmKHRoaXMub3B0aW9ucy5oaWRlfHx0aGlzLm9wdGlvbnMuc2hvdyl7Zm9yKHZhciBJIGluIHRoaXMub3B0aW9ucy5jdXJBbmltKXtvLmF0dHIodGhpcy5lbGVtLnN0eWxlLEksdGhpcy5vcHRpb25zLm9yaWdbSV0pfX10aGlzLm9wdGlvbnMuY29tcGxldGUuY2FsbCh0aGlzLmVsZW0pfXJldHVybiBmYWxzZX1lbHNle3ZhciBKPUctdGhpcy5zdGFydFRpbWU7dGhpcy5zdGF0ZT1KL3RoaXMub3B0aW9ucy5kdXJhdGlvbjt0aGlzLnBvcz1vLmVhc2luZ1t0aGlzLm9wdGlvbnMuZWFzaW5nfHwoby5lYXNpbmcuc3dpbmc/InN3aW5nIjoibGluZWFyIildKHRoaXMuc3RhdGUsSiwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTt0aGlzLm5vdz10aGlzLnN0YXJ0KygodGhpcy5lbmQtdGhpcy5zdGFydCkqdGhpcy5wb3MpO3RoaXMudXBkYXRlKCl9cmV0dXJuIHRydWV9fTtvLmV4dGVuZChvLmZ4LHtzcGVlZHM6e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0sc3RlcDp7b3BhY2l0eTpmdW5jdGlvbihFKXtvLmF0dHIoRS5lbGVtLnN0eWxlLCJvcGFjaXR5IixFLm5vdyl9LF9kZWZhdWx0OmZ1bmN0aW9uKEUpe2lmKEUuZWxlbS5zdHlsZSYmRS5lbGVtLnN0eWxlW0UucHJvcF0hPW51bGwpe0UuZWxlbS5zdHlsZVtFLnByb3BdPUUubm93K0UudW5pdH1lbHNle0UuZWxlbVtFLnByb3BdPUUubm93fX19fSk7aWYoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCl7by5mbi5vZmZzZXQ9ZnVuY3Rpb24oKXtpZighdGhpc1swXSl7cmV0dXJue3RvcDowLGxlZnQ6MH19aWYodGhpc1swXT09PXRoaXNbMF0ub3duZXJEb2N1bWVudC5ib2R5KXtyZXR1cm4gby5vZmZzZXQuYm9keU9mZnNldCh0aGlzWzBdKX12YXIgRz10aGlzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLEo9dGhpc1swXS5vd25lckRvY3VtZW50LEY9Si5ib2R5LEU9Si5kb2N1bWVudEVsZW1lbnQsTD1FLmNsaWVudFRvcHx8Ri5jbGllbnRUb3B8fDAsSz1FLmNsaWVudExlZnR8fEYuY2xpZW50TGVmdHx8MCxJPUcudG9wKyhzZWxmLnBhZ2VZT2Zmc2V0fHxvLmJveE1vZGVsJiZFLnNjcm9sbFRvcHx8Ri5zY3JvbGxUb3ApLUwsSD1HLmxlZnQrKHNlbGYucGFnZVhPZmZzZXR8fG8uYm94TW9kZWwmJkUuc2Nyb2xsTGVmdHx8Ri5zY3JvbGxMZWZ0KS1LO3JldHVybnt0b3A6SSxsZWZ0Okh9fX1lbHNle28uZm4ub2Zmc2V0PWZ1bmN0aW9uKCl7aWYoIXRoaXNbMF0pe3JldHVybnt0b3A6MCxsZWZ0OjB9fWlmKHRoaXNbMF09PT10aGlzWzBdLm93bmVyRG9jdW1lbnQuYm9keSl7cmV0dXJuIG8ub2Zmc2V0LmJvZHlPZmZzZXQodGhpc1swXSl9by5vZmZzZXQuaW5pdGlhbGl6ZWR8fG8ub2Zmc2V0LmluaXRpYWxpemUoKTt2YXIgSj10aGlzWzBdLEc9Si5vZmZzZXRQYXJlbnQsRj1KLE89Si5vd25lckRvY3VtZW50LE0sSD1PLmRvY3VtZW50RWxlbWVudCxLPU8uYm9keSxMPU8uZGVmYXVsdFZpZXcsRT1MLmdldENvbXB1dGVkU3R5bGUoSixudWxsKSxOPUoub2Zmc2V0VG9wLEk9Si5vZmZzZXRMZWZ0O3doaWxlKChKPUoucGFyZW50Tm9kZSkmJkohPT1LJiZKIT09SCl7TT1MLmdldENvbXB1dGVkU3R5bGUoSixudWxsKTtOLT1KLnNjcm9sbFRvcCxJLT1KLnNjcm9sbExlZnQ7aWYoSj09PUcpe04rPUoub2Zmc2V0VG9wLEkrPUoub2Zmc2V0TGVmdDtpZihvLm9mZnNldC5kb2VzTm90QWRkQm9yZGVyJiYhKG8ub2Zmc2V0LmRvZXNBZGRCb3JkZXJGb3JUYWJsZUFuZENlbGxzJiYvXnQoYWJsZXxkfGgpJC9pLnRlc3QoSi50YWdOYW1lKSkpe04rPXBhcnNlSW50KE0uYm9yZGVyVG9wV2lkdGgsMTApfHwwLEkrPXBhcnNlSW50KE0uYm9yZGVyTGVmdFdpZHRoLDEwKXx8MH1GPUcsRz1KLm9mZnNldFBhcmVudH1pZihvLm9mZnNldC5zdWJ0cmFjdHNCb3JkZXJGb3JPdmVyZmxvd05vdFZpc2libGUmJk0ub3ZlcmZsb3chPT0idmlzaWJsZSIpe04rPXBhcnNlSW50KE0uYm9yZGVyVG9wV2lkdGgsMTApfHwwLEkrPXBhcnNlSW50KE0uYm9yZGVyTGVmdFdpZHRoLDEwKXx8MH1FPU19aWYoRS5wb3NpdGlvbj09PSJyZWxhdGl2ZSJ8fEUucG9zaXRpb249PT0ic3RhdGljIil7Tis9Sy5vZmZzZXRUb3AsSSs9Sy5vZmZzZXRMZWZ0fWlmKEUucG9zaXRpb249PT0iZml4ZWQiKXtOKz1NYXRoLm1heChILnNjcm9sbFRvcCxLLnNjcm9sbFRvcCksSSs9TWF0aC5tYXgoSC5zY3JvbGxMZWZ0LEsuc2Nyb2xsTGVmdCl9cmV0dXJue3RvcDpOLGxlZnQ6SX19fW8ub2Zmc2V0PXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7aWYodGhpcy5pbml0aWFsaXplZCl7cmV0dXJufXZhciBMPWRvY3VtZW50LmJvZHksRj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxILEcsTixJLE0sRSxKPUwuc3R5bGUubWFyZ2luVG9wLEs9JzxkaXYgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDttYXJnaW46MDtib3JkZXI6NXB4IHNvbGlkICMwMDA7cGFkZGluZzowO3dpZHRoOjFweDtoZWlnaHQ6MXB4OyI+PGRpdj48L2Rpdj48L2Rpdj48dGFibGUgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDttYXJnaW46MDtib3JkZXI6NXB4IHNvbGlkICMwMDA7cGFkZGluZzowO3dpZHRoOjFweDtoZWlnaHQ6MXB4OyIgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIj48dHI+PHRkPjwvdGQ+PC90cj48L3RhYmxlPic7TT17cG9zaXRpb246ImFic29sdXRlIix0b3A6MCxsZWZ0OjAsbWFyZ2luOjAsYm9yZGVyOjAsd2lkdGg6IjFweCIsaGVpZ2h0OiIxcHgiLHZpc2liaWxpdHk6ImhpZGRlbiJ9O2ZvcihFIGluIE0pe0Yuc3R5bGVbRV09TVtFXX1GLmlubmVySFRNTD1LO0wuaW5zZXJ0QmVmb3JlKEYsTC5maXJzdENoaWxkKTtIPUYuZmlyc3RDaGlsZCxHPUguZmlyc3RDaGlsZCxJPUgubmV4dFNpYmxpbmcuZmlyc3RDaGlsZC5maXJzdENoaWxkO3RoaXMuZG9lc05vdEFkZEJvcmRlcj0oRy5vZmZzZXRUb3AhPT01KTt0aGlzLmRvZXNBZGRCb3JkZXJGb3JUYWJsZUFuZENlbGxzPShJLm9mZnNldFRvcD09PTUpO0guc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiIsSC5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiO3RoaXMuc3VidHJhY3RzQm9yZGVyRm9yT3ZlcmZsb3dOb3RWaXNpYmxlPShHLm9mZnNldFRvcD09PS01KTtMLnN0eWxlLm1hcmdpblRvcD0iMXB4Ijt0aGlzLmRvZXNOb3RJbmNsdWRlTWFyZ2luSW5Cb2R5T2Zmc2V0PShMLm9mZnNldFRvcD09PTApO0wuc3R5bGUubWFyZ2luVG9wPUo7TC5yZW1vdmVDaGlsZChGKTt0aGlzLmluaXRpYWxpemVkPXRydWV9LGJvZHlPZmZzZXQ6ZnVuY3Rpb24oRSl7by5vZmZzZXQuaW5pdGlhbGl6ZWR8fG8ub2Zmc2V0LmluaXRpYWxpemUoKTt2YXIgRz1FLm9mZnNldFRvcCxGPUUub2Zmc2V0TGVmdDtpZihvLm9mZnNldC5kb2VzTm90SW5jbHVkZU1hcmdpbkluQm9keU9mZnNldCl7Rys9cGFyc2VJbnQoby5jdXJDU1MoRSwibWFyZ2luVG9wIix0cnVlKSwxMCl8fDAsRis9cGFyc2VJbnQoby5jdXJDU1MoRSwibWFyZ2luTGVmdCIsdHJ1ZSksMTApfHwwfXJldHVybnt0b3A6RyxsZWZ0OkZ9fX07by5mbi5leHRlbmQoe3Bvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIEk9MCxIPTAsRjtpZih0aGlzWzBdKXt2YXIgRz10aGlzLm9mZnNldFBhcmVudCgpLEo9dGhpcy5vZmZzZXQoKSxFPS9eYm9keXxodG1sJC9pLnRlc3QoR1swXS50YWdOYW1lKT97dG9wOjAsbGVmdDowfTpHLm9mZnNldCgpO0oudG9wLT1qKHRoaXMsIm1hcmdpblRvcCIpO0oubGVmdC09aih0aGlzLCJtYXJnaW5MZWZ0Iik7RS50b3ArPWooRywiYm9yZGVyVG9wV2lkdGgiKTtFLmxlZnQrPWooRywiYm9yZGVyTGVmdFdpZHRoIik7Rj17dG9wOkoudG9wLUUudG9wLGxlZnQ6Si5sZWZ0LUUubGVmdH19cmV0dXJuIEZ9LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3ZhciBFPXRoaXNbMF0ub2Zmc2V0UGFyZW50fHxkb2N1bWVudC5ib2R5O3doaWxlKEUmJighL15ib2R5fGh0bWwkL2kudGVzdChFLnRhZ05hbWUpJiZvLmNzcyhFLCJwb3NpdGlvbiIpPT0ic3RhdGljIikpe0U9RS5vZmZzZXRQYXJlbnR9cmV0dXJuIG8oRSl9fSk7by5lYWNoKFsiTGVmdCIsIlRvcCJdLGZ1bmN0aW9uKEYsRSl7dmFyIEc9InNjcm9sbCIrRTtvLmZuW0ddPWZ1bmN0aW9uKEgpe2lmKCF0aGlzWzBdKXtyZXR1cm4gbnVsbH1yZXR1cm4gSCE9PWc/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dGhpcz09bHx8dGhpcz09ZG9jdW1lbnQ/bC5zY3JvbGxUbyghRj9IOm8obCkuc2Nyb2xsTGVmdCgpLEY/SDpvKGwpLnNjcm9sbFRvcCgpKTp0aGlzW0ddPUh9KTp0aGlzWzBdPT1sfHx0aGlzWzBdPT1kb2N1bWVudD9zZWxmW0Y/InBhZ2VZT2Zmc2V0IjoicGFnZVhPZmZzZXQiXXx8by5ib3hNb2RlbCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W0ddfHxkb2N1bWVudC5ib2R5W0ddOnRoaXNbMF1bR119fSk7by5lYWNoKFsiSGVpZ2h0IiwiV2lkdGgiXSxmdW5jdGlvbihJLEcpe3ZhciBFPUk/IkxlZnQiOiJUb3AiLEg9ST8iUmlnaHQiOiJCb3R0b20iLEY9Ry50b0xvd2VyQ2FzZSgpO28uZm5bImlubmVyIitHXT1mdW5jdGlvbigpe3JldHVybiB0aGlzWzBdP28uY3NzKHRoaXNbMF0sRixmYWxzZSwicGFkZGluZyIpOm51bGx9O28uZm5bIm91dGVyIitHXT1mdW5jdGlvbihLKXtyZXR1cm4gdGhpc1swXT9vLmNzcyh0aGlzWzBdLEYsZmFsc2UsSz8ibWFyZ2luIjoiYm9yZGVyIik6bnVsbH07dmFyIEo9Ry50b0xvd2VyQ2FzZSgpO28uZm5bSl09ZnVuY3Rpb24oSyl7cmV0dXJuIHRoaXNbMF09PWw/ZG9jdW1lbnQuY29tcGF0TW9kZT09IkNTUzFDb21wYXQiJiZkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrR118fGRvY3VtZW50LmJvZHlbImNsaWVudCIrR106dGhpc1swXT09ZG9jdW1lbnQ/TWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyJjbGllbnQiK0ddLGRvY3VtZW50LmJvZHlbInNjcm9sbCIrR10sZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyJzY3JvbGwiK0ddLGRvY3VtZW50LmJvZHlbIm9mZnNldCIrR10sZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyJvZmZzZXQiK0ddKTpLPT09Zz8odGhpcy5sZW5ndGg/by5jc3ModGhpc1swXSxKKTpudWxsKTp0aGlzLmNzcyhKLHR5cGVvZiBLPT09InN0cmluZyI/SzpLKyJweCIpfX0pfSkoKTs=',
	'data:text/javascript;base64,LyoqCiAqIENvb2tpZSBwbHVnaW4KICoKICogQ29weXJpZ2h0IChjKSAyMDA2IEtsYXVzIEhhcnRsIChzdGlsYnVlcm8uZGUpCiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBhbmQgR1BMIGxpY2Vuc2VzOgogKiBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocAogKiBodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvZ3BsLmh0bWwKICoKICovCgovKioKICogQ3JlYXRlIGEgY29va2llIHdpdGggdGhlIGdpdmVuIG5hbWUgYW5kIHZhbHVlIGFuZCBvdGhlciBvcHRpb25hbCBwYXJhbWV0ZXJzLgogKgogKiBAZXhhbXBsZSAkLmNvb2tpZSgndGhlX2Nvb2tpZScsICd0aGVfdmFsdWUnKTsKICogQGRlc2MgU2V0IHRoZSB2YWx1ZSBvZiBhIGNvb2tpZS4KICogQGV4YW1wbGUgJC5jb29raWUoJ3RoZV9jb29raWUnLCAndGhlX3ZhbHVlJywgeyBleHBpcmVzOiA3LCBwYXRoOiAnLycsIGRvbWFpbjogJ2pxdWVyeS5jb20nLCBzZWN1cmU6IHRydWUgfSk7CiAqIEBkZXNjIENyZWF0ZSBhIGNvb2tpZSB3aXRoIGFsbCBhdmFpbGFibGUgb3B0aW9ucy4KICogQGV4YW1wbGUgJC5jb29raWUoJ3RoZV9jb29raWUnLCAndGhlX3ZhbHVlJyk7CiAqIEBkZXNjIENyZWF0ZSBhIHNlc3Npb24gY29va2llLgogKiBAZXhhbXBsZSAkLmNvb2tpZSgndGhlX2Nvb2tpZScsIG51bGwpOwogKiBAZGVzYyBEZWxldGUgYSBjb29raWUgYnkgcGFzc2luZyBudWxsIGFzIHZhbHVlLiBLZWVwIGluIG1pbmQgdGhhdCB5b3UgaGF2ZSB0byB1c2UgdGhlIHNhbWUgcGF0aCBhbmQgZG9tYWluCiAqICAgICAgIHVzZWQgd2hlbiB0aGUgY29va2llIHdhcyBzZXQuCiAqCiAqIEBwYXJhbSBTdHJpbmcgbmFtZSBUaGUgbmFtZSBvZiB0aGUgY29va2llLgogKiBAcGFyYW0gU3RyaW5nIHZhbHVlIFRoZSB2YWx1ZSBvZiB0aGUgY29va2llLgogKiBAcGFyYW0gT2JqZWN0IG9wdGlvbnMgQW4gb2JqZWN0IGxpdGVyYWwgY29udGFpbmluZyBrZXkvdmFsdWUgcGFpcnMgdG8gcHJvdmlkZSBvcHRpb25hbCBjb29raWUgYXR0cmlidXRlcy4KICogQG9wdGlvbiBOdW1iZXJ8RGF0ZSBleHBpcmVzIEVpdGhlciBhbiBpbnRlZ2VyIHNwZWNpZnlpbmcgdGhlIGV4cGlyYXRpb24gZGF0ZSBmcm9tIG5vdyBvbiBpbiBkYXlzIG9yIGEgRGF0ZSBvYmplY3QuCiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZiBhIG5lZ2F0aXZlIHZhbHVlIGlzIHNwZWNpZmllZCAoZS5nLiBhIGRhdGUgaW4gdGhlIHBhc3QpLCB0aGUgY29va2llIHdpbGwgYmUgZGVsZXRlZC4KICogICAgICAgICAgICAgICAgICAgICAgICAgICAgIElmIHNldCB0byBudWxsIG9yIG9taXR0ZWQsIHRoZSBjb29raWUgd2lsbCBiZSBhIHNlc3Npb24gY29va2llIGFuZCB3aWxsIG5vdCBiZSByZXRhaW5lZAogKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hlbiB0aGUgdGhlIGJyb3dzZXIgZXhpdHMuCiAqIEBvcHRpb24gU3RyaW5nIHBhdGggVGhlIHZhbHVlIG9mIHRoZSBwYXRoIGF0cmlidXRlIG9mIHRoZSBjb29raWUgKGRlZmF1bHQ6IHBhdGggb2YgcGFnZSB0aGF0IGNyZWF0ZWQgdGhlIGNvb2tpZSkuCiAqIEBvcHRpb24gU3RyaW5nIGRvbWFpbiBUaGUgdmFsdWUgb2YgdGhlIGRvbWFpbiBhdHRyaWJ1dGUgb2YgdGhlIGNvb2tpZSAoZGVmYXVsdDogZG9tYWluIG9mIHBhZ2UgdGhhdCBjcmVhdGVkIHRoZSBjb29raWUpLgogKiBAb3B0aW9uIEJvb2xlYW4gc2VjdXJlIElmIHRydWUsIHRoZSBzZWN1cmUgYXR0cmlidXRlIG9mIHRoZSBjb29raWUgd2lsbCBiZSBzZXQgYW5kIHRoZSBjb29raWUgdHJhbnNtaXNzaW9uIHdpbGwKICogICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlIGEgc2VjdXJlIHByb3RvY29sIChsaWtlIEhUVFBTKS4KICogQHR5cGUgdW5kZWZpbmVkCiAqCiAqIEBuYW1lICQuY29va2llCiAqIEBjYXQgUGx1Z2lucy9Db29raWUKICogQGF1dGhvciBLbGF1cyBIYXJ0bC9rbGF1cy5oYXJ0bEBzdGlsYnVlcm8uZGUKICovCgovKioKICogR2V0IHRoZSB2YWx1ZSBvZiBhIGNvb2tpZSB3aXRoIHRoZSBnaXZlbiBuYW1lLgogKgogKiBAZXhhbXBsZSAkLmNvb2tpZSgndGhlX2Nvb2tpZScpOwogKiBAZGVzYyBHZXQgdGhlIHZhbHVlIG9mIGEgY29va2llLgogKgogKiBAcGFyYW0gU3RyaW5nIG5hbWUgVGhlIG5hbWUgb2YgdGhlIGNvb2tpZS4KICogQHJldHVybiBUaGUgdmFsdWUgb2YgdGhlIGNvb2tpZS4KICogQHR5cGUgU3RyaW5nCiAqCiAqIEBuYW1lICQuY29va2llCiAqIEBjYXQgUGx1Z2lucy9Db29raWUKICogQGF1dGhvciBLbGF1cyBIYXJ0bC9rbGF1cy5oYXJ0bEBzdGlsYnVlcm8uZGUKICovCmpRdWVyeS5jb29raWUgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSwgb3B0aW9ucykgewogICAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAndW5kZWZpbmVkJykgeyAvLyBuYW1lIGFuZCB2YWx1ZSBnaXZlbiwgc2V0IGNvb2tpZQogICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgewogICAgICAgICAgICB2YWx1ZSA9ICcnOwogICAgICAgICAgICBvcHRpb25zLmV4cGlyZXMgPSAtMTsKICAgICAgICB9CiAgICAgICAgdmFyIGV4cGlyZXMgPSAnJzsKICAgICAgICBpZiAob3B0aW9ucy5leHBpcmVzICYmICh0eXBlb2Ygb3B0aW9ucy5leHBpcmVzID09ICdudW1iZXInIHx8IG9wdGlvbnMuZXhwaXJlcy50b1VUQ1N0cmluZykpIHsKICAgICAgICAgICAgdmFyIGRhdGU7CiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5leHBpcmVzID09ICdudW1iZXInKSB7CiAgICAgICAgICAgICAgICBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICAgIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSArIChvcHRpb25zLmV4cGlyZXMgKiAyNCAqIDYwICogNjAgKiAxMDAwKSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBkYXRlID0gb3B0aW9ucy5leHBpcmVzOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGV4cGlyZXMgPSAnOyBleHBpcmVzPScgKyBkYXRlLnRvVVRDU3RyaW5nKCk7IC8vIHVzZSBleHBpcmVzIGF0dHJpYnV0ZSwgbWF4LWFnZSBpcyBub3Qgc3VwcG9ydGVkIGJ5IElFCiAgICAgICAgfQogICAgICAgIC8vIENBVVRJT046IE5lZWRlZCB0byBwYXJlbnRoZXNpemUgb3B0aW9ucy5wYXRoIGFuZCBvcHRpb25zLmRvbWFpbgogICAgICAgIC8vIGluIHRoZSBmb2xsb3dpbmcgZXhwcmVzc2lvbnMsIG90aGVyd2lzZSB0aGV5IGV2YWx1YXRlIHRvIHVuZGVmaW5lZAogICAgICAgIC8vIGluIHRoZSBwYWNrZWQgdmVyc2lvbiBmb3Igc29tZSByZWFzb24uLi4KICAgICAgICB2YXIgcGF0aCA9IG9wdGlvbnMucGF0aCA/ICc7IHBhdGg9JyArIChvcHRpb25zLnBhdGgpIDogJyc7CiAgICAgICAgdmFyIGRvbWFpbiA9IG9wdGlvbnMuZG9tYWluID8gJzsgZG9tYWluPScgKyAob3B0aW9ucy5kb21haW4pIDogJyc7CiAgICAgICAgdmFyIHNlY3VyZSA9IG9wdGlvbnMuc2VjdXJlID8gJzsgc2VjdXJlJyA6ICcnOwogICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IFtuYW1lLCAnPScsIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSksIGV4cGlyZXMsIHBhdGgsIGRvbWFpbiwgc2VjdXJlXS5qb2luKCcnKTsKICAgIH0gZWxzZSB7IC8vIG9ubHkgbmFtZSBnaXZlbiwgZ2V0IGNvb2tpZQogICAgICAgIHZhciBjb29raWVWYWx1ZSA9IG51bGw7CiAgICAgICAgaWYgKGRvY3VtZW50LmNvb2tpZSAmJiBkb2N1bWVudC5jb29raWUgIT0gJycpIHsKICAgICAgICAgICAgdmFyIGNvb2tpZXMgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb29raWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICB2YXIgY29va2llID0galF1ZXJ5LnRyaW0oY29va2llc1tpXSk7CiAgICAgICAgICAgICAgICAvLyBEb2VzIHRoaXMgY29va2llIHN0cmluZyBiZWdpbiB3aXRoIHRoZSBuYW1lIHdlIHdhbnQ/CiAgICAgICAgICAgICAgICBpZiAoY29va2llLnN1YnN0cmluZygwLCBuYW1lLmxlbmd0aCArIDEpID09IChuYW1lICsgJz0nKSkgewogICAgICAgICAgICAgICAgICAgIGNvb2tpZVZhbHVlID0gZGVjb2RlVVJJQ29tcG9uZW50KGNvb2tpZS5zdWJzdHJpbmcobmFtZS5sZW5ndGggKyAxKSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGNvb2tpZVZhbHVlOwogICAgfQp9Ow==',
	'data:text/javascript;base64,CihmdW5jdGlvbigkKXtmdW5jdGlvbiB0b0ludGVnZXJzQXRMZWFzZShuKQp7cmV0dXJuIG48MTA/JzAnK246bjt9CkRhdGUucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbihkYXRlKQp7cmV0dXJuIHRoaXMuZ2V0VVRDRnVsbFllYXIoKSsnLScrCnRvSW50ZWdlcnNBdExlYXNlKHRoaXMuZ2V0VVRDTW9udGgoKSkrJy0nKwp0b0ludGVnZXJzQXRMZWFzZSh0aGlzLmdldFVUQ0RhdGUoKSk7fTt2YXIgZXNjYXBlYWJsZT0vWyJcXFx4MDAtXHgxZlx4N2YtXHg5Zl0vZzt2YXIgbWV0YT17J1xiJzonXFxiJywnXHQnOidcXHQnLCdcbic6J1xcbicsJ1xmJzonXFxmJywnXHInOidcXHInLCciJzonXFwiJywnXFwnOidcXFxcJ307JC5xdW90ZVN0cmluZz1mdW5jdGlvbihzdHJpbmcpCntpZihlc2NhcGVhYmxlLnRlc3Qoc3RyaW5nKSkKe3JldHVybiciJytzdHJpbmcucmVwbGFjZShlc2NhcGVhYmxlLGZ1bmN0aW9uKGEpCnt2YXIgYz1tZXRhW2FdO2lmKHR5cGVvZiBjPT09J3N0cmluZycpe3JldHVybiBjO30KYz1hLmNoYXJDb2RlQXQoKTtyZXR1cm4nXFx1MDAnK01hdGguZmxvb3IoYy8xNikudG9TdHJpbmcoMTYpKyhjJTE2KS50b1N0cmluZygxNik7fSkrJyInO30KcmV0dXJuJyInK3N0cmluZysnIic7fTskLnRvSlNPTj1mdW5jdGlvbihvLGNvbXBhY3QpCnt2YXIgdHlwZT10eXBlb2Yobyk7aWYodHlwZT09InVuZGVmaW5lZCIpCnJldHVybiJ1bmRlZmluZWQiO2Vsc2UgaWYodHlwZT09Im51bWJlciJ8fHR5cGU9PSJib29sZWFuIikKcmV0dXJuIG8rIiI7ZWxzZSBpZihvPT09bnVsbCkKcmV0dXJuIm51bGwiO2lmKHR5cGU9PSJzdHJpbmciKQp7cmV0dXJuICQucXVvdGVTdHJpbmcobyk7fQppZih0eXBlPT0ib2JqZWN0IiYmdHlwZW9mIG8udG9KU09OPT0iZnVuY3Rpb24iKQpyZXR1cm4gby50b0pTT04oY29tcGFjdCk7aWYodHlwZSE9ImZ1bmN0aW9uIiYmdHlwZW9mKG8ubGVuZ3RoKT09Im51bWJlciIpCnt2YXIgcmV0PVtdO2Zvcih2YXIgaT0wO2k8by5sZW5ndGg7aSsrKXtyZXQucHVzaCgkLnRvSlNPTihvW2ldLGNvbXBhY3QpKTt9CmlmKGNvbXBhY3QpCnJldHVybiJbIityZXQuam9pbigiLCIpKyJdIjtlbHNlCnJldHVybiJbIityZXQuam9pbigiLCAiKSsiXSI7fQppZih0eXBlPT0iZnVuY3Rpb24iKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJVbmFibGUgdG8gY29udmVydCBvYmplY3Qgb2YgdHlwZSAnZnVuY3Rpb24nIHRvIGpzb24uIik7fQp2YXIgcmV0PVtdO2Zvcih2YXIgayBpbiBvKXt2YXIgbmFtZTt0eXBlPXR5cGVvZihrKTtpZih0eXBlPT0ibnVtYmVyIikKbmFtZT0nIicraysnIic7ZWxzZSBpZih0eXBlPT0ic3RyaW5nIikKbmFtZT0kLnF1b3RlU3RyaW5nKGspO2Vsc2UKY29udGludWU7dmFyIHZhbD0kLnRvSlNPTihvW2tdLGNvbXBhY3QpO2lmKHR5cGVvZih2YWwpIT0ic3RyaW5nIil7Y29udGludWU7fQppZihjb21wYWN0KQpyZXQucHVzaChuYW1lKyI6Iit2YWwpO2Vsc2UKcmV0LnB1c2gobmFtZSsiOiAiK3ZhbCk7fQpyZXR1cm4ieyIrcmV0LmpvaW4oIiwgIikrIn0iO307JC5jb21wYWN0SlNPTj1mdW5jdGlvbihvKQp7cmV0dXJuICQudG9KU09OKG8sdHJ1ZSk7fTskLmV2YWxKU09OPWZ1bmN0aW9uKHNyYykKe3JldHVybiBldmFsKCIoIitzcmMrIikiKTt9OyQuc2VjdXJlRXZhbEpTT049ZnVuY3Rpb24oc3JjKQp7dmFyIGZpbHRlcmVkPXNyYztmaWx0ZXJlZD1maWx0ZXJlZC5yZXBsYWNlKC9cXFsiXFxcL2JmbnJ0dV0vZywnQCcpO2ZpbHRlcmVkPWZpbHRlcmVkLnJlcGxhY2UoLyJbXiJcXFxuXHJdKiJ8dHJ1ZXxmYWxzZXxudWxsfC0/XGQrKD86XC5cZCopPyg/OltlRV1bK1wtXT9cZCspPy9nLCddJyk7ZmlsdGVyZWQ9ZmlsdGVyZWQucmVwbGFjZSgvKD86Xnw6fCwpKD86XHMqXFspKy9nLCcnKTtpZigvXltcXSw6e31cc10qJC8udGVzdChmaWx0ZXJlZCkpCnJldHVybiBldmFsKCIoIitzcmMrIikiKTtlbHNlCnRocm93IG5ldyBTeW50YXhFcnJvcigiRXJyb3IgcGFyc2luZyBKU09OLCBzb3VyY2UgaXMgbm90IHZhbGlkLiIpO307fSkoalF1ZXJ5KTs=',
	'data:text/javascript;base64,LyoKICogdmltOiB0cz0zIHN0cz0zIGNpbmRlbnQgZXhwYW5kdGFiCiAqIGpxdWVyeS5pbWdib2FyZCAtIGpxdWVyeSBleHRlbnNpb25zIGZvciBpbWFnZWJvYXJkcy4KICoKICogQ29weXJpZ2h0IChjKSAyMDA5LCBhbm9ueW1vdXMKICogQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogCiAqIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dAogKiBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIAogKiBtZXQ6CiAqICAgICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0CiAqICAgICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci4KICogICAgICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQKICogICAgICAgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZQogKiAgICAgICBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLgogKiAgICAgKiBOZWl0aGVyIHRoZSBuYW1lIG9mIHRoZSBhbm9ueW1vdXMgbm9yIHRoZSBuYW1lcyBvZiBpdHMgY29udHJpYnV0b3JzIAogKiAgICAgICBtYXkgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tIHRoaXMgCiAqICAgICAgIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLgogKiAKICogVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBhbm9ueW1vdXMgJydBUyBJUycnIEFORCBBTlkgIEVYUFJFU1MgT1IgCiAqIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEIFdBUlJBTlRJRVMKICogT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gCiAqIElOIE5PIEVWRU5UIFNIQUxMIGFub255bW91cyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCAKICogSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUCiAqIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwKICogREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQKICogT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIAogKiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRQogKiBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLgogKi8KCi8qICovCi8qQCBodHRwOi8vd3d3Lm1haWwtYXJjaGl2ZS5jb20vanF1ZXJ5LWVuQGdvb2dsZWdyb3Vwcy5jb20vbXNnMTY0ODcuaHRtbCAqLwpmdW5jdGlvbiBhZGRTdHlsZSggY3NzICkgewogICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnc3R5bGUnICk7CiAgIHN0eWxlLnR5cGUgPSAndGV4dC9jc3MnOwogICB2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07CiAgIGhlYWQuYXBwZW5kQ2hpbGQoIHN0eWxlICk7CiAgIGlmKCBzdHlsZS5zdHlsZVNoZWV0ICkgIC8vIElFCiAgICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzczsKICAgZWxzZSAgLy8gb3RoZXIgYnJvd3NlcnMKICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykgKTsKICAgcmV0dXJuIHN0eWxlOwp9CgovKiAqLwovKgogIEZvciBsb2NhbGl6YXRpb24gdG8geW91ciBsYW5ndWFnZSBzaW1wbHkgcmVwbGFjZSB0aGlzIHRhYmxlLgogKi8KdmFyIHhsYXRiID0gCiAgIHvQuTogJ3EnLCDRhjogJ3cnLCDRgzogJ2UnLCDQujogJ3InLCDQtTogJ3QnLCDQvTogJ3knLCDQszogJ3UnLCAKICAgINGIOiAnaScsINGJOiAnbycsINC3OiAncCcsINGEOiAnYScsINGLOiAncycsINCyOiAnZCcsINCwOiAnZicsIAogICAg0L86ICdnJywg0YA6ICdoJywg0L46ICdqJywg0Ls6ICdrJywg0LQ6ICdsJywg0Y86ICd6Jywg0Yc6ICd4JywgCiAgICDRgTogJ2MnLCDQvDogJ3YnLCDQuDogJ2InLCDRgjogJ24nLCDRjDogJ20nIAogICB9Cgp2YXIgYmxhdHggPQogICB7cTogJ9C5JywgdzogJ9GGJywgZTogJ9GDJywgcjogJ9C6JywgdDogJ9C1JywgeTogJ9C9JywgdTogJ9CzJywgCiAgICBpOiAn0YgnLCBvOiAn0YknLCBwOiAn0LcnLCAnWyc6ICfRhScsICddJzogJ9GKJywgYTogJ9GEJywgCiAgICBzOiAn0YsnLCBkOiAn0LInLCBmOiAn0LAnLCBnOiAn0L8nLCBoOiAn0YAnLCBqOiAn0L4nLCBrOiAn0LsnLCAKICAgIGw6ICfQtCcsICc7JzogJ9C2JywgJ1wnJzogJ9GNJywgejogJ9GPJywgeDogJ9GHJywgYzogJ9GBJywgCiAgICB2OiAn0LwnLCBiOiAn0LgnLCBuOiAn0YInLCBtOiAn0YwnLCAnLCc6ICfQsScsICcuJzogJ9GOJ30KCi8qIFN0YXRlIG1hY2hpbmUgaGVyZSAtIHdhbGtzIHRocm91Z2ggc2libGluZ3MgYW5kIGFkZCBpdCB0bwogICBzcGVjaWZpYyBJT00gZWxlbWVudC4gCgogICBBbGwgcG9zdHMgb24gMi1jaCBleGNlcHQgb2Ygb3Bwb3N0IGZvbGQgaW50byA8dGQ+IHRhZy4gU28KICAgaXQgaXNuJ3QgbmVlZCB0byBmb2xkIGl0IGludG8gYW55dGhpbmcuIFNpbXBseSBmaW5kIHRoaXMKICAgPHRkPiBhbmQgYXBwbHkgb3VyIGlkLiAKICAgICAgCiAgIE5vdyBmdW5jdGlvbiBkZXN0cnVjdGl2ZSAtIGl0J3Mgb3ZlcnJpZGVzIG5hdGl2ZSBpZCdzIG9mCiAgIGVsZW1lbnRzLgoqLwoKZnVuY3Rpb24gZHZhY2ggKCkgewogICBmdW5jdGlvbiBwYXJzZSAoY2xvbmVkKSB7CiAgICAgIHZhciBvcFBvc3QgPSAkKCc8c3Bhbj48L3NwYW4+Jyk7CiAgICAgIHZhciBjdXJyVGhyZWFkID0gJCgnPHNwYW4+PC9zcGFuPicpOwogICAgICBjbG9uZWQuY29udGVudHMoKS5lYWNoKAoJIGZ1bmN0aW9uICgpIHsKICAgICAgIGlmICgkKHRoaXMpLmlzKCd0YWJsZScpKSB7CgkgICAgICAgaWYgKG9wUG9zdCkgewoJCQkJIGN1cnJUaHJlYWQuYXBwZW5kKG9wUG9zdCk7CgkJCQkgb3BQb3N0ID0gZmFsc2U7CgkgICAgICAgfQoJICAgICAgICQodGhpcykuYXR0cignaWQnLCAncCcgKyAkKHRoaXMpLmZpbmQoJ2FbbmFtZV0nKS5hdHRyKCduYW1lJykpOwoJICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ3BlblBvc3QnKTsKICAgICAgIH0KICAgICAgIGlmKG9wUG9zdCkgewoJICAgICAgIG9wUG9zdC5hcHBlbmQodGhpcyk7CgkgICAgICAgaWYoJCh0aGlzKS5pcygnYScpICYmICQodGhpcykuYXR0cignbmFtZScpKSB7CgkJCQkgY3VyclRocmVhZC5hdHRyKCdpZCcsICd0JyskKHRoaXMpLmF0dHIoJ25hbWUnKSk7CgkJCQkgY3VyclRocmVhZC5hZGRDbGFzcygncGVuVGhyZWFkJyk7CgkJCQkgb3BQb3N0LmF0dHIoJ2lkJywgJ3AnKyQodGhpcykuYXR0cignbmFtZScpKTsKCQkJCSBvcFBvc3QuYWRkQ2xhc3MoJ3BlblBvc3QnKTsKCSAgICAgICB9CiAgICAgICB9IGVsc2UgaWYgKGN1cnJUaHJlYWQpIHsKCSAgICAgICBjdXJyVGhyZWFkLmFwcGVuZCh0aGlzKTsKICAgICAgIH0KICAgICAgIGlmICgkKHRoaXMpLmlzKCdocicpKSB7CgkgICAgICAgaWYgKG9wUG9zdCkgewoJCQkJIGN1cnJUaHJlYWQuYXBwZW5kKG9wUG9zdCk7CgkgICAgICAgfQoJICAgICAgIGNsb25lZC5hcHBlbmQoY3VyclRocmVhZCk7CgkgICAgICAgb3BQb3N0ID0gJCgnPHNwYW4+PC9zcGFuPicpOwoJICAgICAgIGN1cnJUaHJlYWQgPSAkKCc8c3Bhbj48L3NwYW4+Jyk7CiAgICAgICB9IAoJIH0KICAgICAgKTsKICAgICAgY2xvbmVkLmFwcGVuZChjdXJyVGhyZWFkKTsKICAgfQogICAKICAgZnVuY3Rpb24gcHJvY2VzcyhjbG9uZWQpIHsKICAgICAgY2xvbmVkLmFuY2hvcnMoKS5lYWNoKAoJIGZ1bmN0aW9uICgpIHsKCSAgICBbcmVmdXJsLCByZWZpZF0gPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKS5zcGxpdCgnIycpCgkgICAgaWYgKCFyZWZpZCkgewoJICAgICAgIC8vIE9wIHBvc3Qgd29ya2Fyb3VuZAoJICAgICAgIHJlZmlkID0gJCh0aGlzKS5hdHRyKCdocmVmJykuc3BsaXQoJy4nKVswXS5zcGxpdCgnLycpLnJldmVyc2UoKVswXQoJICAgIH0KCSAgICB2YXIgcGlkID0gJ3AnICsgcmVmaWQKICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdyZWZpZCcsIHBpZCkgCgkgICAgJCh0aGlzKS5hdHRyKCdyZWZ1cmwnLCByZWZ1cmwpCgkgICAgaWYoISQucmVmZXJlbmNlc1twaWRdKSB7CgkgICAgICAgJC5yZWZlcmVuY2VzW3BpZF0gPSBbXQoJICAgIH0KCSAgICAkLnJlZmVyZW5jZXNbcGlkXVskKHRoaXMpLnBpZCgpXT0kKHRoaXMpLnBpZCgpCgkgfSkKICAgICAgY2xvbmVkLm1vYXIoKS5lYWNoKAoJIGZ1bmN0aW9uICgpIHsKCSAgICAkKHRoaXMpLmh0bWwoJCh0aGlzKS50ZXh0KCkuc3BsaXQoJy4nKVswXSsnLiAnKQoJIH0pCiAgICAgIGNsb25lZC5pbWFnZSgpLmVhY2goCgkgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgYWx0c3JjID0gJCh0aGlzKS5hKCkuYXR0cignaHJlZicpCiAgICAgICAgICAgIHZhciB3ID0gJCh0aGlzKS5hdHRyKCd3aWR0aCcpCiAgICAgICAgICAgIHZhciBoID0gJCh0aGlzKS5hdHRyKCdoZWlnaHQnKQogICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2FsdHNyYycsYWx0c3JjKQogICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3N0eWxlJywnaGVpZ2h0OiAnK2grJ3B4OyB3aWR0aDonK3crJ3B4OycpCiAgICAgICAgICAgICQodGhpcykuYXR0cignYWx0c3R5bGUnLCdkaXNwbGF5OmJsb2NrO2NsZWFyOiBib3RoO21pbi1oZWlnaHQ6ICcraCsncHg7IG1pbi13aWR0aDogJyt3KydweCcpCiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQXR0cignaGVpZ2h0JykKICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVBdHRyKCd3aWR0aCcpCgkgfQogICAgICApCiAgIH0KCiAgIGpRdWVyeS5mbi5leHRlbmQoewogICAgICBhbmNob3I6CiAgICAgIGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gJCh0aGlzKS5maW5kKCdhW25hbWVdJykgICAKICAgICAgfSwKICAgICAgCiAgICAgIGltYWdlOgogICAgICBmdW5jdGlvbigpIHsKCQkJcmV0dXJuICQodGhpcykuZmluZCgnYSBpbWcnKSAgIAogICAgICB9LAogICAgICAKICAgICAgaW1hZ2VpbmZvOgogICAgICBmdW5jdGlvbigpIHsKCQkJcmV0dXJuICQodGhpcykuZmluZCgnc3Bhbi5maWxlc2l6ZScpICAgCiAgICAgIH0sCiAgICAgIAogICAgICBtb2FyOgogICAgICBmdW5jdGlvbigpIHsKCQkJcmV0dXJuICQodGhpcykuZmluZCgnc3Bhbi5vbWl0dGVkcG9zdHMnKQogICAgICB9LAogICAgICAKICAgICAgbXNnOgogICAgICBmdW5jdGlvbigpIHsKCQkJcmV0dXJuICQodGhpcykuZmluZCgnYmxvY2txdW90ZTpmaXJzdCcpCiAgICAgIH0sCiAgICAgIAogICAgICByZWZsaW5rOgogICAgICBmdW5jdGlvbigpIHsKCQkJcmV0dXJuICQodGhpcykuZmluZCgnc3Bhbi5yZWZsaW5rJykgICAKICAgICAgfSwKICAgICAgCiAgICAgIG1zZ3RpdGxlOgogICAgICBmdW5jdGlvbigpIHsKCQkJcmV0dXJuICQodGhpcykuZmluZCgnc3Bhbi5yZXBseXRpdGxlJykgICAKICAgICAgfSwKICAgICAgCiAgICAgIG1zZ3VzZXJuYW1lOgogICAgICBmdW5jdGlvbigpIHsKCQkJcmV0dXJuICQodGhpcykuZmluZCgnc3Bhbi5jb21tZW50cG9zdGVybmFtZScpICAgCiAgICAgIH0sCiAgICAgIAogICAgICBtc2dlbWFpbDoKICAgICAgZnVuY3Rpb24oKSB7CgkJCXJldHVybiAkKHRoaXMpLmZpbmQoJ3NwYW4uY29tbWVudHBvc3Rlcm5hbWUgYScpLmF0dHIoJ2hyZWYnKQogICAgICB9LAogICAgIAogICAgICBwaWQ6CiAgICAgIGZ1bmN0aW9uKCkgewoJCQlpZiAoJCh0aGlzKS5oYXNDbGFzcygncGVuUG9zdCcpKSB7CiAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLmF0dHIoJ2lkJykKCQkJfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuICQodGhpcykucGFyZW50cygnLnBlblBvc3QnKS5hdHRyKCdpZCcpICAgCgkJCX0KICAgICAgfSwKICAgICAgCiAgICAgIHRpZDoKICAgICAgZnVuY3Rpb24oKSB7CgkJCWlmICgkKHRoaXMpLmhhc0NsYXNzKCdwZW5UaHJlYWQnKSkgewogICAgICAgICAgICByZXR1cm4gJCh0aGlzKS5hdHRyKCdpZCcpCgkJCX0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLnBhcmVudHMoJy5wZW5UaHJlYWQnKS5hdHRyKCdpZCcpCgkJCX0KICAgICAgfSwKICAgICAgCiAgICAgIGFuY2hvcnM6CiAgICAgIGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gJCh0aGlzKS5maW5kKCdibG9ja3F1b3RlIGFbb25jbGlja10nKQogICAgICB9LAogICAgICAKICAgICAgdGhyZWFkczoKICAgICAgZnVuY3Rpb24oKSB7CgkJCWlmICgkKHRoaXMpLmhhc0NsYXNzKCdwZW5UaHJlYWQnKSkgewoJCQkJcmV0dXJuICQodGhpcykKCQkJfSBlbHNlIHsKCQkJCXJldHVybiAkKHRoaXMpLmZpbmQoJy5wZW5UaHJlYWQnKQoJCQl9CiAgICAgIH0sCiAgICAgIAogICAgICBwb3N0czoKICAgICAgZnVuY3Rpb24oKSB7CgkJCXJldHVybiAkKHRoaXMpLmZpbmQoJy5wZW5Qb3N0JykKICAgICAgfSwKICAgICAgCiAgICAgIHJlZmVyZW5jZXM6CiAgICAgIGZ1bmN0aW9uKHBpZCkgewoJCQlyZXR1cm4gJCh0aGlzKS5maW5kKCJhW3JlZmlkPSciK3BpZCsiJ10iKQogICAgICB9LAoKICAgICAgbWVudToKICAgICAgZnVuY3Rpb24oKSB7CgkJCXJldHVybiAkKHRoaXMpLmZpbmQoJ2Rpdi5hZG1pbmJhcicpCiAgICAgIH0sCgogICAgICBvcHRpb25zOgogICAgICBmdW5jdGlvbigpIHsKCQkJcmV0dXJuICQodGhpcykuZmluZCgnI3Blbk9wdGlvbnMnKQogICAgICB9LAogICAgICBwb3N0Zm9ybToKICAgICAgZnVuY3Rpb24gKCkgewoJCQlyZXR1cm4gJCh0aGlzKS5maW5kKCcjcG9zdGZvcm0nKQogICAgICB9LAogICAgICB1c2VyOgogICAgICBmdW5jdGlvbiAoKSB7CgkJCXJldHVybiAkKHRoaXMpLmZpbmQoJ2lucHV0W25hbWU9YWthbmVdJykKICAgICAgfSwKICAgICAgZW1haWw6IAogICAgICBmdW5jdGlvbiAoKSB7CgkJCXJldHVybiAkKHRoaXMpLmZpbmQoJ2lucHV0W25hbWU9bmFiaWtpXScpCiAgICAgIH0sCiAgICAgIHRpdGxlOiAKICAgICAgZnVuY3Rpb24gKCkgewoJCQlyZXR1cm4gJCh0aGlzKS5maW5kKCdpbnB1dFtuYW1lPWthc3VtaV0nKQogICAgICB9LAogICAgICBwb3N0bWVzc2FnZToKICAgICAgZnVuY3Rpb24gKCkgewoJCQlyZXR1cm4gJCh0aGlzKS5maW5kKCd0ZXh0YXJlYVtuYW1lPXNoYW1wb29dJykKICAgICAgfSwKICAgICAgZmlsZToKICAgICAgZnVuY3Rpb24gKCkgewoJCQlyZXR1cm4gJCh0aGlzKS5maW5kKCdpbnB1dFtuYW1lPWZpbGVdJykKICAgICAgfSwKICAgICAgY2FwdGNoYToKICAgICAgZnVuY3Rpb24gKCkgewoJCQlyZXR1cm4gJCh0aGlzKS5maW5kKCdpbnB1dFtuYW1lPWNhcHRjaGFdJykKICAgICAgfSwKICAgICAgcGFzc3dkOgogICAgICBmdW5jdGlvbiAoKSB7CgkJCXJldHVybiAkKHRoaXMpLmZpbmQoJ2lucHV0W25hbWU9cGFzc3dvcmRdJykKICAgICAgfSwKICAgICAgYWpheFRocmVhZDoKICAgICAgZnVuY3Rpb24gKHVybCwgZikgewoJCQl2YXIgZSA9ICQoJzxzcGFuLz4nKQoJCQllLmxvYWQoJ2h0dHA6Ly8nK2xvY2F0aW9uLmhvc3QgKyB1cmwgKyAnICNkZWxmb3JtJywKCQl7fSwKCQlmdW5jdGlvbiAoYSxiLGMpIHsKCQkJaWYgKGIgIT0gJ3N1Y2Nlc3MnKSB7CgkJCQlyZXR1cm4KCQkJfQoJCSAgIHZhciBjbG9uZWQgPSAkKGUpLmZpbmQoJyNkZWxmb3JtJykKCQkgICBwYXJzZShjbG9uZWQpCgkJICAgcHJvY2VzcyhjbG9uZWQpCgkJICAgZihjbG9uZWQpICAKCQl9KQogICAgICB9CiAgIH0pOwoKICAgalF1ZXJ5LnhsYXRiID0geGxhdGI7CiAgIGpRdWVyeS5yZWZlcmVuY2VzID0gW107CgogICBqUXVlcnkudWkgPSB7CiAgICAgIGFuY2hvciA6CiAgICAgIGZ1bmN0aW9uKHBpZCkgewoJCQl2YXIgcG51bSA9IHBpZC5yZXBsYWNlKCdwJywnJykKCQkJcmV0dXJuICc8YSBocmVmPSIjJytwbnVtKyciIHJlZmlkPSInK3BpZCsnIiBvbmNsaWNrPSJoaWdobGlnaHQoJytwbnVtKycpIj4mZ3Q7Jmd0OycrcG51bSsnPC9hPicKICAgICAgfSwKICAgICAgcmVmcyA6CiAgICAgIGZ1bmN0aW9uIChjb250ZW50KSB7CgkJCXJldHVybiAnPGJsb2NrcXVvdGU+PHNtYWxsPtCh0YHRi9C70LrQuCAnK2NvbnRlbnQrJzwvc21hbGw+PC9ibG9ja3F1b3RlPicKICAgICAgfSwKICAgICAgcHJldmlldyA6CiAgICAgIGZ1bmN0aW9uIChpZCx4LHksdXJsLCB1c2VfYWpheCkgewoJCQlpZigkKCcjaXMnK2lkKS5hdHRyKCdpZCcpKSB7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQkJdmFyIG9iaiA9ICQoJyMnK2lkKS5jbG9uZSgpCgkJCWlmICghb2JqLmF0dHIoJ2lkJykpIHsKCQkJCWlmKHVzZV9hamF4KSB7CgkJCQkJb2JqLmFqYXhUaHJlYWQoCgkJCQkJCXVybCwKCQkJCQkJZnVuY3Rpb24gKGUpIHsKCQkJCQkJCSQoJyNjYWNoZScpLmFwcGVuZChlKQoJCQkJCQkJJCgnI2lzJytpZCkucmVtb3ZlKCkKCQkJCQkJCWludGVsbGkoeCx5LGlkLHVybCkKCQkJCQkJfSkKCQkJCQlvYmogPSAkKCc8ZGl2PtCX0LDQs9GA0YPQt9C60LAuLi48L2Rpdj4nKQoJCQkJfSBlbHNlIHsKCQkJCQlvYmogPSAkKCc8ZGl2PtCd0LXQtNC+0YHRj9Cz0LDQtdC80L4uPC9kaXY+JykKCQkJCX0KCQkJfQoJCQlwcm9jZXNzKG9iaikgCgkJCW9iai5hbmNob3IoKS5yZW1vdmUoKQoJCQlvYmouYWRkQ2xhc3MoJ3JlcGx5JykKCQkJb2JqLmF0dHIoJ3N0eWxlJywncG9zaXRpb246YWJzb2x1dGU7IHRvcDonICsgeSArIAoJCQkJCQkncHg7IGxlZnQ6JyArIHggKyAncHg7ZGlzcGxheTpibG9jazsnKQoJCQlyZXR1cm4gb2JqCiAgICAgIH0sCiAgICAgIGNsb3NlTGluayA6IAogICAgICBmdW5jdGlvbihpZCwgdGl0bGUpIHsKCSByZXR1cm4gIls8YSBocmVmPVwiamF2YXNjcmlwdDp0b2dnbGUoXCciICsgCgkgICAgaWQgKyAiXCcpXCI+Iit0aXRsZSsiPC9hPl0iCiAgICAgIH0sCiAgICAgIHRpemVyIDogCiAgICAgIGZ1bmN0aW9uKGlkLGJvZHksaGFzSHIpIHsKCQkJcmV0dXJuICI8ZGl2IGlkPVwndGl6IiArIGlkICsgCgkJCQkiXCcgc3R5bGU9J2Rpc3BsYXk6bm9uZTsnPiIgKyBib2R5ICsgCgkJCQkoaGFzSHIgPyAiPGJyIGNsZWFyPSdib3RoJyAvPjxociAvPiIgOiAiIikgKyAKCQkJCSI8L2Rpdj4iCiAgICAgIH0gCiAgIH07CgogICByZXR1cm4gZnVuY3Rpb24gKG9iaixmKSB7CiAgICAgIGNvbnN0IGNzcyA9ICcjcGVuT3B0aW9ucyB7cGFkZGluZzogOHB4fSAjcGVuT3BydGlvbnMgdGFibGUge3dpZHRoOiAxMDAlfSAucGVuT3B0RGVzYyB7d2lkdGg6IDUwJX0gLnBlbk9wdFZhbCB7d2lkdGg6IDIwJX0gJHBlbk9wdENvbnRyb2wge30nOwoJCQogICAgICB2YXIgdGhyZWFkc1JhdyA9IG9iai5maW5kKCcjZGVsZm9ybScpOwogICAgICB2YXIgY2xvbmVkID0gdGhyZWFkc1Jhdy5jbG9uZSgpCgogICAgICBwYXJzZShjbG9uZWQpOwogICAgICBwcm9jZXNzKGNsb25lZCk7CiAgIAogICAgICAkKCdib2R5JykucHJlcGVuZCgnPGRpdiBpZD0icGVuU2V0dGluZ3MiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPjxoMSBzdHlsZT0iZmxvYXQ6bGVmdDttYXJnaW46MDtwYWRkaW5nOjA7IiBjbGFzcz0ibG9nbyI+0JTQstCwLtGHICYjODIxMjsg0J3QsNGB0YLRgNC+0LnQutC4PC9oMT48ZGl2IHN0eWxlPSJmbG9hdDpyaWdodCI+WzxhIGhyZWY9ImphdmFzY3JpcHQ6ZGIuc2F2ZUNmZyhkZWZhdWx0cyk7c2V0dGluZ3NIaWRlKCkiPtCh0L7RhdGA0LDQvdC40YLRjCDQuCDQt9Cw0LrRgNGL0YLRjDwvYT5dPC9kaXY+PGJyIGNsZWFyPSJib3JoIiAvPjxiciAvPjxocj48YnIgLz48L2Rpdj4nKTsKICAgICAgJCgnZGl2LmFkbWluYmFyJykuYXBwZW5kKCcgLSBbPGEgaHJlZj0iamF2YXNjcmlwdDpzZXR0aW5nc1Nob3coKSI+0J3QsNGB0YLRgNC+0LnQutC4PC9hPl0nKQogICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPSJjYWNoZSIgc3R5bGU9ImRpc3BsYXk6bm9uZSIgLz4nKQogICAgICBhZGRTdHlsZShjc3MpCgkJZihvYmosIGNsb25lZCkKICAgICAgdGhyZWFkc1Jhdy5yZXBsYWNlV2l0aChjbG9uZWQpOyAKICAgfTsKfS8qIGVuZCBvZiAyY2ggKi8KCnZhciBjb252ZXJnZSA9IHt9CgpqUXVlcnkuZm4uZXh0ZW5kKHsKICAgYTogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gJCh0aGlzKS5wYXJlbnRzKCdhOmZpcnN0Jyk7CiAgIH0sIAogICBvazogZnVuY3Rpb24oZikgewogICAgICB0aGlzLnJlYWR5KAogICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGNvbnZlcmdlID0gZHZhY2goKQoJICAgIGNvbnZlcmdlKCQodGhpcyksIGYpCiAgICAgICAgIH0KICAgICAgKQoKICAgfQp9KQ==',
	'data:text/javascript;base64,LyoKICogdmltOiB0cz0zIHN0cz0zIGNpbmRlbnQgZXhwYW5kdGFiCiAqIGpxdWVyeS5pbWdib2FyZCAtIGpxdWVyeSBleHRlbnNpb25zIGZvciBpbWFnZWJvYXJkcy4KICogCiAqIENvcHlyaWdodCAoYykgMjAwOSwgYW5vbnltb3VzCiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIAogKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQKICogbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSAKICogbWV0OgogKiAgICAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodAogKiAgICAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCiAqICAgICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0CiAqICAgICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUKICogICAgICAgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi4KICogICAgICogTmVpdGhlciB0aGUgbmFtZSBvZiB0aGUgYW5vbnltb3VzIG5vciB0aGUgbmFtZXMgb2YgaXRzIGNvbnRyaWJ1dG9ycyAKICogICAgICAgbWF5IGJlIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbSB0aGlzIAogKiAgICAgICBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi4KICogCiAqIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgYW5vbnltb3VzICcnQVMgSVMnJyBBTkQgQU5ZICBFWFBSRVNTIE9SIAogKiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTCiAqIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIAogKiBJTiBOTyBFVkVOVCBTSEFMTCBhbm9ueW1vdXMgQkUgTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgCiAqIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVAogKiBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsCiAqIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5ECiAqIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiAKICogVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UKICogT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS4KICovCgpmdW5jdGlvbiBpc0VtcHR5KG9iaikgewogICAgZm9yKHZhciBwcm9wIGluIG9iaikgewogICAgICAgIGlmKG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSkKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRydWU7Cn0KCnZhciBkZWZhdWx0cyA9IHsKICAgZm9yd2FyZFJlZmVyZW5jZXM6IHsKCQl2OiBbdHJ1ZSwgJ9Ca0LDRgNGC0LAg0LTQuNGB0LrRg9GB0YHQuNC4J10sCgkJYXNEb2c6IFt0cnVlLCAn0JIg0LLQuNC00LUg0YHQvtCx0LDQutC4J10KCX0sCiAgIHVuZm9sZEltYWdlczogW3RydWUsJ9Cg0LDQt9Cy0LXRgNGC0YvQstCw0YLRjCDQuNC30L7QsdGA0LDQttC10L3QuNGPJ10sCiAgIHVuZm9sZFRocmVhZHNCdG46IFtmYWxzZSwgJ9Ca0L3QvtC/0LrQsCDRgNCw0LfQstC10YDRgtGL0LLQsNC90LjRjyDRgtGA0LXQtNCwJ10sCiAgIGludGVsbGlTZW5zZTogewogICAgICB2OiBbdHJ1ZSwnPGgzPkludGVsbGlzZW5zZTwvaDM+J10sCgkJYWpheDogW3RydWUsICfQkNCy0YLQvtC80LDRgtC40YfQtdGB0LrQuCDQv9C+0LTQs9GA0YPQttCw0YLRjCDQv9GA0L7Qv9GD0YnQtdC90L3Ri9C1INGB0L7QvtCx0YnQtdC90LjRjyddLAogICAgICBmYWxsYmFjazogWzEwMCwn0JfQsNC80LXQtNC70LXQvdC40LUg0L3QsCDQvtGC0L/QsNC00LDQvdC40LUnXSwKICAgICAgcmFpc2V1cDogWzAsJ9CX0LDQvNC10LTQu9C10L3QuNC1INC90LAg0YHRgNCw0LHQsNGC0YvQstCw0L3QuNC1J10KICAgfSwKICAgc2FnZTogewogICAgICB2OiBbdW5kZWZpbmVkLCAnPGgzPtCh0LDQttCwPC9oMz4nXSwKICAgICAgc2FnZU1hbjogW2ZhbHNlLCAn0K8gJiM4MjEyOyDRh9C10LvQvtCy0LXQui08Yj7QodCQ0JbQkDwvYj4nXSwKICAgICAgY2Fwc0JvbGQ6IFtmYWxzZSwgJzxiPtCa0JDQn9Ch0JHQntCb0JQ8L2I+J10sCiAgICAgIGluQWxsRmllbGRzOiBbZmFsc2UsICfQodCw0LbQsCDQuNC00LXRgiDQstC+INCy0YHQtSDQv9C+0LvRjyddLAogICAgICBidXR0b246IFt0cnVlLCAn0JrQvdC+0L/QutCwINGB0LDQttC4J10KICAgfSwKICAgaGlkaW5nOiB7CiAgICAgIHY6IFt1bmRlZmluZWQsICc8aDM+0KHQutGA0YvRgtC40LU8L2gzPiddLAogICAgICB0aHJlYWRzOiBbdHJ1ZSwn0KHQutGA0YvRgtC40LUg0L/QvtGC0L7QutC+0LInXSwKCQljaXRlTGVuZ3RoOiBbMTUsJ9Cf0L7QutCw0LfRi9Cy0LDRgtGMINGG0LjRgtCw0YLRgyDQuNC3INC+0L8t0L/QvtGB0YLQsCwg0LHRg9C60LInXSwKICAgICAgcG9zdHM6IFtmYWxzZSwn0KHQutGA0YvRgtC40LUg0YHQvtC+0LHRidC10L3QuNC5J10sCiAgICAgIGdvb2RTdGVhbHRoOiBbZmFsc2UsJ9CQ0LrQutGD0YDQsNGC0L3QviDRgdC60YDRi9Cy0LDRgtGMJ10KICAgfSwKICAgc3RhdGU6IHsKICAgICAgdjogW3VuZGVmaW5lZCwnPGgzPtCl0YDQsNC90LXQvdC40LUg0LTQsNC90L3Ri9GFPC9oMz4nXSwgICAKICAgICAgY29uc3RQYXNzd2Q6IFsnJywgJ9Cf0L7RgdGC0L7Rj9C90L3Ri9C5INC/0LDRgNC+0LvRjCddLAogICAgICBleHBpcmF0aW9uVGltZTogWzMsJ9Cl0YDQsNC90LjRgtGMINC40L3RhNC+0YDQvNCw0YbQuNGOINC+INGB0LrRgNGL0YLRi9GFINGC0YDQtdC00LDRhSwg0LTQvS4nXQogICB9LAogICBjZW5zb3JlOiB7CiAgICAgIHY6IFtmYWxzZSwgJzxoMz7QpNC40LvRjNGC0YDQsNGG0LjRjzwvaDM+J10sCiAgICAgIHVzZXJuYW1lOiBbJycsICfQmNC80Y8g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPJ10sCiAgICAgIHRpdGxlOiBbJycsICfQl9Cw0LPQvtC70L7QstC+0LonXSwKICAgICAgZW1haWw6IFsnJywgJ9Ct0LvQtdC60YLRgNC+0L/QvtGH0YLQsCAo0YHQsNC20LApJ10sCiAgICAgIG1zZzogWycnLCAn0KLQtdC60YHRgiDRgdC+0L7QsdGJ0LXQvdC40Y8nXSwKICAgICAgdG90YWw6IFsnJywgJ9CS0YHRkSDRgdC+0L7QsdGJ0LXQvdC40LUnXQogICB9Cn0KCnZhciBkYiA9IHsKICAgY29uZmlnOnsKICAgfSwKICAgaGlkZGVuOiB7CiAgIH0sCiAgIGdldHZhbDoKICAgZnVuY3Rpb24gKHBmeCxvYmopIHsKICAgICAgdmFyIG8gPSBvYmoKICAgICAgZm9yKHZhciBpIGluIHBmeCkgewoJIG8gPSBvW3BmeFtpXV0KCSBpZighbykgewoJICAgIHJldHVybiB1bmRlZmluZWQ7CgkgfQogICAgICB9CiAgICAgIHJldHVybiBvCiAgIH0sCiAgIHNldHZhbDoKICAgZnVuY3Rpb24gKHBmeCxvLHYpIHsKICAgICAgdmFyIGhkID0gcGZ4LnNsaWNlKDAsMSlbMF0KICAgICAgdmFyIHRsID0gcGZ4LnNsaWNlKDEpCiAgICAgIGlmKHRsWzBdKSB7CgkgaWYgKCFvW2hkXSkgewoJICAgIG9baGRdID0ge30KCSB9CgkgZGIuc2V0dmFsKHRsLG9baGRdLHYpCiAgICAgIH0gZWxzZSB7Cgkgb1toZF0gPSB2CiAgICAgIH0KICAgfSwKICAgZ2V0aW5wOgogICBmdW5jdGlvbiAoa2V5KSB7CiAgICAgIHZhciBlID0gJCgnI3BlblNldCcgKyBrZXkpCiAgICAgIHN3aXRjaCAoZS5hdHRyKCd0eXBlJykpIHsKICAgICAgY2FzZSAnY2hlY2tib3gnOgogICAgICAgICByZXR1cm4gZS5hdHRyKCdjaGVja2VkJykgPyB0cnVlIDogZmFsc2U7CiAgICAgICAgIGJyZWFrOwogICAgICBjYXNlICd0ZXh0JzoKICAgICAgICAgcmV0dXJuICBlLmF0dHIoJ3ZhbHVlJyk7CiAgICAgICAgIGJyZWFrOwogICAgICB9CiAgIH0sCiAgIHNldGlucDoKICAgZnVuY3Rpb24gKGtleSx2YWwpIHsKICAgICAgdmFyIGUgPSAkKCcjcGVuU2V0JyArIGtleSkKICAgICAgc3dpdGNoICh0eXBlb2YgdmFsKSB7CiAgICAgIGNhc2UgJ2Jvb2xlYW4nOgoJIGlmICh2YWwpIHsKCSAgICBlLmF0dHIoJ2NoZWNrZWQnLCdjaGVja2VkJykKCSB9IGVsc2UgewoJICAgIGUucmVtb3ZlQXR0cignY2hlY2tlZCcpCgkgfQogICAgICAgICBicmVhazsKICAgICAgY2FzZSAnbnVtYmVyJzoKICAgICAgY2FzZSAnc3RyaW5nJzoKICAgICAgICAgcmV0dXJuICBlLmF0dHIoJ3ZhbHVlJywgdmFsKTsKICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgfSwKICAgX19pdGVyOiAKICAgZnVuY3Rpb24gKGxpc3QsIGYsIHApIHsKICAgICAgZm9yICh2YXIga2V5IGluIGxpc3QpIHsKCSB2YXIgcGZ4ID0gcC5zbGljZSgpOyAvKiBzbGljZSBpcyBhIHN0dXBpZCBhcnJheSBjb3B5IGluIGpzICovCgkgcGZ4LnB1c2goa2V5KQoJIGlmIChsaXN0W2tleV0gaW5zdGFuY2VvZiBBcnJheSkgewoJICAgIGYobGlzdFtrZXldLHBmeCkKCSB9IGVsc2UgewoJICAgIHRoaXMuX19pdGVyKGxpc3Rba2V5XSxmLHBmeCkKCSB9CiAgICAgIH0KICAgfSwKICAgbG9hZENmZzogCiAgICAgIGZ1bmN0aW9uIChkZWZzKSB7CgkgdmFyIGdjZmcgPSAkLmV2YWxKU09OKCQuY29va2llKCdwZW5DZmdHbG9iYWwnKSkgfHwge307CgkgdmFyIGxjZmcgPSAkLmV2YWxKU09OKCQuY29va2llKCdwZW5DZmcnKSkgfHwge307CiAgICAgICAgIHRoaXMuaGlkZGVuID0gJC5ldmFsSlNPTigkLmNvb2tpZSgncGVuSGlkZGVuJykpIHx8IHt9OwoJIHZhciBpID0gMDsKCSB2YXIgc3YgPSB0aGlzLnNldHZhbDsKCSB2YXIgY2ZnID0ge307CgkgdGhpcy5fX2l0ZXIoCgkgICAgZGVmcywKCSAgICBmdW5jdGlvbiAodixwZngpIHsKCSAgICAgICB2YXIgbnYgPSBbXQoJICAgICAgIG52WzBdID0gdlswXQoJICAgICAgIG52WzFdID0gdlsxXQoJICAgICAgIHN2KHBmeCwgY2ZnLCBudikKCSAgICAgICBudi5wdXNoKGkpOwoJICAgICAgIGlmICh0eXBlb2YgbGNmZ1tpXSAhPSAndW5kZWZpbmVkJykgewoJCSAgbnZbMF0gPSBsY2ZnW2ldCgkJICBudi5wdXNoKCdsb2NhbCcpCgkgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZ2NmZ1tpXSAhPSAndW5kZWZpbmVkJykgewoJCSAgbnZbMF0gPSBnY2ZnW2ldCgkgICAgICAgfQoJICAgICAgIGkrKwoJICAgIH0sCgkgICAgW10KCSApCgkgdGhpcy5jb25maWcgPSBjZmcKICAgICAgfSwKICAgc2F2ZUNmZzogCiAgICAgIGZ1bmN0aW9uIChkZWZzKSB7CgkJCXZhciBsY2ZnID0gW107CgkJCXZhciBnY2ZnID0gW107CgkJCWRiLl9faXRlcigKCQkJCWRiLmNvbmZpZywKCQkJCWZ1bmN0aW9uICh2LHBmeCkgewoJCQkJCXZhciBpdiA9IGRiLmdldGlucCh2WzJdKQoJCQkJCXZhciBkdiA9IGRiLmdldHZhbChwZngsZGVmcylbMF0KCQkJCQlpZigkKCcjcGVuU2V0TG9jJyArIHZbMl0pLmF0dHIoJ2NoZWNrZWQnKSA9PSAnY2hlY2tlZCcpIHsKCQkJCQkJbGNmZ1t2WzJdXSA9IGl2CgkJCQkJfSBlbHNlIHsKCQkJCQkJaWYoaXYgIT0gZHYpIHsKCQkJCQkJCWdjZmdbdlsyXV0gPSBpdgoJCQkJCQkJbGNmZy5zcGxpY2UodlsyXSwgMSkKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCWdjZmcuc3BsaWNlKHZbMl0sIDEpCgkJCQkJCQlsY2ZnLnNwbGljZSh2WzJdLCAxKQoJCQkJCQl9CgkJCQkJfQoJCQkJfSwKCQkJCVtdCgkJCSkKCQkJaWYoIWlzRW1wdHkoZ2NmZykpIHsKICAgICAgICAgICAgJC5jb29raWUoJ3BlbkNmZ0dsb2JhbCcsICQudG9KU09OKGdjZmcpLCB7cGF0aDogJy8nLCBleHBpcmVzOiA5MDAwfSkKCQkJfSBlbHNlIHsKCQkJCS8qIE5lZ2F0aXZlIGV4cGlyYXRpb24gdGltZSBkZWxldGVzIGNvb2tpZSAqLwoJCQkJJC5jb29raWUoJ3BlbkNmZ0dsb2JhbCcsICcnLCB7cGF0aDogJy8nLCBleHBpcmVzOiAtMX0pCgkJCX0KCQkJaWYoIWlzRW1wdHkobGNmZykpIHsKICAgICAgICAgICAgJC5jb29raWUoJ3BlbkNmZycsICQudG9KU09OKGxjZmcpLCB7ZXhwaXJlczogOTAwMH0pCgkJCX0gZWxzZSB7CgkJCQkvKiBIZXJlIHRvbyAqLwoJCQkJJC5jb29raWUoJ3BlbkNmZycsICcnLCB7ZXhwaXJlczogLTF9KQoJCQl9CiAgICAgIH0sCiAgIHNhdmVTdGF0ZToKICAgICAgZnVuY3Rpb24gKCkgewogICAgICAgICB2YXIgb3V0ID0ge307CiAgICAgICAgIHZhciB0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCkKICAgICAgICAgdmFyIHByZXNpc3RlbnRIaWRkZW4gPSAkKCcucGVuVGhyZWFkOnZpc2libGUgLnBlblBvc3Q6aGlkZGVuLCAucGVuVGhyZWFkOmhpZGRlbicpOwogICAgICAgICBwcmVzaXN0ZW50SGlkZGVuLmVhY2goCiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgb3V0WyQodGhpcykuYXR0cignaWQnKV0gPSB0CiAgICAgICAgICAgIH0KICAgICAgICAgKQogICAgICAgICBmb3IgKHZhciBpIGluIHRoaXMuaGlkZGVuKSB7CiAgICAgICAgICAgIGlmICghb3V0W2ldICYmICh0IC0gdGhpcy5oaWRkZW5baV0pIDwgdGhpcy5jb25maWcuc3RhdGUuZXhwaXJhdGlvblRpbWVbMF0qODY0MDAgJiYgJCgnIycraSkuaXMoJzpoaWRkZW4nKSkgewogICAgICAgICAgICAgICBvdXRbaV0gPSB0aGlzLmhpZGRlbltpXQogICAgICAgICAgICB9CiAgICAgICAgIH0KICAgICAgICAgdGhpcy5oaWRkZW4gPSBvdXQ7CiAgICAgICAgICQuY29va2llKCdwZW5IaWRkZW4nLCQudG9KU09OKHRoaXMuaGlkZGVuKSx7ZXhwaXJlczogOTAwMH0pOwogICAgICB9LAogICBfX2Zvcm06ICIiLAogICBnZW5Gb3JtOgogICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgIHZhciBvYmogPSB0aGlzOwogICAgICAgICB2YXIgZ2VuZiA9CiAgICAgICAgICAgIGZ1bmN0aW9uIChkZXNjLCBrZXksIHZhbCwgbG9jLCBhZGQpIHsKCSAgICAgICB2YXIgbG9jY2hrID0gJzxpbnB1dCB0eXBlPSJjaGVja2JveCIgJyArCgkJICAobG9jID8gJ2NoZWNrZWQ9ImNoZWNrZWQiJyA6ICcnKSArCgkJICAnaWQ9InBlblNldExvYycra2V5KyciIC8+INCb0L7QutCw0LvRjNC90L4nCgkgICAgICAgdmFyIGRlZmJ0biA9ICc8aW5wdXQgdHlwZT0iYnV0dG9uIiB2YWx1ZT0i0J/QviDRg9C80L7Qu9GH0LDQvdC40Y4iIG9uY2xpY2s9InNldHRpbmdzRGVmYXVsdChkZWZhdWx0cyxcJycra2V5KydcJykiIC8+JwoJICAgICAgIHZhciByZXN1bHQgPSAiIjsKICAgICAgICAgICAgICAgc3dpdGNoICh0eXBlb2YgdmFsKSB7CiAgICAgICAgICAgICAgIGNhc2UgJ2Jvb2xlYW4nOgogICAgICAgICAgICAgICAgICByZXN1bHQgPSAnPGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0icGVuU2V0JyArIGtleSArICciICcgKyAKICAgICAgICAgICAgICAgICAgICAgICAgICh2YWwgPyAnY2hlY2tlZD0iY2hlY2tlZCInIDogJyAnKSArICc+JwogICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzoKICAgICAgICAgICAgICAgY2FzZSAnc3RyaW5nJzoKICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gJzxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0icGVuU2V0JyArIGtleSArICciICcgKyAKICAgICAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlPSInICsgdmFsICsgJyI+JwogICAgICAgICAgICAgICBicmVhazsKCSAgICAgICBkZWZhdWx0OgoJCSAgbG9jY2hrID0gJyAnOwoJCSAgZGVmYnRuPSAnICc7CgkJICBicmVhazsKICAgICAgICAgICAgfQoJICAgICAgIHJldHVybiAnPHRhYmxlIHdpZHRoPSIxMDAlIj48dHI+PHRkIGNsYXNzPSJwZW5PcHREZXNjIj4nICsKCQkgIGRlc2MgKyAnPC90ZD48dGQgY2xhc3M9InBlbk9wdFZhbCI+JyArIAoJCSAgcmVzdWx0ICsgJzwvdGQ+PHRkIGNsYXNzPSJwZW5PcHRMb2MiPicgKyAKCQkgIGxvY2NoayArICc8L3RkPjx0ZCBjbGFzcz0icGVuT3B0RGVmIj4nICsKCSAgICAgICAgICBkZWZidG4gKyAnPC90ZD48dHI+PHRkIGNvbHNwYW49IjQiPicgKwoJCSAgYWRkICsgJzwvdGQ+PC90cj48L3RhYmxlPicKICAgICAgICAgICAgfQogICAgICAgICB2YXIgd2Fsa19uX2dlbiA9CiAgICAgICAgICAgIGZ1bmN0aW9uIChsaXN0KSB7CiAgICAgICAgICAgICAgIHZhciBvdXQgPSAiIjsKICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGxpc3QpIHsKICAgICAgICAgICAgICAgICAgaWYgKGtleSA9PSAndicpIHsKICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBpZiAobGlzdFtrZXldIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IGdlbmYobGlzdFtrZXldWzFdLCBsaXN0W2tleV1bMl0sIGxpc3Rba2V5XVswXSwgbGlzdFtrZXldWzNdLCAnJykKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgb3V0ICs9IGdlbmYobGlzdFtrZXldLnZbMV0sIGxpc3Rba2V5XS52WzJdLCBsaXN0W2tleV0udlswXSwgbGlzdFtrZXldLnZbM10sIHdhbGtfbl9nZW4obGlzdFtrZXldKSkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIHJldHVybiBvdXQKICAgICAgICAgICAgfQoKICAgICAgICAgaWYgKCF0aGlzLl9fZm9ybSkgewogICAgICAgICAgICB0aGlzLl9fZm9ybSA9IHdhbGtfbl9nZW4oZGIuY29uZmlnKTsKCSAgICB0aGlzLl9fZm9ybSArPSAnPGhyLz48aHIvPicKICAgICAgICAgfSAKICAgICAgICAgcmV0dXJuIHRoaXMuX19mb3JtCiAgICAgIH0KfQoKZnVuY3Rpb24gc2V0dGluZ3NTaG93KCkgewogICB2YXIgZSA9ICQoJyNwZW5TZXR0aW5ncycpOwogICBpZiAoIWUuZmluZCgndGFibGUnKS5pcygndGFibGUnKSkgewogICAgICBlLmFwcGVuZChkYi5nZW5Gb3JtKCkpCiAgIH0KICAgZS5zaG93KCk7Cn0KCmZ1bmN0aW9uIHNldHRpbmdzSGlkZSgpIHsKICAgJCgnI3BlblNldHRpbmdzJykuaGlkZSgpOwp9CgpmdW5jdGlvbiBzZXR0aW5nc1RvZ2dsZShlKSB7CiAgICQoZSkucGFyZW50cygndGFibGU6Zmlyc3QnKS5maW5kKCd0cjpsYXN0JykudG9nZ2xlKCkKfQoKZnVuY3Rpb24gc2V0dGluZ3NEZWZhdWx0KGRlZnMsc2lkKSB7CiAgIGRiLl9faXRlcigKICAgICAgZGIuY29uZmlnLAogICAgICBmdW5jdGlvbiAodixwZngpIHsKCSBpZiAodlsyXSA9PSBzaWQpIHsKCSAgICBkYi5zZXRpbnAoc2lkLCBkYi5nZXR2YWwocGZ4LCBkZWZzKVswXSkKCSB9CiAgICAgIH0sCiAgICAgIFtdKQp9',
	'data:text/javascript;base64,LyoKICogdmltOiB0cz0zIHN0cz0zIGNpbmRlbnQgZXhwYW5kdGFiCiAqCiAqIHBlbm9jaGthIC0gVmFyaW91cyBleHRlbnNpb25zIGZvciBpbWFnZWJvYXJkcywKICogICAgICAgICAgICB3aGljaCBwb3dlcmVkIGJ5IGpxdWVyeS4KICoKICogQ29weXJpZ2h0IChjKSAyMDA5LCBhbm9ueW1vdXMKICogQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogCiAqIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dAogKiBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIAogKiBtZXQ6CiAqICAgICAqIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0CiAqICAgICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci4KICogICAgICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQKICogICAgICAgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZQogKiAgICAgICBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLgogKiAgICAgKiBOZWl0aGVyIHRoZSBuYW1lIG9mIHRoZSBhbm9ueW1vdXMgbm9yIHRoZSBuYW1lcyBvZiBpdHMgY29udHJpYnV0b3JzIAogKiAgICAgICBtYXkgYmUgdXNlZCB0byBlbmRvcnNlIG9yIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tIHRoaXMgCiAqICAgICAgIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLgogKiAKICogVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBhbm9ueW1vdXMgJydBUyBJUycnIEFORCBBTlkgIEVYUFJFU1MgT1IgCiAqIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEIFdBUlJBTlRJRVMKICogT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gCiAqIElOIE5PIEVWRU5UIFNIQUxMIGFub255bW91cyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCAKICogSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUCiAqIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwKICogREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQKICogT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIAogKiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRQogKiBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLgogKi8KCi8qIFBlbm9jaGthIGFwcGxpY2F0aW9uIGZ1bmN0aW9uIHZhcmlhYmxlICovCnZhciBhcHBseV9tZSA9IHt9IAoKLyogKi8KLyogRklYTUUgMS4gQXBwZW5kIG9ubHkgd2hlcmUgbmVlZGVkCiAgICAgICAgIDIuIFRvZ2dsaW5nIGRvZXNuJ3Qgd29yayAgKi8KZnVuY3Rpb24gdG9nZ2xlUmVwbHlGb3JtKGlkKSB7CiAgIGlmKCQoJyNwb3N0Rm9ybScraWQpLmF0dHIoJ2lkJykpIHsKICAgICAgJCgnI3Bvc3RGb3JtJytpZCkucmVtb3ZlKCkKICAgfQogICB2YXIgZnJtID0gJCgnYm9keScpLnBvc3Rmb3JtKCkuY2xvbmUoKTsKICAgZnJtLmF0dHIoJ2lkJywgJ3Bvc3RGb3JtJyArIGlkKTsKICAgJCgnIycraWQpLm1vYXIoKS5hcHBlbmQoZnJtKQp9CgovKiAqLwpmdW5jdGlvbiB1bmZvbGQoaWQpIHsKICAgdmFyIG8gPSAkKCcjJytpZCkKCXZhciB1cmwgPSBvLnJlZmxpbmsoKS5maW5kKCdhJykuYXR0cignaHJlZicpLnNwbGl0KCcjJylbMF0KCW8ubW9hcigpLnRleHQoJ9CX0LDQs9GA0YPQt9C60LAg0YLRgNC10LTQsC4uLicpCgl2YXIgY2FjaGVkID0gJCgnI2NhY2hlICMnK2lkKQoJaWYoY2FjaGVkLmF0dHIoJ2lkJykpIHsKCQlzZXRUaW1lb3V0KAoJCQlmdW5jdGlvbiAoKSB7CgkJCQlhcHBseV9tZSh1bmRlZmluZWQsY2FjaGVkKQoJCQkJY2FjaGVkLnJlZmxpbmsoKS5hZnRlcignWzxhIGhyZWY9IicgKyB1cmwgKyAnIj7QntGC0LLQtdGCPC9hPl0nKQoJCQkJby5yZXBsYWNlV2l0aChjYWNoZWQpCgkJCX0sIDApCgl9IGVsc2UgewoJCW8uYWpheFRocmVhZCgKCQkJdXJsLAoJCQlmdW5jdGlvbihlKSB7CgkJCQl2YXIgdWUgPSBlLmZpbmQoJyMnK2lkKQoJCQkJYXBwbHlfbWUodW5kZWZpbmVkLHVlKQoJCQkJdWUucmVmbGluaygpLmFmdGVyKCdbPGEgaHJlZj0iJyArIHVybCArICciPtCe0YLQstC10YI8L2E+XScpCgkJCQlvLnJlcGxhY2VXaXRoKHVlKQogICAgICB9KQoJfQp9CgovKiAqLwpmdW5jdGlvbiB0b2dnbGUoaWQpIHsKICAgJCgnIycraWQpLnRvZ2dsZSgpCiAgICQoJyN0aXonK2lkKS50b2dnbGUoKSAKICAgZGIuc2F2ZVN0YXRlKCkKfQoKLyogKi8KZnVuY3Rpb24gc3dhcEF0dHIob2JqLCBhMSwgYTIpIHsKICAgdmFyIHQgPSBvYmouYXR0cihhMSkKICAgb2JqLmF0dHIoYTEsIG9iai5hdHRyKGEyKSkKICAgb2JqLmF0dHIoYTIsIHQpCn0KCmZ1bmN0aW9uIHJlZm9sZChpZCkgeyAKCSQoIiNpdGl6IitpZCkuc2hvdygpOwogICB2YXIgb2JqID0gJCgnIycraWQpLmltYWdlKCkKICAgdmFyIG9mcyA9IG9iai5vZmZzZXQoKTsKCWlmKCFvYmouYXR0cignb25sb2FkJykpIHsKCQlvYmouYXR0cignb25sb2FkJywgJyQoIiNpdGl6JytpZCsnIikuaGlkZSgpJykKCQkvKiBUT0RPOiBNb3ZlIHRoaXMgSFRNTCB0byBqUXVlcnkuaW1nYm9hcmQudWkgKi8KCQlvYmoucGFyZW50cygnYScpLnByZXBlbmQoJzxkaXYgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlO3RvcDonK29mcy50b3ArJ3B4O2xlZnQ6JytvZnMubGVmdCsncHg7ei1pbmRleDo5OTtiYWNrZ3JvdW5kLWNvbG9yOm1hcm9vbjtjb2xvcjp3aGl0ZTtwYWRkaW5nOjJweDtmb250LXdlaWdodDpib2xkOyIgaWQ9Iml0aXonK2lkKyciPtCX0LDQs9GA0YPQt9C60LAuLi48L2Rpdj4nKQoJfSBlbHNlIHsKCQlvYmouYXR0cignb25sb2FkJywgJzEnKQoJCSQoIiNpdGl6IitpZCkucmVtb3ZlKCkKCX0KICAgc3dhcEF0dHIob2JqLCAnc3R5bGUnLCAnYWx0c3R5bGUnKQogICBzd2FwQXR0cihvYmosICdzcmMnLCAnYWx0c3JjJykKICAgcmV0dXJuIGZhbHNlOwp9CgovKiAqLwpmdW5jdGlvbiBhcHBseV9pc2Vuc2UoYSkgewogICBpZighZGIuY29uZmlnLmludGVsbGlTZW5zZS52WzBdKSB7CiAgICAgIHJldHVybgogICB9CiAgIGEuaG92ZXIoCiAgICAgIGZ1bmN0aW9uKGV2dCkgeyAvLyBvdmVyCgkgaW50ZWxsaSgKCSAgICBldnQucGFnZVgrMTAsIAoJICAgIGV2dC5wYWdlWSsxMCwgCgkgICAgYS5hdHRyKCdyZWZpZCcpLAoJICAgIGEuYXR0cigncmVmdXJsJykKCSApCiAgICAgIH0sCiAgICAgIGZ1bmN0aW9uKGV2dCkgeyAvLyBvdXQKCSBvdXRlbGxpKGEuYXR0cigncmVmaWQnKSkKICAgICAgfQogICApCn0KCnZhciB6ID0gMDsKdmFyIGlzdCA9IHt9OwoKZnVuY3Rpb24gaW50ZWxsaSh4LHksaWQsdXJsKSB7CiAgIGNsZWFyVGltZW91dChpc3RbaWRdKQoJaXN0W2lkXSA9IHNldFRpbWVvdXQoCgkJZnVuY3Rpb24gKCkgewoJCQl2YXIgb2JqID0gJC51aS5wcmV2aWV3KGlkLHgseSx1cmwsCgkJCQkJCQkJCQkgIGRiLmNvbmZpZy5pbnRlbGxpU2Vuc2UuYWpheFswXSkKCQkJaWYob2JqKSB7CgkJCQlhcHBseV9tZSh1bmRlZmluZWQsb2JqKSAKCQkJfSBlbHNlIHsKCQkJCXJldHVybgoJCQl9CgkJCW9iai5hdHRyKCdpZCcsJ2lzJytpZCk7CgkJCW9iai5hdHRyKCdyZWZpZCcsIGlkKTsKCQkJYXBwbHlfaXNlbnNlKG9iaikKCQkJb2JqLmNzcygnei1pbmRleCcsIHorKyk7CgkJCSQoJ2JvZHknKS5wcmVwZW5kKG9iaik7CgkJfSwKCQlkYi5jb25maWcuaW50ZWxsaVNlbnNlLnJhaXNldXBbMF0pCn0KCmZ1bmN0aW9uIG91dGVsbGkoaWQpIHsKCWNsZWFyVGltZW91dChpc3RbaWRdKQogICBpc3RbaWRdID0gc2V0VGltZW91dCgKICAgICAgZnVuY3Rpb24gKCkgewoJICQoJyNpcycraWQpLnJlbW92ZSgpCiAgICAgIH0sIAogICAgICBkYi5jb25maWcuaW50ZWxsaVNlbnNlLmZhbGxiYWNrWzBdKQp9CgpmdW5jdGlvbiBzYWdlKGVudikgewogICBpZighZW52KSB7CiAgICAgIGVudiA9ICQoJ2JvZHknKQogICB9CiAgIGVudi5lbWFpbCgpLnZhbCgnc2FnZScpCiAgIGlmIChkYi5jb25maWcuc2FnZS5pbkFsbEZpZWxkc1swXSkgeyAKICAgICAgZW52LnVzZXIoKS52YWwoJ3NhZ2UnKQogICAgICBlbnYudGl0bGUoKS52YWwoJ3NhZ2UnKSAKICAgICAgZGIuY29uZmlnLnNhZ2UuY2Fwc0JvbGRbMF0gJiYKCSBlbnYucG9zdG1lc3NhZ2UoKS52YWwoJyoqU0FHRSoqJykKICAgfQp9CgphcHBseV9tZSA9IGZ1bmN0aW9uIChlbnYsIG1lc3NhZ2VzKSB7CiAgIG1lc3NhZ2VzLnBvc3RzKCkuZWFjaCgKICAgICAgZnVuY3Rpb24gKCkgewoJCQl2YXIgb2JqID0gJCh0aGlzKQogICAgICAgICB2YXIgcGlkID0gJCh0aGlzKS5waWQoKQoJCQlpZihkYi5jb25maWcuaGlkaW5nLnBvc3RzWzBdKSB7CgkJCQlvYmoucmVmbGluaygpLmFwcGVuZCgnICcgKyAkLnVpLmNsb3NlTGluayhwaWQsICdYJykpCgkJCQlpZighZGIuY29uZmlnLmhpZGluZy5nb29kU3RlYWx0aFswXSkgewoJCQkJCXZhciB0eHQgPSAn0J/QvtGB0YIgJyArIHBpZC5yZXBsYWNlKCdwJywn4oSWJykgKyAKCQkJCQkJJyDRgdC60YDRi9GCLiBbPGEgaHJlZj0iamF2YXNjcmlwdDp0b2dnbGUoXCcnK3BpZCsnXCcpIj7Qn9C+0LrQsNC30LDRgtGMPC9hPl0nOwoJCQkJCW9iai5iZWZvcmUoJC51aS50aXplcihwaWQsIHR4dCwgZmFsc2UpKQoJCQkJfQoJCQl9CgkJCS8qIENlbnNvcmUgKi8KCQkJaWYoZGIuY29uZmlnLmNlbnNvcmUudlswXSkgewoJCQkJdmFyIGNlbnNmID0gZmFsc2U7CgkJCQkvKmNlbnNmID0gY2Vuc2YgfHwgZGIuY29uZmlnLmNlbnNvcmUudXNlcm5hbWVbMF0gJiYKCQkJCQlvYmoubXNndXNlcm5hbWUoKS5zZWFyY2goZGIuY29uZmlnLmNlbnNvcmUudXNlcm5hbWVbMF0pCgkJCQljZW5zZiA9IGNlbnNmIHx8IGRiLmNvbmZpZy5jZW5zb3JlLnRpdGxlWzBdICYmCgkJCQkJb2JqLm1zZ3RpdGxlKCkuc2VhcmNoKGRiLmNvbmZpZy5jZW5zb3JlLnRpdGxlWzBdKQoJCQkJY2Vuc2YgPSBjZW5zZiB8fCBkYi5jb25maWcuY2Vuc29yZS5lbWFpbFswXSAmJgoJCQkJCW9iai5tc2dlbWFpbCgpLnNlYXJjaChkYi5jb25maWcuY2Vuc29yZS5lbWFpbFswXSkKCQkJCWNlbnNmID0gY2Vuc2YgfHwgZGIuY29uZmlnLmNlbnNvcmUubXNnWzBdICYmCgkJCQkJb2JqLm1zZygpLnNlYXJjaChkYi5jb25maWcuY2Vuc29yZS5tc2dbMF0pCgkJCQljZW5zZiA9IGNlbnNmIHx8IGRiLmNvbmZpZy5jZW5zb3JlLnRvdGFsWzBdICYmCgkJCQkJb2JqLnRleHQoKS5zZWFyY2goZGIuY29uZmlnLmNlbnNvcmUudG90YWxbMF0pICovCgkJCQlpZihjZW5zZikgewoJCQkJCQlkYi5oaWRkZW5bcGlkXT0xCgkJCQl9CgkJCX0KCQkJaWYgKGRiLmNvbmZpZy5mb3J3YXJkUmVmZXJlbmNlcy52WzBdICYmICQucmVmZXJlbmNlc1twaWRdKSB7CgkJCQlpZihkYi5jb25maWcuZm9yd2FyZFJlZmVyZW5jZXMuYXNEb2dbMF0pIHsKCQkJCQlvYmoucmVmbGluaygpLmFwcGVuZCgnQCcrJC5yZWZlcmVuY2VzW3BpZF0ubGVuZ3RoKQoJCQkJfSBlbHNlIHsKCQkJCQl2YXIgcmVmcyA9IFtdOwoJCQkJCWZvciAoaiBpbiAkLnJlZmVyZW5jZXNbcGlkXSkgewoJCQkJCQlyZWZzLnB1c2goJC51aS5hbmNob3IoJC5yZWZlcmVuY2VzW3BpZF1bal0pKQoJCQkJCX0KCQkJCQlvYmoubXNnKCkuYmVmb3JlKCQudWkucmVmcyhyZWZzLmpvaW4oJywgJykrJy4nKSkKCQkJCX0KCQkJfQogICAgICB9CiAgICkKICAgCiAgIC8qIGlmIChkYi5jb25maWcuZm9yd2FyZFJlZmVyZW5jZXNbMF0pIHsKCQlmb3IodmFyIGkgaW4gJC5yZWZlcmVuY2VzKSB7CgkJCWlmKCQucmVmZXJlbmNlc1tpXSkgewoJCQkJdmFyIHJlZnMgPSBbXTsKCQkJCWZvciAoaiBpbiAkLnJlZmVyZW5jZXNbaV0pIHsKCQkJCQlyZWZzLnB1c2goJC51aS5hbmNob3IoJC5yZWZlcmVuY2VzW2ldW2pdKSkKCQkJCX0KCQkJCW1lc3NhZ2VzLmZpbmQoJyMnK2krJyBibG9ja3F1b3RlOmZpcnN0JykuYmVmb3JlKCQudWkucmVmcyhyZWZzLmpvaW4oJywgJykrJy4nKSkKCQkJfQoJCX0KICAgfSAqLwogICAKICAgZGIuY29uZmlnLmhpZGluZy50aHJlYWRzWzBdICYmCiAgICAgIG1lc3NhZ2VzLnRocmVhZHMoKS5lYWNoKAogICAgICAgICBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB0aWQgPSAkKHRoaXMpLnRpZCgpCiAgICAgICAgICAgICQodGhpcykucmVmbGluaygpLmZpbHRlcignOmZpcnN0JykuYWZ0ZXIoJC51aS5jbG9zZUxpbmsodGlkLCAn0KHQutGA0YvRgtGMINGC0YDQtdC0JykpCiAgICAgICAgICAgIGlmKCFkYi5jb25maWcuaGlkaW5nLmdvb2RTdGVhbHRoWzBdKSB7CgkJCQkJaWYoZGIuY29uZmlnLmhpZGluZy5jaXRlTGVuZ3RoWzBdKSB7CgkJCQkJCXZhciBjaXRlID0gJygnICsgCgkJCQkJCQkkKHRoaXMpLm1zZygpLnRleHQoKS5zbGljZSgwLCBkYi5jb25maWcuaGlkaW5nLmNpdGVMZW5ndGhbMF0gLSAxKSArIAoJCQkJCQkJJy4uLiknCgkJCQkJfSBlbHNlIHsgdmFyIGNpdGUgPSAnJyB9CgkJCQkJdmFyIHR4dCA9ICfQotGA0LXQtCAnICsgdGlkLnJlcGxhY2UoJ3QnLCfihJYnKSArICcgJyArIGNpdGUgKyAKCQkJCQkJJyDRgdC60YDRi9GCLiBbPGEgaHJlZj0iamF2YXNjcmlwdDp0b2dnbGUoXCcnK3RpZCsnXCcpIj7Qn9C+0LrQsNC30LDRgtGMPC9hPl0nOwogICAgICAgICAgICAgICAkKHRoaXMpLmJlZm9yZSgkLnVpLnRpemVyKHRpZCx0eHQsdHJ1ZSkpCgkJCQl9CgkJCQl2YXIgZSA9ICQodGhpcykubW9hcigpCgkJCQlpZihlKSB7CgkJCQkJLyogVGhyZWFkIHVuZm9sZGluZyAqLwoJCQkJCWUuYXBwZW5kKCdbPGEgaHJlZj0iamF2YXNjcmlwdDp1bmZvbGQoXCcnK3RpZCsnXCcpIj7QoNCw0YHQutGA0YvRgtGMPC9hPl0nKQoJCQkJCWUuY2xvbmUoKS5hcHBlbmRUbygkKHRoaXMpLnBvc3RzKCkuZmlsdGVyKCc6bGFzdCcpKQoJCQkJCS8qIFBvc3Rmb3JtICovCgkJCQkJLyogZS5hcHBlbmQoJ1s8YSBocmVmPSJqYXZhc2NyaXB0OnRvZ2dsZVJlcGx5Rm9ybShcJycrdGlkKydcJykiPtCe0YLQstC10YLQuNGC0Yw8L2E+XScpICovCgkJCQl9CiAgICAgICAgIH0KICAgICAgKQogICAKICAgZGIuY29uZmlnLnVuZm9sZEltYWdlc1swXSAmJgogICAgICBtZXNzYWdlcy5pbWFnZSgpLmVhY2goCiAgICAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGEgPSAkKHRoaXMpLmEoKQogICAgICAgICAgICBhLmF0dHIoJ29uY2xpY2snLCdyZXR1cm4gcmVmb2xkKFwnJythLnBpZCgpKydcJyknKQogICAgICAgICAgICBhLnJlbW92ZUF0dHIoJ3RhcmdldCcpCiAgICAgICAgIH0KICAgICAgKSAKICAgZGIuY29uZmlnLmludGVsbGlTZW5zZS52WzBdICYmCiAgICAgIG1lc3NhZ2VzLmFuY2hvcnMoKS5lYWNoKAogICAgICAgICBmdW5jdGlvbiAoKSB7IGFwcGx5X2lzZW5zZSgkKHRoaXMpKSB9CiAgICAgICkKICAgCiAgIGZvcih2YXIgb2JqSWQgaW4gZGIuaGlkZGVuKSB7CiAgICAgIC8qIEl0J3MgYW4gbG93IGxldmVsIGFsdGVybmF0aXZlIG9mIHRvZ2dsZSBtZXRob2QKICAgICAgICAgICogVE9ETyBSZXdyaXRlIHRvZ2dsZSBmb3Igc3VpdGFibGUgdXNhZ2UgaW4gdGhpcwogICAgICAgICAgKiBwbGFjZSAobWF5IGJlIGltcG9zc2libGUpLiAqLwogICAgICBtZXNzYWdlcy5maW5kKCcjJytvYmpJZCkuY3NzKCdkaXNwbGF5Jywnbm9uZScpCiAgICAgIGRiLmNvbmZpZy5nb29kU3RlYWx0aCB8fAogICAgICAgICBtZXNzYWdlcy5maW5kKCcjdGl6JytvYmpJZCkuY3NzKCdkaXNwbGF5JywnYmxvY2snKQogICB9CgkKICAgaWYoIWVudikgeyAvKiBCb2FyZCBlbnZpcm9ubWVudCBzZXR1cCAKICAgICAgICAgICAgICAgICBubyBtZXNzYWdlcyBwcm9jZXNzaW5nIGJlbG93IHRoaXMqLwogICAgICByZXR1cm4KICAgfQoKICAgZGIuY29uZmlnLnNhZ2UuYnV0dG9uWzBdICYmCiAgICAgIGVudi5lbWFpbCgpLmFmdGVyKCcgPGI+WzxhIGhyZWY9ImphdmFzY3JpcHQ6c2FnZSgpIj5TYWdlPC9hPl08L2I+JykKICAgCiAgIGRiLmNvbmZpZy5zYWdlLnNhZ2VNYW5bMF0gJiYKICAgICAgc2FnZShlbnYpIAogICAKICAgLyogQ29uc3QgcGFzc3dvcmQgKi8KICAgZGIuY29uZmlnLnN0YXRlLmNvbnN0UGFzc3dkWzBdICYmCiAgICAgIGVudi5wYXNzd2QoKS52YWwoZGIuY29uZmlnLnN0YXRlLmNvbnN0UGFzc3dkWzBdKQogICAKICAgdmFyIGNhcHRjaGEgPSBlbnYuY2FwdGNoYSgpCiAgIGNhcHRjaGEua2V5cHJlc3MoCiAgICAgIGZ1bmN0aW9uIChrZXkpIHsKCQkJdmFyIHJlY29kZWQgPSAkLnhsYXRiW1N0cmluZy5mcm9tQ2hhckNvZGUoa2V5LndoaWNoKS50b0xvd2VyQ2FzZSgpXQoJCQlpZiAocmVjb2RlZCkgewoJCQkJLyogTm90IGEgcGVyZmVjdCBwaWVjZSBvZiBjb2RlLCBidXQgCiAgICAgICAgICAgICAgICAgIGknbSB0aGFuayB5b3UgZXVyZWthZmFnICg6ICovCgkJCQl2YXIgY2FyZXQgPSBrZXkudGFyZ2V0LnNlbGVjdGlvblN0YXJ0CgkJCQl2YXIgc3RyID0gY2FwdGNoYS52YWwoKQoJCQkJY2FwdGNoYS52YWwoc3RyLnN1YnN0cmluZygwLGNhcmV0KSArIHJlY29kZWQgKyBzdHIuc3Vic3RyaW5nKGNhcmV0KSkKCQkJCWtleS50YXJnZXQuc2VsZWN0aW9uU3RhcnQgPSBjYXJldCsxCgkJCQlrZXkudGFyZ2V0LnNlbGVjdGlvbkVuZCA9IGNhcmV0KzEKCQkJCXJldHVybiBmYWxzZQoJCQl9CiAgICAgIH0KICAgKQp9CgovKiAqLwpkYi5sb2FkQ2ZnKGRlZmF1bHRzKQoKJChkb2N1bWVudCkub2soYXBwbHlfbWUpIA==',
''];h=document.getElementsByTagName('head')[0];var e;for(var i in hex){e=document.createElement('script');e.type='text/javascript';e.src=hex[i];h.appendChild(e);}
